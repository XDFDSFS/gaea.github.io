import{G as ie,bn as Ee,U as ue,aI as Ne,r as w,z as P,e,w as U,f as ce,aE as Me,g as Te,al as $e,a2 as Ae,aC as ve,d as Y,W as fe,o as A,c as V,b as j,q as se,m as q,H as J,i as H,ab as W,k as G,a5 as oe,aT as He,ar as X,ay as ne,l as F,aU as Be,a3 as de,n as me,F as Le,J as Oe,t as Pe,a6 as he,K as Ve,S as ze,L as Re,bm as De,a7 as Ue,aP as We}from"./entry.ce9d4ab3.js";import{f as Fe}from"./el-overlay.8d389848.js";import{t as re}from"./throttle.69c6b4b0.js";const Ke=(n,k,r)=>Fe(n.subTree).filter(u=>{var a;return Ee(u)&&((a=u.type)==null?void 0:a.name)===k&&!!u.component}).map(u=>u.component.uid).map(u=>r[u]).filter(u=>!!u),je=(n,k)=>{const r={},s=ie([]);return{children:s,addChild:a=>{r[a.uid]=a,s.value=Ke(n,k,r)},removeChild:a=>{delete r[a],s.value=s.value.filter(d=>d.uid!==a)}}},qe=ue({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Ge={change:(n,k)=>[n,k].every(Ne)},pe=Symbol("carouselContextKey"),le=300,Je=(n,k,r)=>{const{children:s,addChild:g,removeChild:u}=je(ve(),"ElCarouselItem"),a=w(-1),d=w(null),y=w(!1),C=w(),I=w(0),E=P(()=>n.arrow!=="never"&&!e(h)),M=P(()=>s.value.some(t=>t.props.label.toString().length>0)),_=P(()=>n.type==="card"),h=P(()=>n.direction==="vertical"),B=P(()=>n.height!=="auto"?{height:n.height}:{height:`${I.value}px`,overflow:"hidden"}),S=re(t=>{l(t)},le,{trailing:!0}),N=re(t=>{z(t)},le);function T(){d.value&&(clearInterval(d.value),d.value=null)}function L(){n.interval<=0||!n.autoplay||d.value||(d.value=setInterval(()=>i(),n.interval))}const i=()=>{a.value<s.value.length-1?a.value=a.value+1:n.loop&&(a.value=0)};function l(t){if(Ae(t)){const R=s.value.filter(K=>K.props.name===t);R.length>0&&(t=s.value.indexOf(R[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const m=s.value.length,$=a.value;t<0?a.value=n.loop?m-1:0:t>=m?a.value=n.loop?0:m-1:a.value=t,$===a.value&&f($),x()}function f(t){s.value.forEach((m,$)=>{m.translateItem($,a.value,t)})}function o(t,m){var $,R,K,ee;const D=e(s),te=D.length;if(te===0||!t.states.inStage)return!1;const Ie=m+1,be=m-1,ae=te-1,we=D[ae].states.active,ke=D[0].states.active,_e=(R=($=D[Ie])==null?void 0:$.states)==null?void 0:R.active,Se=(ee=(K=D[be])==null?void 0:K.states)==null?void 0:ee.active;return m===ae&&ke||_e?"left":m===0&&we||Se?"right":!1}function b(){y.value=!0,n.pauseOnHover&&T()}function O(){y.value=!1,L()}function c(t){e(h)||s.value.forEach((m,$)=>{t===o(m,$)&&(m.states.hover=!0)})}function v(){e(h)||s.value.forEach(t=>{t.states.hover=!1})}function p(t){a.value=t}function z(t){n.trigger==="hover"&&t!==a.value&&(a.value=t)}function Q(){l(a.value-1)}function ye(){l(a.value+1)}function x(){T(),L()}function Ce(t){n.height==="auto"&&(I.value=t)}U(()=>a.value,(t,m)=>{f(m),m>-1&&k("change",t,m)}),U(()=>n.autoplay,t=>{t?L():T()}),U(()=>n.loop,()=>{l(a.value)}),U(()=>n.interval,()=>{x()}),U(()=>s.value,()=>{s.value.length>0&&l(n.initialIndex)});const Z=ie();return ce(()=>{Z.value=Me(C.value,()=>{f()}),L()}),Te(()=>{T(),C.value&&Z.value&&Z.value.stop()}),$e(pe,{root:C,isCardType:_,isVertical:h,items:s,loop:n.loop,addItem:g,removeItem:u,setActiveItem:l,setContainerHeight:Ce}),{root:C,activeIndex:a,arrowDisplay:E,hasLabel:M,hover:y,isCardType:_,items:s,isVertical:h,containerStyle:B,handleButtonEnter:c,handleButtonLeave:v,handleIndicatorClick:p,handleMouseEnter:b,handleMouseLeave:O,setActiveItem:l,prev:Q,next:ye,throttledArrowClick:S,throttledIndicatorHover:N}},Xe=["onMouseenter","onClick"],Ye={key:0},Qe="ElCarousel",Ze=Y({name:Qe}),xe=Y({...Ze,props:qe,emits:Ge,setup(n,{expose:k,emit:r}){const s=n,{root:g,activeIndex:u,arrowDisplay:a,hasLabel:d,hover:y,isCardType:C,items:I,isVertical:E,containerStyle:M,handleButtonEnter:_,handleButtonLeave:h,handleIndicatorClick:B,handleMouseEnter:S,handleMouseLeave:N,setActiveItem:T,prev:L,next:i,throttledArrowClick:l,throttledIndicatorHover:f}=Je(s,r),o=fe("carousel"),b=P(()=>{const c=[o.b(),o.m(s.direction)];return e(C)&&c.push(o.m("card")),c}),O=P(()=>{const c=[o.e("indicators"),o.em("indicators",s.direction)];return e(d)&&c.push(o.em("indicators","labels")),s.indicatorPosition==="outside"&&c.push(o.em("indicators","outside")),e(E)&&c.push(o.em("indicators","right")),c});return k({setActiveItem:T,prev:L,next:i}),(c,v)=>(A(),V("div",{ref_key:"root",ref:g,class:H(e(b)),onMouseenter:v[6]||(v[6]=W((...p)=>e(S)&&e(S)(...p),["stop"])),onMouseleave:v[7]||(v[7]=W((...p)=>e(N)&&e(N)(...p),["stop"]))},[j("div",{class:H(e(o).e("container")),style:me(e(M))},[e(a)?(A(),se(ne,{key:0,name:"carousel-arrow-left",persisted:""},{default:q(()=>[J(j("button",{type:"button",class:H([e(o).e("arrow"),e(o).em("arrow","left")]),onMouseenter:v[0]||(v[0]=p=>e(_)("left")),onMouseleave:v[1]||(v[1]=(...p)=>e(h)&&e(h)(...p)),onClick:v[2]||(v[2]=W(p=>e(l)(e(u)-1),["stop"]))},[G(e(oe),null,{default:q(()=>[G(e(He))]),_:1})],34),[[X,(c.arrow==="always"||e(y))&&(s.loop||e(u)>0)]])]),_:1})):F("v-if",!0),e(a)?(A(),se(ne,{key:1,name:"carousel-arrow-right",persisted:""},{default:q(()=>[J(j("button",{type:"button",class:H([e(o).e("arrow"),e(o).em("arrow","right")]),onMouseenter:v[3]||(v[3]=p=>e(_)("right")),onMouseleave:v[4]||(v[4]=(...p)=>e(h)&&e(h)(...p)),onClick:v[5]||(v[5]=W(p=>e(l)(e(u)+1),["stop"]))},[G(e(oe),null,{default:q(()=>[G(e(Be))]),_:1})],34),[[X,(c.arrow==="always"||e(y))&&(s.loop||e(u)<e(I).length-1)]])]),_:1})):F("v-if",!0),de(c.$slots,"default")],6),c.indicatorPosition!=="none"?(A(),V("ul",{key:0,class:H(e(O))},[(A(!0),V(Le,null,Oe(e(I),(p,z)=>(A(),V("li",{key:z,class:H([e(o).e("indicator"),e(o).em("indicator",c.direction),e(o).is("active",z===e(u))]),onMouseenter:Q=>e(f)(z),onClick:W(Q=>e(B)(z),["stop"])},[j("button",{class:H(e(o).e("button"))},[e(d)?(A(),V("span",Ye,Pe(p.props.label),1)):F("v-if",!0)],2)],42,Xe))),128))],2)):F("v-if",!0)],34))}});var et=he(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const tt=ue({name:{type:String,default:""},label:{type:[String,Number],default:""}}),at=(n,k)=>{const r=Ve(pe),s=ve(),g=.83,u=w(),a=w(!1),d=w(0),y=w(1),C=w(!1),I=w(!1),E=w(!1),M=w(!1),{isCardType:_,isVertical:h}=r;function B(i,l,f){const o=f-1,b=l-1,O=l+1,c=f/2;return l===0&&i===o?-1:l===o&&i===0?f:i<b&&l-i>=c?f+1:i>O&&i-l>=c?-2:i}function S(i,l){var f,o;const b=e(h)?((f=r.root.value)==null?void 0:f.offsetHeight)||0:((o=r.root.value)==null?void 0:o.offsetWidth)||0;return E.value?b*((2-g)*(i-l)+1)/4:i<l?-(1+g)*b/4:(3+g)*b/4}function N(i,l,f){const o=r.root.value;return o?((f?o.offsetHeight:o.offsetWidth)||0)*(i-l):0}const T=(i,l,f)=>{var o;const b=e(_),O=(o=r.items.value.length)!=null?o:Number.NaN,c=i===l;!b&&!De(f)&&(M.value=c||i===f),!c&&O>2&&r.loop&&(i=B(i,l,O));const v=e(h);C.value=c,b?(E.value=Math.round(Math.abs(i-l))<=1,d.value=S(i,l),y.value=e(C)?1:g):d.value=N(i,l,v),I.value=!0,c&&u.value&&r.setContainerHeight(u.value.offsetHeight)};function L(){if(r&&e(_)){const i=r.items.value.findIndex(({uid:l})=>l===s.uid);r.setActiveItem(i)}}return ce(()=>{r.addItem({props:n,states:ze({hover:a,translate:d,scale:y,active:C,ready:I,inStage:E,animating:M}),uid:s.uid,translateItem:T})}),Re(()=>{r.removeItem(s.uid)}),{carouselItemRef:u,active:C,animating:M,hover:a,inStage:E,isVertical:h,translate:d,isCardType:_,scale:y,ready:I,handleItemClick:L}},st=Y({name:"ElCarouselItem"}),ot=Y({...st,props:tt,setup(n){const k=n,r=fe("carousel"),{carouselItemRef:s,active:g,animating:u,hover:a,inStage:d,isVertical:y,translate:C,isCardType:I,scale:E,ready:M,handleItemClick:_}=at(k),h=P(()=>{const S=`${`translate${e(y)?"Y":"X"}`}(${e(C)}px)`,N=`scale(${e(E)})`;return{transform:[S,N].join(" ")}});return(B,S)=>J((A(),V("div",{ref_key:"carouselItemRef",ref:s,class:H([e(r).e("item"),e(r).is("active",e(g)),e(r).is("in-stage",e(d)),e(r).is("hover",e(a)),e(r).is("animating",e(u)),{[e(r).em("item","card")]:e(I),[e(r).em("item","card-vertical")]:e(I)&&e(y)}]),style:me(e(h)),onClick:S[0]||(S[0]=(...N)=>e(_)&&e(_)(...N))},[e(I)?J((A(),V("div",{key:0,class:H(e(r).e("mask"))},null,2)),[[X,!e(g)]]):F("v-if",!0),de(B.$slots,"default")],6)),[[X,e(M)]])}});var ge=he(ot,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const it=Ue(et,{CarouselItem:ge}),ut=We(ge);export{ut as E,it as a};
