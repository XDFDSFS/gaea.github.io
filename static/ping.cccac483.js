import{u}from"./user.70f06b73.js";import{F as f}from"./Fingerprinter.f4aa236f.js";import{n as p}from"./referral.4a426d7c.js";const g=async()=>{try{const t=await(await fetch("https://ipinfo.io/json")).json(),{ip:o,city:c,country:i,loc:r}=t,[s,a]=r.split(",").map(Number);return{ip:o,city:c,country:i,latitude:s,longitude:a}}catch(e){console.error("Error fetching IP:",e)}},w=async()=>{const e=u();if(!e.getUserInfo)return!1;if(!e.getUuidv4){const t=await f.getFinalFingerprint(e.getUserInfo.uid);e.setUuidv4(t)}try{const t=e.getUserInfo.timeDifference,o=Date.now(),i=Math.floor((o-t)/1e3)||Math.floor(o/1e3),r=await p({uid:e.getUserInfo.uid,browser_id:e.getUuidv4,timestamp:i,version:"1.0.0"});if(r.code===200){const{interval:s,score:a}=r.data;if(e.setPingInterval(s*1e3),!e.getPingInfo){const n=await g();await e.setPingInfo({...r.data,browser_id:e.getUuidv4,name:"Unknown Device",ip_address:n.ip,country:n.city,country_icon:n.country.toLowerCase(),network_rate:1,is_connected:1,latitude:n.latitude,longitude:n.longitude,uptime:0,points:0,ip_score:a})}return!0}else return console.error("ping error:",r.msg),!1}catch(t){return console.error("An error occurred during the network ping process:",t),!1}};export{w as n};
