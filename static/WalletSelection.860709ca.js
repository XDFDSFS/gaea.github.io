var R=Object.defineProperty;var $=(n,o,e)=>o in n?R(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e;var y=(n,o,e)=>($(n,typeof o!="symbol"?o+"":o,e),e);import{E as V}from"./el-overlay.1d4579a3.js";import{_ as j}from"./client-only.c653ec78.js";import{d as N,r as c,a7 as L,o as i,A as z,m as E,l as F,b as s,c as u,F as G,B as O,e as r,t as x,k as P,z as T,G as U}from"./entry.c83031a7.js";import{u as Y}from"./godhood.8bf4bbca.js";import{E as Z}from"./ethers.8e44514b.js";import{s as H}from"./utils.154eefbe.js";import"./focus-trap.6b69e0dc.js";import"./isNil.c75b1b34.js";import"./event.2c073216.js";import"./el-button.3d193328.js";import"./user.a968ca00.js";import"./verification.856d912b.js";import"./godhead.bc5f1c97.js";import"./request.2e4904dc.js";import"./-vite-browser-externalcommonjs-proxy.0e49e858.js";class J extends Event{constructor(){super("eip6963:requestProvider")}}const w="dAppDefaultWalletProviderRdns";class K extends Z{constructor(){super();y(this,"providerDetails");this.providerDetails=[]}log(e){}providerReceived(e){this.providerDetails.push(e),this.emit("providerDetailsUpdated"),this.log(`updated wallet provider details from '${e.info.name}' extension`)}subscribe(){window.addEventListener("eip6963:announceProvider",e=>{this.log(`received 'announceProvider' emitted by ${e.detail.info.name} / ${e.detail.info.rdns}`),this.providerReceived(e.detail)})}requestProviders(){this.log("emitting 'requestProvider' event"),this.providerDetails=[],window.dispatchEvent(new J)}storeDefaultProviderRdns(e){window.localStorage.setItem(w,e),this.log(`stored default provider rdns '${e}' in local storage.`)}readDefaultProviderRdns(){const e=window.localStorage.getItem(w);return this.log(`read default provider rdns '${e}' from local storage.`),e}removeDefaultProvider(){window.localStorage.removeItem(w),this.log("removed default provider rdns from local storage")}}const M={class:"w-full space-x-1 space-y-3 px-4 pb-4 z-[10] mx-auto"},Q=s("span",{class:"text-[#EBEBEB] text-[14px]"},"Connect",-1),X={class:"w-full border border-[#2E2E2E] rounded-[9px] h-8 flex items-center justify-between px-4 hover:scale-[1.05] duration-700 cursor-pointer"},ee={class:"flex items-center justify-center space-x-2"},te={class:"flex-shrink-0"},se=["src"],oe={class:"text-[#B0B0B0] text-[12px] font-[400]"},re=["onClick"],ne={key:0,class:"relative block w-2 h-2 bg-green-300 rounded-full shadow-inner shadow-green-500"},ae=s("span",{class:"absolute inline-flex w-full h-full bg-green-400 rounded-full opacity-75 animate-halo"},null,-1),le=[ae],ie={key:0,class:"z-10 flex items-center justify-between px-2 pt-2 relative",style:{opacity:"1",transform:"translateY(0%) translateZ(0px)"}},de={class:"select-none"},ce=s("span",{class:"iconfont icon-copy text-xs sm:text-sm text-[#6E6E6E]"},null,-1),Ce=N({__name:"WalletSelection",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog","update:success"],setup(n,{emit:o}){const e=c(),b=Y(),D=c(),d=new K,p=c([]),B=c(null),a=c(null),_=()=>{p.value=[],o("update:closeDialog"),e.value=null,D.value=null},k=async()=>{p.value=[],A(),S(),d.subscribe(),C()},C=()=>{d.requestProviders()},A=()=>{const t=d.readDefaultProviderRdns();return B.value=t,t},S=()=>{d.on("providerDetailsUpdated",()=>{const t=d.providerDetails;p.value=t.filter((v,l,h)=>l===h.findIndex(g=>g.info.name===v.info.name))})},W=async(t,v)=>{e.value=v,b.setAccountWalletItem(t.provider);try{const l=await t.provider.request({method:"eth_requestAccounts"});q(l)}catch{}},q=t=>{I(t[0])},I=t=>{a.value=t.toLowerCase(),b.setAccountsWalletAddress(a.value),setTimeout(async()=>{t&&(o("update:success"),_())},1e3)};return(t,v)=>{const l=V,h=j,g=L("copy");return i(),z(h,null,{default:E(()=>[F(l,{class:"border-box","destroy-on-close":"",draggable:"","model-value":t.$props.dialogVisible,"show-close":!1,width:"389px","append-to-body":!0,style:{background:"black","border-radius":"10px","padding-bottom":"10px"},"align-center":"",onClose:_,onOpen:k},{default:E(()=>[s("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:_}),s("div",M,[Q,(i(!0),u(G,null,O(r(p),(m,f)=>(i(),u("div",{class:"",key:m.info.name},[s("div",X,[s("div",ee,[s("div",te,[s("img",{class:"w-5 h-5 rounded-full",src:m.info.icon,alt:"Provider image",style:{filter:"grayscale(100%) brightness(1)"}},null,8,se)]),s("span",oe,x(m.info.name),1)]),s("div",{class:"text-[#EBEBEB] text-[10px] cursor-pointer hover:underline underline-offset-4 duration-500 flex items-center space-x-1",onClick:ue=>W(m,f)},[s("span",null,x(r(e)===f&&r(a)?"Connected":"Connect"),1),r(e)===f&&r(a)?(i(),u("div",ne,le)):P("",!0)],8,re)]),r(e)===f&&r(a)?(i(),u("div",ie,[T((i(),u("p",de,[U(x(("stringStar"in t?t.stringStar:r(H))({value:r(a),characters:"********",start:4})),1)])),[[g,r(a)]]),ce])):P("",!0)]))),128))])]),_:1},8,["model-value"])]),_:1})}}});export{Ce as default};
