import{a as T,_ as z}from"./logo.23fd9761.js";import{E as A}from"./el-input.b34c1709.js";import{a as I,E as M}from"./el-checkbox.cfb6c69d.js";import{c as N,E as S,a as U}from"./el-form.c1065839.js";import{_ as D}from"./client-only.5366a66d.js";import{d as Y,g as f,a as $,f as q,D as v,o as _,c as m,j as n,k as c,b as s,F as g,e as r,X as H,Y as G,Q as J,E as u,aq as O,aj as Q,B as X}from"./entry.8df1fb2a.js";import{c as Z}from"./passwords.46d2a945.js";import{v as K}from"./el-loading.ea548fa2.js";import{a as W,b as ee,_ as se}from"./bg-kuang.77e7d82b.js";import{C as k}from"./index.1735d320.js";const te={class:"w-full h-screen pb-5"},oe=s("img",{src:W,class:"w-full h-full fixed inset-0 object-cover -z-10"},null,-1),ae={class:"w-full h-screen flex flex-col overflow-auto"},re=s("div",{class:"w-full h-12 text-base text-white font-normal px-5 flex items-center justify-between"},[s("img",{src:T,alt:"",class:"w-52 h-16 mt-4"})],-1),le={class:"w-full flex-1 flex justify-end overflow-auto pr-32"},ne={class:"w-[480px] h-[680px] relative sm:scale-50 md:scale-[0.7] xl:scale-[0.8] 2xl:scale-100"},ce=s("img",{src:ee,class:"w-full h-full absolute top-0 left-0 -z-10 object-left-top"},null,-1),ie={class:"w-full h-full"},de={class:"w-full h-[80px] mt-32 flex flex-col items-center justify-center space-y-1"},_e=s("div",{class:"text-3xl font-normal text-[#FFE099]"},"Let's get start ",-1),ue={class:"flex items-center space-x-2"},pe=s("span",{class:"text-sm font-normal text-[#C6BFAA]"},"Reset your password",-1),fe={class:"text-sm font-normal text-[#5CF3FF] cursor-pointer"},me={class:"w-full flex-1 px-12 mt-8"},we=s("span",{class:"iconfont icon-cfmpassword text-[#FFE099] text-xl"},null,-1),he={class:"set_checkbox_sty"},xe=s("span",{class:"iconfont icon-cfmpassword text-[#FFE099] text-xl"},null,-1),ve=s("img",{src:se,class:"w-full h-full object-cover"},null,-1),ge={"element-loading-background":"transparent",class:"text-base font-normal text-[#4E4A3C] absolute z-10"},Ae=Y({__name:"reset",emits:["update:closeDialog"],setup(ke,{emit:be}){const w=f(),d=f(!1),i=f(N());$();const p=q(),o=v({password_new:"",confirm_Password:"",checkList:[]}),b=v({password_new:[{validator:(a,e,t)=>{e===""?t(new Error("Please enter a valide password")):(o.checkList.length!==2&&t(new Error("Your password does not match")),t())},trigger:"blur"}],confirm_Password:[{validator:(a,e,t)=>{e===""?t(new Error("Please input the password again")):e!==o.password_new?t(new Error("Your password does not match")):t()},trigger:"blur"}]}),E=()=>{const{password_new:a}=o,e=Z(a);o.checkList=[],e.criteriaMet&&o.checkList.push(i==null?void 0:i.value[0]),e.lengthMet&&o.checkList.push(i==null?void 0:i.value[1])},y=a=>/^[A-Za-z0-9_-]+$/.test(a),P=a=>{const e=a.split(".");if(e.length!==3)return!1;for(const t of e)if(!y(t))return!1;return!0},F=async a=>{a&&await a.validate(async e=>{if(e)try{if(!p.getToken)return u.warning("Invalid link");if(!P(p.getToken))return u.warning("Parameter error");d.value=!0;const t=await O({token:p.getToken||"",password_new:k.SHA256(o.password_new).toString(k.enc.Hex)});d.value=!1,t.code===200?(u.success(t.msg),Q("/login")):u.error(t.msg)}catch(t){console.log(t),d.value=!1}})};return(a,e)=>{const t=z,h=A,C=M,L=I,x=S,j=U,V=D,B=K;return _(),m("div",te,[n(V,null,{default:c(()=>[oe,s("div",ae,[re,s("div",le,[s("div",ne,[ce,s("div",ie,[s("div",de,[_e,s("div",ue,[pe,s("span",fe,[n(t,{to:"/login"},{default:c(()=>[g("Log in")]),_:1})])])]),s("div",me,[n(j,{model:r(o),class:"space-y-8",ref_key:"ruleFormRef",ref:w,rules:r(b),"label-position":"top","hide-required-asterisk":""},{default:c(()=>[n(x,{label:"Password",prop:"password_new",onInput:E},{default:c(()=>[n(h,{placeholder:"Enter your password",type:"password",modelValue:r(o).password_new,"onUpdate:modelValue":e[0]||(e[0]=l=>r(o).password_new=l),"show-password":"",oncopy:"return false"},{prefix:c(()=>[we]),_:1},8,["modelValue"]),s("div",he,[n(L,{modelValue:r(o).checkList,"onUpdate:modelValue":e[1]||(e[1]=l=>r(o).checkList=l)},{default:c(()=>[(_(!0),m(H,null,G(r(i),(l,R)=>(_(),X(C,{label:l,value:l,key:R},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),n(x,{label:"Confirm Password",prop:"confirm_Password"},{default:c(()=>[n(h,{placeholder:"Enter your password",type:"password",modelValue:r(o).confirm_Password,"onUpdate:modelValue":e[2]||(e[2]=l=>r(o).confirm_Password=l),"show-password":"",oncopy:"return false"},{prefix:c(()=>[xe]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),s("div",{class:"w-[243px] h-11 absolute left-[118px] -bottom-4 z-10 flex items-center justify-center cursor-pointer",onClick:e[3]||(e[3]=l=>F(r(w)))},[ve,J((_(),m("span",ge,[g(" Save ")])),[[B,r(d)]])])])])])])]),_:1})])}}});export{Ae as default};
