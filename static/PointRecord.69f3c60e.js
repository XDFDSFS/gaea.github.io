import{_ as P,E as k,a as R}from"./el-scrollbar.01955f46.js";import{E as z}from"./el-select.dd6eea90.js";import{E as B}from"./el-overlay.6ab54b35.js";import{_ as A}from"./client-only.7198c9cb.js";import{d as V,r as E,I as b,o as c,A as u,m as r,l,b as m,z as J,e as o,k as h,t as L,c as U}from"./entry.120a12ae.js";import"./el-checkbox.ee27eed7.js";import"./el-popper.fe8a42ce.js";import"./el-input.b621932d.js";import{v as H}from"./el-loading.927e9db4.js";import{a as $}from"./metamask.8a0a3ea8.js";import{i as j}from"./dict.ce0f2911.js";import"./event.2c073216.js";import"./-vite-browser-externalcommonjs-proxy.0e49e858.js";import"./-initCloneObject.421231b9.js";import"./debounce.13ed8971.js";import"./el-button.f7ebb3d1.js";import"./validator.1d0c4d1c.js";import"./focus-trap.9a036924.js";import"./isNil.c75b1b34.js";import"./request.31d870c1.js";import"./user.b72a64e6.js";import"./godhood.fb2b4ddc.js";const q={class:"max-h-[90vh] overflow-hidden flex flex-col mt-5"},F={class:"w-full mt-4"},G={key:0,class:"w-full flex items-center justify-end mt-4 px-10"},ft=V({__name:"PointRecord",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog"],setup(K,{emit:S}){const g=E([]),i=E(!1),e=b({page:1,limit:10,active:!1}),a=b(JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||JSON.stringify({content:[],totalElements:0}))),v=()=>{const t=new Date,n=new Date(t);n.setDate(t.getDate()-30),g.value=[n.toISOString().split("T")[0],t.toISOString().split("T")[0]]},_=()=>{e.page=1,e.limit=10,a.content=[],a.totalElements=0,g.value=[],S("update:closeDialog")},D=t=>{e.page=t,d()},x=t=>{e.limit=t,d()},O=()=>{v(),a.content=JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||"[]").content,a.totalElements=JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||"[]").totalElements,d()},d=async()=>{try{if(g.value){i.value=!0;const t=await $(e.page,e.limit);i.value=!1,t&&t&&t.code===200&&(a.content=t.data,a.totalElements=t.total,localStorage.setItem("TABLE_POINT_RECORD",JSON.stringify({content:t.data,totalElements:t.total})))}}catch(t){console.log(t),i.value=!1}};return(t,n)=>{const T=P,p=k,w=R,y=z,C=B,N=A,I=H;return c(),u(N,null,{default:r(()=>[l(C,{class:"border-box",draggable:"","model-value":t.$props.dialogVisible,"show-close":!1,width:"750px",style:{background:"black","border-radius":"10px","padding-bottom":"10px"},"align-center":"",onClose:_,onOpen:O},{default:r(()=>{var f;return[m("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:_}),m("div",q,[m("div",F,[J((c(),u(w,{data:o(a).content,style:{width:"100%"},"max-height":"400px"},{empty:r(()=>[o(i)?h("",!0):(c(),u(T,{key:0,title:"No records available at the moment"}))]),default:r(()=>[l(p,{prop:"date",label:"DATE","min-width":"130px",align:"center"}),l(p,{prop:"description",label:"DESCRIPTION","min-width":"130px","show-overflow-tooltip":"",align:"center"}),l(p,{prop:"points",label:"POINTS","min-width":"130px",align:"center"}),l(p,{prop:"status",label:"STATUS","min-width":"130px",align:"center"},{default:r(s=>[m("span",null,L(("integralStatus"in t?t.integralStatus:o(j))(s.row.status).description),1)]),_:1})]),_:1},8,["data"])),[[I,o(i)]])]),((f=o(a).content)==null?void 0:f.length)!==0?(c(),U("div",G,[l(y,{"current-page":o(e).page,"onUpdate:currentPage":n[0]||(n[0]=s=>o(e).page=s),background:"",size:"small","page-size":o(e).limit,"onUpdate:pageSize":n[1]||(n[1]=s=>o(e).limit=s),"page-sizes":[10,20,50,100],layout:"total, prev, pager, next,sizes",total:o(a).totalElements,onCurrentChange:D,onSizeChange:x},null,8,["current-page","page-size","total"])])):h("",!0)])]}),_:1},8,["model-value"])]),_:1})}}});export{ft as default};
