import{ah as ve,aq as K,T as Q,f as le,az as pe,g as ye,b7 as G,M as be,$ as Z,c9 as Ce,aL as ae,bf as ee,w as q,bZ as Ee,be as ge,ca as Te,bg as Se,ak as X,U as J,ab as W,d as H,k as z,a6 as g,aV as ke,aF as we,al as Ae,K as oe,z as L,o as R,c as x,b as U,i as S,e as o,t as Me,m as D,q as P,ai as De,a1 as he,l as j,n as re,a7 as ue,cb as Le,bb as Ie,bh as Be,r as h,bz as Oe,A as Ne,Z as Re,cc as $e,cd as te,au as Ye,X as _e,H as ze,ax as He,aw as Ue,a3 as Ve,a4 as Ke,bT as Xe,a9 as xe}from"./entry.2eec8523.js";import{F as Fe,E as Ge}from"./focus-trap.c0699528.js";import{t as qe,U as ie}from"./event.0e1210c4.js";import{g as se,b as ne}from"./el-button.20539e0e.js";import{g as We}from"./scroll.ad07325d.js";const Pe=(...e)=>t=>{e.forEach(n=>{ve(n)?n(t):n.value=t})};var V=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(V||{});const F=e=>{const t=K(e)?e:[e],n=[];return t.forEach(s=>{var r;K(s)?n.push(...F(s)):Q(s)&&K(s.children)?n.push(...F(s.children)):(n.push(s),Q(s)&&((r=s.component)!=null&&r.subTree)&&n.push(...F(s.component.subTree)))}),n},je=(e,t,n)=>{let s={offsetX:0,offsetY:0};const r=l=>{const c=l.clientX,v=l.clientY,{offsetX:f,offsetY:b}=s,m=e.value.getBoundingClientRect(),i=m.left,E=m.top,I=m.width,$=m.height,Y=document.documentElement.clientWidth,B=document.documentElement.clientHeight,_=-i+f,O=-E+b,k=Y-i-I+f,w=B-E-$+b,N=T=>{const a=Math.min(Math.max(f+T.clientX-c,_),k),C=Math.min(Math.max(b+T.clientY-v,O),w);s={offsetX:a,offsetY:C},e.value.style.transform=`translate(${G(a)}, ${G(C)})`},p=()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",p)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",r)},u=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",r)};le(()=>{pe(()=>{n.value?d():u()})}),ye(()=>{u()})},Ze=(e,t={})=>{be(e)||qe("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||Z("popup"),s=Ce(()=>n.bm("parent","hidden"));if(!ae||ee(document.body,s.value))return;let r=0,d=!1,u="0";const l=()=>{setTimeout(()=>{Se(document==null?void 0:document.body,s.value),d&&document&&(document.body.style.width=u)},200)};q(e,c=>{if(!c){l();return}d=!ee(document.body,s.value),d&&(u=document.body.style.width),r=We(n.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=Ee(document.body,"overflowY");r>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${r}px)`),ge(document.body,s.value)}),Te(()=>l())},ce=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let t=!1,n=!1;return{onClick:u=>{t&&n&&e(u),t=n=!1},onMousedown:u=>{t=u.target===u.currentTarget},onMouseup:u=>{n=u.target===u.currentTarget}}},Je=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:W([String,Array,Object])},zIndex:{type:W([String,Number])}}),Qe={click:e=>e instanceof MouseEvent},eo="overlay";var oo=H({name:"ElOverlay",props:Je,emits:Qe,setup(e,{slots:t,emit:n}){const s=Z(eo),r=c=>{n("click",c)},{onClick:d,onMousedown:u,onMouseup:l}=ce(e.customMaskEvent?void 0:r);return()=>e.mask?z("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:l},[g(t,"default")],V.STYLE|V.CLASS|V.PROPS,["onClick","onMouseup","onMousedown"]):ke("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[g(t,"default")])}});const to=oo,de=Symbol("dialogInjectionKey"),fe=J({center:Boolean,alignCenter:Boolean,closeIcon:{type:we},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),so={close:()=>!0},no=["aria-label"],lo=["id"],ao=H({name:"ElDialogContent"}),ro=H({...ao,props:fe,emits:so,setup(e){const t=e,{t:n}=Ae(),{Close:s}=Le,{dialogRef:r,headerRef:d,bodyId:u,ns:l,style:c}=oe(de),{focusTrapRef:v}=oe(Fe),f=L(()=>[l.b(),l.is("fullscreen",t.fullscreen),l.is("draggable",t.draggable),l.is("align-center",t.alignCenter),{[l.m("center")]:t.center},t.customClass]),b=Pe(v,r),m=L(()=>t.draggable);return je(r,d,m),(i,E)=>(R(),x("div",{ref:o(b),class:S(o(f)),style:re(o(c)),tabindex:"-1"},[U("header",{ref_key:"headerRef",ref:d,class:S(o(l).e("header"))},[g(i.$slots,"header",{},()=>[U("span",{role:"heading",class:S(o(l).e("title"))},Me(i.title),3)]),i.showClose?(R(),x("button",{key:0,"aria-label":o(n)("el.dialog.close"),class:S(o(l).e("headerbtn")),type:"button",onClick:E[0]||(E[0]=I=>i.$emit("close"))},[z(o(he),{class:S(o(l).e("close"))},{default:D(()=>[(R(),P(De(i.closeIcon||o(s))))]),_:1},8,["class"])],10,no)):j("v-if",!0)],2),U("div",{id:o(u),class:S(o(l).e("body"))},[g(i.$slots,"default")],10,lo),i.$slots.footer?(R(),x("footer",{key:0,class:S(o(l).e("footer"))},[g(i.$slots,"footer")],2)):j("v-if",!0)],6))}});var uo=ue(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const io=J({...fe,appendToBody:Boolean,beforeClose:{type:W(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ie]:e=>Ie(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},fo=(e,t)=>{const s=Re().emit,{nextZIndex:r}=Be();let d="";const u=se(),l=se(),c=h(!1),v=h(!1),f=h(!1),b=h(e.zIndex||r());let m,i;const E=Oe("namespace",$e),I=L(()=>{const y={},M=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(y[`${M}-margin-top`]=e.top),e.width&&(y[`${M}-width`]=G(e.width))),y}),$=L(()=>e.alignCenter?{display:"flex"}:{});function Y(){s("opened")}function B(){s("closed"),s(ie,!1),e.destroyOnClose&&(f.value=!1)}function _(){s("close")}function O(){i==null||i(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=te(()=>p(),e.openDelay):p()}function k(){m==null||m(),i==null||i(),e.closeDelay&&e.closeDelay>0?{stop:i}=te(()=>T(),e.closeDelay):T()}function w(){function y(M){M||(v.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(y):k()}function N(){e.closeOnClickModal&&w()}function p(){ae&&(c.value=!0)}function T(){c.value=!1}function a(){s("openAutoFocus")}function C(){s("closeAutoFocus")}function A(y){var M;((M=y.detail)==null?void 0:M.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&Ze(c);function me(){e.closeOnPressEscape&&w()}return q(()=>e.modelValue,y=>{y?(v.value=!1,O(),f.value=!0,b.value=e.zIndex?b.value++:r(),Ne(()=>{s("open"),t.value&&(t.value.scrollTop=0)})):c.value&&k()}),q(()=>e.fullscreen,y=>{t.value&&(y?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),le(()=>{e.modelValue&&(c.value=!0,f.value=!0,O())}),{afterEnter:Y,afterLeave:B,beforeLeave:_,handleClose:w,onModalClick:N,close:k,doClose:T,onOpenAutoFocus:a,onCloseAutoFocus:C,onCloseRequested:me,onFocusoutPrevented:A,titleId:u,bodyId:l,closed:v,style:I,overlayDialogStyle:$,rendered:f,visible:c,zIndex:b}},mo=["aria-label","aria-labelledby","aria-describedby"],vo=H({name:"ElDialog",inheritAttrs:!1}),po=H({...vo,props:io,emits:co,setup(e,{expose:t}){const n=e,s=Ye();ne({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!s.title)),ne({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},L(()=>!!n.customClass));const r=Z("dialog"),d=h(),u=h(),l=h(),{visible:c,titleId:v,bodyId:f,style:b,overlayDialogStyle:m,rendered:i,zIndex:E,afterEnter:I,afterLeave:$,beforeLeave:Y,handleClose:B,onModalClick:_,onOpenAutoFocus:O,onCloseAutoFocus:k,onCloseRequested:w,onFocusoutPrevented:N}=fo(n,d);_e(de,{dialogRef:d,headerRef:u,bodyId:f,ns:r,rendered:i,style:b});const p=ce(_),T=L(()=>n.draggable&&!n.fullscreen);return t({visible:c,dialogContentRef:l}),(a,C)=>(R(),P(Xe,{to:"body",disabled:!a.appendToBody},[z(Ke,{name:"dialog-fade",onAfterEnter:o(I),onAfterLeave:o($),onBeforeLeave:o(Y),persisted:""},{default:D(()=>[ze(z(o(to),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":o(E)},{default:D(()=>[U("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:o(v),"aria-describedby":o(f),class:S(`${o(r).namespace.value}-overlay-dialog`),style:re(o(m)),onClick:C[0]||(C[0]=(...A)=>o(p).onClick&&o(p).onClick(...A)),onMousedown:C[1]||(C[1]=(...A)=>o(p).onMousedown&&o(p).onMousedown(...A)),onMouseup:C[2]||(C[2]=(...A)=>o(p).onMouseup&&o(p).onMouseup(...A))},[z(o(Ge),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(O),onFocusAfterReleased:o(k),onFocusoutPrevented:o(N),onReleaseRequested:o(w)},{default:D(()=>[o(i)?(R(),P(uo,He({key:0,ref_key:"dialogContentRef",ref:l},a.$attrs,{"custom-class":a.customClass,center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:o(T),fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,onClose:o(B)}),Ue({header:D(()=>[a.$slots.title?g(a.$slots,"title",{key:1}):g(a.$slots,"header",{key:0,close:o(B),titleId:o(v),titleClass:o(r).e("title")})]),default:D(()=>[g(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:D(()=>[g(a.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):j("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,mo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ve,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var yo=ue(po,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const So=xe(yo);export{So as E,to as a,Ze as b,ce as c,F as f,je as u};
