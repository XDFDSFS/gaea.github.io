import{D as V,M as ve,x as re,b0 as me,N as de,d as Q,cd as fe,ce as ke,cf as _e,av as pe,R as ge,aj as Ie,G as b,cg as Le,F as ze,y as f,A as ie,a4 as we,B as he,o as w,U as ce,a0 as c,V as _,b as g,X as u,e as a,Y as ue,ay as Ce,a9 as I,az as S,aH as Ee,c as x,a1 as J,aM as xe,aN as Ne,ch as Se,ci as Oe,a8 as Te,cj as Ae,ck as Re,aB as $e,W as Be,Z as Ve,a7 as q,$ as Me,am as Ye,P as ye,ak as B,S as M,cl as De,ab as be,au as Pe,t as Xe,ai as He,ah as Fe,aV as je,cm as We}from"./entry.aea712e6.js";import{t as le}from"./taskConnect.19083cf5.js";import{O as Ke}from"./el-input.4acba0e6.js";import{a as Ue}from"./Btn.vuevuetypescriptsetuptruelang.74948789.js";const Ze=(d,h)=>{if(!V||!d||!h)return!1;const r=d.getBoundingClientRect();let n;return h instanceof Element?n=h.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},r.top<n.bottom&&r.bottom>n.top&&r.right>n.left&&r.left<n.right},Ge=ve({urlList:{type:re(Array),default:()=>me([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),qe={close:()=>!0,switch:d=>de(d)},Je=["src"],Qe=Q({name:"ElImageViewer"}),et=Q({...Qe,props:Ge,emits:qe,setup(d,{expose:h,emit:r}){const n=d,O={CONTAIN:{name:"contain",icon:fe(ke)},ORIGINAL:{name:"original",icon:fe(_e)}},{t:L}=pe(),l=ge("image-viewer"),{nextZIndex:ee}=Ie(),T=b(),N=b([]),z=Le(),k=b(!0),v=b(n.initialIndex),m=ze(O.CONTAIN),i=b({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),Y=f(()=>{const{urlList:e}=n;return e.length<=1}),R=f(()=>v.value===0),H=f(()=>v.value===n.urlList.length-1),te=f(()=>n.urlList[v.value]),ae=f(()=>[l.e("btn"),l.e("prev"),l.is("disabled",!n.infinite&&R.value)]),D=f(()=>[l.e("btn"),l.e("next"),l.is("disabled",!n.infinite&&H.value)]),se=f(()=>{const{scale:e,deg:s,offsetX:o,offsetY:p,enableTransition:C}=i.value;let y=o/e,E=p/e;switch(s%360){case 90:case-270:[y,E]=[E,-y];break;case 180:case-180:[y,E]=[-y,-E];break;case 270:case-90:[y,E]=[-E,y];break}const $={transform:`scale(${e}) rotate(${s}deg) translate(${y}px, ${E}px)`,transition:C?"transform .3s":""};return m.value.name===O.CONTAIN.name&&($.maxWidth=$.maxHeight="100%"),$}),F=f(()=>de(n.zIndex)?n.zIndex:ee());function A(){oe(),r("close")}function ne(){const e=le(o=>{switch(o.code){case B.esc:n.closeOnPressEscape&&A();break;case B.space:U();break;case B.left:Z();break;case B.up:t("zoomIn");break;case B.right:G();break;case B.down:t("zoomOut");break}}),s=le(o=>{const p=o.deltaY||o.deltaX;t(p<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});z.run(()=>{M(document,"keydown",e),M(document,"wheel",s)})}function oe(){z.stop()}function j(){k.value=!1}function W(e){k.value=!1,e.target.alt=L("el.image.error")}function K(e){if(k.value||e.button!==0||!T.value)return;i.value.enableTransition=!1;const{offsetX:s,offsetY:o}=i.value,p=e.pageX,C=e.pageY,y=le($=>{i.value={...i.value,offsetX:s+$.pageX-p,offsetY:o+$.pageY-C}}),E=M(document,"mousemove",y);M(document,"mouseup",()=>{E()}),e.preventDefault()}function P(){i.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function U(){if(k.value)return;const e=De(O),s=Object.values(O),o=m.value.name,C=(s.findIndex(y=>y.name===o)+1)%e.length;m.value=O[e[C]],P()}function X(e){const s=n.urlList.length;v.value=(e+s)%s}function Z(){R.value&&!n.infinite||X(v.value-1)}function G(){H.value&&!n.infinite||X(v.value+1)}function t(e,s={}){if(k.value)return;const{zoomRate:o,rotateDeg:p,enableTransition:C}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...s};switch(e){case"zoomOut":i.value.scale>.2&&(i.value.scale=Number.parseFloat((i.value.scale/o).toFixed(3)));break;case"zoomIn":i.value.scale<7&&(i.value.scale=Number.parseFloat((i.value.scale*o).toFixed(3)));break;case"clockwise":i.value.deg+=p;break;case"anticlockwise":i.value.deg-=p;break}i.value.enableTransition=C}return ie(te,()=>{we(()=>{const e=N.value[0];e!=null&&e.complete||(k.value=!0)})}),ie(v,e=>{P(),r("switch",e)}),he(()=>{var e,s;ne(),(s=(e=T.value)==null?void 0:e.focus)==null||s.call(e)}),h({setActiveItem:X}),(e,s)=>(w(),ce(Ye,{to:"body",disabled:!e.teleported},[c(Me,{name:"viewer-fade",appear:""},{default:_(()=>[g("div",{ref_key:"wrapper",ref:T,tabindex:-1,class:u(a(l).e("wrapper")),style:ue({zIndex:a(F)})},[g("div",{class:u(a(l).e("mask")),onClick:s[0]||(s[0]=Ce(o=>e.hideOnClickModal&&A(),["self"]))},null,2),I(" CLOSE "),g("span",{class:u([a(l).e("btn"),a(l).e("close")]),onClick:A},[c(a(S),null,{default:_(()=>[c(a(Ee))]),_:1})],2),I(" ARROW "),a(Y)?I("v-if",!0):(w(),x(J,{key:0},[g("span",{class:u(a(ae)),onClick:Z},[c(a(S),null,{default:_(()=>[c(a(xe))]),_:1})],2),g("span",{class:u(a(D)),onClick:G},[c(a(S),null,{default:_(()=>[c(a(Ne))]),_:1})],2)],64)),I(" ACTIONS "),g("div",{class:u([a(l).e("btn"),a(l).e("actions")])},[g("div",{class:u(a(l).e("actions__inner"))},[c(a(S),{onClick:s[1]||(s[1]=o=>t("zoomOut"))},{default:_(()=>[c(a(Se))]),_:1}),c(a(S),{onClick:s[2]||(s[2]=o=>t("zoomIn"))},{default:_(()=>[c(a(Oe))]),_:1}),g("i",{class:u(a(l).e("actions__divider"))},null,2),c(a(S),{onClick:U},{default:_(()=>[(w(),ce(Te(a(m).icon)))]),_:1}),g("i",{class:u(a(l).e("actions__divider"))},null,2),c(a(S),{onClick:s[3]||(s[3]=o=>t("anticlockwise"))},{default:_(()=>[c(a(Ae))]),_:1}),c(a(S),{onClick:s[4]||(s[4]=o=>t("clockwise"))},{default:_(()=>[c(a(Re))]),_:1})],2)],2),I(" CANVAS "),g("div",{class:u(a(l).e("canvas"))},[(w(!0),x(J,null,$e(e.urlList,(o,p)=>Be((w(),x("img",{ref_for:!0,ref:C=>N.value[p]=C,key:o,src:o,style:ue(a(se)),class:u(a(l).e("img")),onLoad:j,onError:W,onMousedown:K},null,46,Je)),[[Ve,p===v.value]])),128))],2),q(e.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var tt=ye(et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const at=be(tt),st=ve({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:re([String,Object])},previewSrcList:{type:re(Array),default:()=>me([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),nt={load:d=>d instanceof Event,error:d=>d instanceof Event,switch:d=>de(d),close:()=>!0,show:()=>!0},ot=["src","loading"],lt={key:0},rt=Q({name:"ElImage",inheritAttrs:!1}),it=Q({...rt,props:st,emits:nt,setup(d,{emit:h}){const r=d;let n="";const{t:O}=pe(),L=ge("image"),l=Pe(),ee=Ke(),T=b(),N=b(!1),z=b(!0),k=b(!1),v=b(),m=b(),i=V&&"loading"in HTMLImageElement.prototype;let Y,R;const H=f(()=>[L.e("inner"),D.value&&L.e("preview"),z.value&&L.is("loading")]),te=f(()=>l.style),ae=f(()=>{const{fit:t}=r;return V&&t?{objectFit:t}:{}}),D=f(()=>{const{previewSrcList:t}=r;return Array.isArray(t)&&t.length>0}),se=f(()=>{const{previewSrcList:t,initialIndex:e}=r;let s=e;return e>t.length-1&&(s=0),s}),F=f(()=>r.loading==="eager"?!1:!i&&r.loading==="lazy"||r.lazy),A=()=>{V&&(z.value=!0,N.value=!1,T.value=r.src)};function ne(t){z.value=!1,N.value=!1,h("load",t)}function oe(t){z.value=!1,N.value=!0,h("error",t)}function j(){Ze(v.value,m.value)&&(A(),P())}const W=We(j,200,!0);async function K(){var t;if(!V)return;await we();const{scrollContainer:e}=r;Fe(e)?m.value=e:je(e)&&e!==""?m.value=(t=document.querySelector(e))!=null?t:void 0:v.value&&(m.value=Ue(v.value)),m.value&&(Y=M(m,"scroll",W),setTimeout(()=>j(),100))}function P(){!V||!m.value||!W||(Y==null||Y(),m.value=void 0)}function U(t){if(t.ctrlKey){if(t.deltaY<0)return t.preventDefault(),!1;if(t.deltaY>0)return t.preventDefault(),!1}}function X(){D.value&&(R=M("wheel",U,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",k.value=!0,h("show"))}function Z(){R==null||R(),document.body.style.overflow=n,k.value=!1,h("close")}function G(t){h("switch",t)}return ie(()=>r.src,()=>{F.value?(z.value=!0,N.value=!1,P(),K()):A()}),he(()=>{F.value?K():A()}),(t,e)=>(w(),x("div",{ref_key:"container",ref:v,class:u([a(L).b(),t.$attrs.class]),style:ue(a(te))},[N.value?q(t.$slots,"error",{key:0},()=>[g("div",{class:u(a(L).e("error"))},Xe(a(O)("el.image.error")),3)]):(w(),x(J,{key:1},[T.value!==void 0?(w(),x("img",He({key:0},a(ee),{src:T.value,loading:t.loading,style:a(ae),class:a(H),onClick:X,onLoad:ne,onError:oe}),null,16,ot)):I("v-if",!0),z.value?(w(),x("div",{key:1,class:u(a(L).e("wrapper"))},[q(t.$slots,"placeholder",{},()=>[g("div",{class:u(a(L).e("placeholder"))},null,2)])],2)):I("v-if",!0)],64)),a(D)?(w(),x(J,{key:2},[k.value?(w(),ce(a(at),{key:0,"z-index":t.zIndex,"initial-index":a(se),infinite:t.infinite,"zoom-rate":t.zoomRate,"url-list":t.previewSrcList,"hide-on-click-modal":t.hideOnClickModal,teleported:t.previewTeleported,"close-on-press-escape":t.closeOnPressEscape,onClose:Z,onSwitch:G},{default:_(()=>[t.$slots.viewer?(w(),x("div",lt,[q(t.$slots,"viewer")])):I("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):I("v-if",!0)],64)):I("v-if",!0)],6))}});var ct=ye(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const mt=be(ct);const pt=""+globalThis.__publicAssetsURL("images/public/head/default_avatar.png"),gt=""+globalThis.__publicAssetsURL("images/missions/white_x.png?v=2%60"),wt=""+globalThis.__publicAssetsURL("images/missions/white_discord.png?v=3%60");export{mt as E,pt as _,gt as a,wt as b};
