import{u as i}from"./user.f5eb9062.js";import{n as f,g}from"./referral.98fd4e25.js";import{F as u}from"./Fingerprinter.8f694aa5.js";const d=async e=>{const t=i();try{const r=await g(),n=r.code===200?r.data:{longitude:-1,latitude:-1,country:"Unknown",ip_address:"None"};await t.setPingInfo({...n,browser_id:t.getUuidv4,name:"Unknown Device",network_rate:1,is_connected:1,uptime:0,points:0,ip_score:e||0})}catch(r){console.error("Error fetching IP:",r)}},l=async()=>{const e=i();if(!e.getUserInfo)return!1;if(!e.getUuidv4){const t=await u.getFinalFingerprint(e.getUserInfo.uid);e.setUuidv4(t)}try{const t=e.getUserInfo.timeDifference,r=Date.now(),s=Math.floor((r-t)/1e3)||Math.floor(r/1e3),o=await f({uid:e.getUserInfo.uid,browser_id:e.getUuidv4,timestamp:s,version:e.getVersion||"1.0.0"});if(o.code===200){const{interval:a,score:c}=o.data;e.setPingInterval(a*1e3),e.getPingInfo||d(c)}return!0}catch(t){return console.error("An error occurred during the network ping process:",t),!0}};export{l as n};
