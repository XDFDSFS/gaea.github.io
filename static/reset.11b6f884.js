import{_ as k,a as j}from"./logo.7edba26b.js";import{E as A,_ as I,t as M}from"./throttle.a74a504c.js";import{a as N,E as S}from"./el-checkbox.a8bb0a8d.js";import{c as U,E as $,a as H}from"./el-form.bf7478ae.js";import{_ as D}from"./client-only.c02711fc.js";import{d as G,g as u,a as Y,D as x,o as f,c as g,j as l,k as i,b as t,G as q,e as a,W as z,X as J,E as p,af as O,C as W}from"./entry.b8809691.js";import{c as X}from"./passwords.46d2a945.js";import{u as Z}from"./user.70f06b73.js";import{e as K}from"./user.6915e3fb.js";import{_ as Q}from"./bg-img.84baea39.js";import{C as v}from"./index.1735d320.js";import"./request.482057a7.js";const ee={class:"w-full h-screen pb-5 bg-black"},se=t("video",{src:Q,muted:"",autoplay:"",loop:"",playsinline:"",class:"w-full h-full fixed inset-0 object-cover"},null,-1),te=t("img",{src:k,alt:"",class:"fixed top-8 left-8 w-52 h-16"},null,-1),oe={class:"w-full h-full flex justify-end items-center overflow-auto pr-32"},re={class:"w-[480px] h-fit px-8 pt-6 pb-13 space-y-8 sm:scale-50 md:scale-[0.7] xl:scale-[0.8] 2xl:scale-100 rounded-lg"},ae=t("div",{class:"flex items-center justify-center"},[t("img",{src:k,alt:"",class:"w-52 h-16"})],-1),ne={class:"w-full flex flex-col items-center justify-center space-y-1"},le=t("div",{class:"text-3xl font-normal text-[#FFE099]"},"Let's get start ",-1),ie={class:"flex items-center space-x-2"},ce=t("span",{class:"text-sm font-normal text-[#C6BFAA]"},"Reset your password",-1),de={class:"text-sm font-normal text-[#5CF3FF] cursor-pointer"},pe={class:"w-full flex-1"},_e=t("span",{class:"iconfont icon-cfmpassword text-[#FFE099] text-xl"},null,-1),ue={class:"set_checkbox_sty"},fe=t("span",{class:"iconfont icon-cfmpassword text-[#FFE099] text-xl"},null,-1),me=t("span",{class:"text-lg",style:{"letter-spacing":"0.1em"}},"Save",-1),Te=G({__name:"reset",emits:["update:closeDialog"],setup(we,{emit:he}){const m=u(),d=u(!1),c=u(U());Y();const _=Z(),o=x({password_new:"",confirm_Password:"",checkList:[]}),b=x({password_new:[{validator:(r,e,s)=>{e===""?s(new Error("Please enter a valide password")):(o.checkList.length!==2&&s(new Error("Your password does not match")),s())},trigger:"blur"}],confirm_Password:[{validator:(r,e,s)=>{e===""?s(new Error("Please input the password again")):e!==o.password_new?s(new Error("Your password does not match")):s()},trigger:"blur"}]}),y=()=>{const{password_new:r}=o,e=X(r);o.checkList=[],e.criteriaMet&&o.checkList.push(c==null?void 0:c.value[0]),e.lengthMet&&o.checkList.push(c==null?void 0:c.value[1])},E=r=>/^[A-Za-z0-9_-]+$/.test(r),F=r=>{const e=r.split(".");if(e.length!==3)return!1;for(const s of e)if(!E(s))return!1;return!0},P=async r=>{r&&await r.validate(async e=>{if(e)try{if(!_.getToken)return p.warning("Invalid link");if(!F(_.getToken))return p.warning("Parameter error");d.value=!0;const s=await K({token:_.getToken||"",password_new:v.SHA256(o.password_new).toString(v.enc.Hex)});d.value=!1,s.code===200?(p.success(s.msg),O("/login")):p.error(s.msg)}catch(s){console.log(s),d.value=!1}})};return(r,e)=>{const s=j,w=A,C=S,B=N,h=$,L=H,V=I,R=D;return f(),g("div",ee,[l(R,null,{default:i(()=>[se,te,t("div",oe,[t("div",re,[ae,t("div",ne,[le,t("div",ie,[ce,t("span",de,[l(s,{to:"/login"},{default:i(()=>[q("Log in")]),_:1})])])]),t("div",pe,[l(L,{model:a(o),class:"space-y-8",ref_key:"ruleFormRef",ref:m,rules:a(b),"label-position":"top","hide-required-asterisk":""},{default:i(()=>[l(h,{label:"Password",prop:"password_new",onInput:y},{default:i(()=>[l(w,{placeholder:"Enter your password",type:"password",modelValue:a(o).password_new,"onUpdate:modelValue":e[0]||(e[0]=n=>a(o).password_new=n),"show-password":"",oncopy:"return false"},{prefix:i(()=>[_e]),_:1},8,["modelValue"]),t("div",ue,[l(B,{modelValue:a(o).checkList,"onUpdate:modelValue":e[1]||(e[1]=n=>a(o).checkList=n)},{default:i(()=>[(f(!0),g(z,null,J(a(c),(n,T)=>(f(),W(C,{label:n,value:n,key:T},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),l(h,{label:"Confirm Password",prop:"confirm_Password"},{default:i(()=>[l(w,{placeholder:"Enter your password",type:"password",modelValue:a(o).confirm_Password,"onUpdate:modelValue":e[2]||(e[2]=n=>a(o).confirm_Password=n),"show-password":"",oncopy:"return false"},{prefix:i(()=>[fe]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),l(V,{style:{height:"45px"},round:!1,bg:"transparent",hoverBg:"transparent",border:"1px solid #ffffffaf",hoverColor:"#FFE099",hoverBgBorder:"1px solid #FFE099","btn-loading":a(d),disabled:a(d),title:"","hover-title":"",onClickHandle:e[3]||(e[3]=n=>("throttle"in r?r.throttle:a(M))(()=>{P(a(m))}))},{default:i(()=>[me]),_:1},8,["btn-loading","disabled"])])])]),_:1})])}}});export{Te as default};
