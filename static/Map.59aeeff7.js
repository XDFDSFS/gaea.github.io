import{d as b,r as p,b9 as g,ab as S,o as x,n as k,O as C,a as E,c as z,b as n,t as I,u as T,I as m,p as M,i as B,j as L}from"./entry.f1ff77fe.js";import{n as D}from"./dashboard.63b2e831.js";import"./dict.2dd6cb65.js";import"./user.07cfa743.js";const O=s=>(M("data-v-2f66fcc6"),s=s(),B(),s),j={class:"w-full h-full min-h-[250px] bg-[#0F0F0F] rounded-lg shadow-3d relative"},F=["id"],N={class:"w-fit absolute right-8 bottom-3 flex items-center space-x-1"},$=O(()=>n("div",{class:"w-3 h-3 bg-[#30b60b] rounded-full glow-effect"},null,-1)),W={class:"text-lg text-white tracking-wider"},A=b({__name:"Map",props:{id:{default:"echartMap"},data:{default:[]}},setup(s){const r=s,{$worldData:h}=m(),v=h,{$eChart:c}=m(),l=p(null),d=p();c.registerMap("world",v);const e=g();S(()=>r.data,()=>{u()},{deep:!0});const u=async()=>{e.value&&e.value.dispose();const t=document.getElementById(r.id);if(!t||t.clientWidth===0||t.clientHeight===0)return;e.value=c.init(t),window.addEventListener("resize",()=>{e.value&&(clearTimeout(l.value),l.value=setTimeout(()=>{e.value.resize()},500))});const i=[],o=[],f=[];r.data&&r.data.forEach(a=>{o.find(w=>a.country===w.name)||o.push({name:a.country,itemStyle:{areaColor:"#866c50",borderColor:"#d9af80"}}),i.push({coords:[[a.longitude,a.latitude],[103.51,1.16]]}),f.push({value:[a.longitude,a.latitude]})});let _={geo:{type:"map",map:"world",zoom:1.2,roam:!0,scaleLimit:{min:1.2,max:3},itemStyle:{areaColor:"rgba(51, 51, 51,1)",borderColor:"rgba(51, 51, 51,1)",borderType:"dotted"},emphasis:{itemStyle:{areaColor:"#866c50"},label:{show:!1,color:"#fff"}},regions:o},series:[{type:"lines",zlevel:2,effect:{color:"#d9af80",show:!0,period:2,trailLength:.4,symbol:"pin",symbolSize:8},lineStyle:{width:1,opacity:1,curveness:.5,color:"rgba(255, 255, 255, 0.4)"},data:i},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:[{value:r.data.length>0?[103.51,1.16]:[]}]},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:f}]};e.value.setOption(_)},y=async()=>{const t=await D();t.code===200&&(d.value=t.data)};return x(async()=>{await k(),u(),y()}),C(()=>{e.value&&(window.removeEventListener("resize",e.value.resize()),clearTimeout(l.value),l.value=null,e.value.dispose(),e.value=null)}),(t,i)=>{var o;return E(),z("div",j,[n("div",{id:t.$props.id,class:"w-full h-full"},null,8,F),n("div",N,[$,n("span",W,"Workers:"+I(((o=T(d))==null?void 0:o.devices_connected)||0),1)])])}}});const q=L(A,[["__scopeId","data-v-2f66fcc6"]]);export{q as default};
