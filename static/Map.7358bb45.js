import{d as g,r as f,b9 as _,ab as S,o as x,n as C,b3 as E,O as k,a as z,c as T,b as r,t as B,u as L,H as p}from"./entry.99aeaaf8.js";import{n as D}from"./dashboard.f8b1dfcf.js";import"./request.49292630.js";import"./user.a1692524.js";const I={class:"w-full h-full min-h-[250px] bg-[#0F0F0F] rounded-lg shadow-3d relative"},M=["id"],O={class:"w-fit absolute right-12 bottom-4 flex items-center space-x-1"},F=r("div",{class:"w-[10px] h-[10px] bg-green-500 rounded-full"},null,-1),N={class:"text-xs text-white"},A=g({__name:"Map",props:{id:{default:"echartMap"},data:{default:[]}},setup(h){const s=h,{$worldData:m}=p(),y=m,{$eChart:l}=p(),i=f(null),c=f();l.registerMap("world",y);const e=_();S(()=>s.data,()=>{d()},{deep:!0});const d=async()=>{e.value!=null&&e.value.dispose();const t=document.getElementById(s.id);if(!t||t.clientWidth===0||t.clientHeight===0){console.error("Chart container has no width or height");return}e.value=l.init(t),window.addEventListener("resize",()=>{e.value&&(clearTimeout(i.value),i.value=setTimeout(()=>{e.value.resize()},500))});const n=[],o=[],u=[];s.data&&s.data.forEach(a=>{o.find(v=>a.country===v.name)||o.push({name:a.country,itemStyle:{areaColor:"#866c50",borderColor:"#d9af80"}}),n.push({coords:[[a.longitude,a.latitude],[103.51,1.16]]}),u.push({value:[a.longitude,a.latitude]})});let b={geo:{type:"map",map:"world",zoom:1.2,roam:!0,scaleLimit:{min:1.2,max:3},itemStyle:{areaColor:"rgba(51, 51, 51,1)",borderColor:"rgba(51, 51, 51,1)",borderType:"dotted"},emphasis:{itemStyle:{areaColor:"#866c50"},label:{show:!1,color:"#fff"}},regions:o},series:[{type:"lines",zlevel:2,effect:{color:"#d9af80",show:!0,period:2,trailLength:.4,symbol:"pin",symbolSize:8},lineStyle:{width:1,opacity:1,curveness:.5,color:"rgba(255, 255, 255, 0.4)"},data:n},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:[{value:s.data.length>0?[103.51,1.16]:[]}]},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:u}]};setTimeout(()=>{e.value.setOption(b)},0)},w=async()=>{const t=await D();t.code===200&&(c.value=t.data)};return x(async()=>{await C(),d(),w()}),E(()=>{window.removeEventListener("resize",e.value.resize())}),k(()=>{e.value&&e.value.dispose()}),(t,n)=>{var o;return z(),T("div",I,[r("div",{id:t.$props.id,class:"w-full h-full"},null,8,M),r("div",O,[F,r("span",N,"Workers:"+B(((o=L(c))==null?void 0:o.devices_all)||0),1)])])}}});export{A as default};
