import{E as V,_ as P,a as H,b as J,c as L}from"./el-select.d069c6bf.js";import{M,b7 as j,d as f,S as $,g as U,o as d,m as _,j as c,r as K,n as F,e as a,aB as G,Z,a1 as q,f as h,H as x,c as b,i,b as p,k as Q,G as W,p as w,K as X,t as ee}from"./entry.8027e681.js";import{z as te}from"./throttle.b222e1dc.js";import{g as ae,d as oe}from"./el-dialog.f971f964.js";import{_ as ne}from"./client-only.4097edae.js";import"./el-popper.3f3bb4c0.js";import"./el-checkbox.227d8c9d.js";import{v as se}from"./el-loading.af8ceaec.js";import{i as T}from"./el-form.0b5c3d34.js";import"./index.1735d320.js";import"./request.7dce2d74.js";import"./user.18e685d3.js";import"./plugin-vueexport-helper.c27b6911.js";const le=M({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:j,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),ie=f({name:"ElText"}),re=f({...ie,props:le,setup(v){const m=v,n=te(),s=$("text"),o=U(()=>[s.b(),s.m(m.type),s.m(n.value),s.is("truncated",m.truncated)]);return(t,S)=>(d(),_(G(t.tag),{class:F(a(o))},{default:c(()=>[K(t.$slots,"default")]),_:3},8,["class"]))}});var ce=Z(re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const pe=q(ce);const de={class:"max-h-[90vh] space-y-5 overflow-hidden flex flex-col"},me=p("span",{class:"text-base font-normal text-white"},"Points record",-1),ue={class:"w-full flex items-center justify-end"},ge={class:"w-1/2"},_e={class:"w-full"},fe={key:0,class:"w-full flex items-center justify-end"},ke=f({__name:"PointRecord",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog"],setup(v,{emit:m}){const n=h([]),s=h(!1),o=x({page:1,limit:10,active:!1}),t=x(JSON.parse(localStorage.getItem("TABLE_DATA_ARR_HISTORY")||JSON.stringify({content:[],totalElements:0}))),S=()=>{const e=new Date,l=new Date(e);l.setDate(e.getDate()-30),n.value=[l.toISOString().split("T")[0],e.toISOString().split("T")[0]]},y=()=>{o.page=1,o.limit=10,t.content=[],t.totalElements=0,n.value=[],m("update:closeDialog")},D=e=>{o.page=e,u()},E=e=>{o.limit=e,u()},A=()=>{S(),t.content=JSON.parse(localStorage.getItem("TABLE_DATA_ARR_HISTORY")||"[]").content,t.totalElements=JSON.parse(localStorage.getItem("TABLE_DATA_ARR_HISTORY")||"[]").totalElements,u()},C=()=>{u()},u=async()=>{try{if(n.value){s.value=!0;const e=await ae(n.value[0],n.value[1],o.page,o.limit);s.value=!1,e&&e&&e.code===200&&(t.content=e.data,t.totalElements=e.total,localStorage.setItem("TABLE_DATA_ARR_HISTORY",JSON.stringify(t.value)))}}catch(e){console.log(e),s.value=!1}};return(e,l)=>{const R=V,k=P,g=H,z=pe,O=J,N=L,Y=oe,B=ne,I=se;return d(),b("div",null,[i(B,null,{default:c(()=>[i(Y,{draggable:"","model-value":e.$props.dialogVisible,"show-close":!1,width:"750px",style:{background:"#121212","border-radius":"10px",padding:"0"},"align-center":"",onClose:y,onOpen:A},{default:c(()=>[p("div",de,[p("div",{class:"flex items-center justify-between"},[me,p("div",{class:"w-5 h-5 bg-[#ffffff52] rounded-full text-center leading-5 text-[#ffffff99] cursor-pointer",onClick:y},"Ã— ")]),p("div",ue,[p("div",ge,[i(R,{modelValue:a(n),"onUpdate:modelValue":l[0]||(l[0]=r=>Q(n)?n.value=r:null),type:"daterange","range-separator":"-","start-placeholder":"Start date",onChange:C,format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","end-placeholder":"End date"},null,8,["modelValue"])])]),p("div",_e,[W((d(),_(O,{data:a(t).content,style:{width:"100%"},"max-height":"400px"},{empty:c(()=>[a(s)?w("",!0):(d(),_(k,{key:0,title:"No records available at the moment"}))]),default:c(()=>[i(g,{prop:"date",label:"date","min-width":"130px",align:"center"}),i(g,{prop:"description",label:"description","min-width":"130px",align:"center"}),i(g,{prop:"points",label:"points","min-width":"130px",align:"center"}),i(g,{prop:"status",label:"status","min-width":"130px",align:"center"},{default:c(r=>[i(z,{type:("integralStatus"in e?e.integralStatus:a(T))(r.row.status).color},{default:c(()=>[X(ee(("integralStatus"in e?e.integralStatus:a(T))(r.row.status).description),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])),[[I,a(s)]])]),a(t).content.length!==0?(d(),b("div",fe,[i(N,{"current-page":a(o).page,"onUpdate:currentPage":l[1]||(l[1]=r=>a(o).page=r),background:"","page-size":a(o).limit,"onUpdate:pageSize":l[2]||(l[2]=r=>a(o).limit=r),"page-sizes":[10,20,50,100],layout:"total, prev, pager, next,sizes",total:a(t).totalElements,onCurrentChange:D,onSizeChange:E},null,8,["current-page","page-size","total"])])):w("",!0)])]),_:1},8,["model-value"])]),_:1})])}}});export{ke as default};
