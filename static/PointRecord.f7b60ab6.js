import{_ as R,E as k,b as B}from"./el-scrollbar.235c0c6a.js";import{d as z}from"./el-pagination.40e059a4.js";import{E as A}from"./el-overlay.5f80fdf5.js";import{_ as V}from"./client-only.dd0e4145.js";import{d as J,r as E,R as v,o as m,q as g,m as s,k as i,b as r,H as L,e,l as h,t as u,B as H,c as U}from"./entry.d79dcbef.js";import"./el-checkbox.380e6c65.js";import"./el-popper.e36806a2.js";import"./el-input.4d6e1bc4.js";import{v as $}from"./el-loading.e37395f8.js";import{t as j}from"./metamask.85dd2e5d.js";import{i as q}from"./dict.ecc13e45.js";import{_ as F}from"./plugin-vueexport-helper.c27b6911.js";import"./event.0e1210c4.js";import"./-vite-browser-externalcommonjs-proxy.0e49e858.js";import"./-initCloneObject.747a8d0d.js";import"./debounce.4c1e0179.js";import"./el-button.2a08037a.js";import"./index.196ce150.js";import"./ethers.32611b0d.js";import"./verification.8fe7d0da.js";import"./godhead.ba479d26.js";import"./validator.70e825c7.js";import"./focus-trap.a852b7ad.js";const G={class:"max-h-[90vh] overflow-hidden flex flex-col mt-5"},K={class:"w-full mt-4"},M={class:"u-line-1"},Q={key:0,class:"w-full flex items-center justify-end mt-4 px-10"},W=J({__name:"PointRecord",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog"],setup(X,{emit:S}){const d=E([]),p=E(!1),o=v({page:1,limit:10,active:!1}),a=v(JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||JSON.stringify({content:[],totalElements:0}))),D=()=>{const t=new Date,l=new Date(t);l.setDate(t.getDate()-30),d.value=[l.toISOString().split("T")[0],t.toISOString().split("T")[0]]},f=()=>{o.page=1,o.limit=10,a.content=[],a.totalElements=0,d.value=[],S("update:closeDialog")},x=t=>{o.page=t,_()},y=t=>{o.limit=t,_()},N=()=>{D(),a.content=JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||"[]").content,a.totalElements=JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||"[]").totalElements,_()},_=async()=>{try{if(d.value){p.value=!0;const t=await j(o.page,o.limit);p.value=!1,t&&t&&t.code===200&&(a.content=t.data,a.totalElements=t.total,localStorage.setItem("TABLE_POINT_RECORD",JSON.stringify({content:t.data,totalElements:t.total})))}}catch{p.value=!1}};return(t,l)=>{const O=R,c=k,T=B,w=z,C=A,I=V,P=$;return m(),g(I,null,{default:s(()=>[i(C,{class:"border-box",draggable:"","model-value":t.$props.dialogVisible,"show-close":!1,width:"750px",style:{background:"rgba(255, 255, 255, 0.08)","backdrop-filter":"blur(15px)",border:"none","border-radius":"10px","padding-bottom":"10px"},"align-center":"",onClose:f,onOpen:N},{default:s(()=>{var b;return[r("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:f}),r("div",G,[r("div",K,[L((m(),g(T,{data:e(a).content,style:{width:"100%"},"max-height":"400px"},{empty:s(()=>[e(p)?h("",!0):(m(),g(O,{key:0,title:"No records available at the moment"}))]),default:s(()=>[i(c,{prop:"date",label:"DATE","min-width":"130px",align:"center"}),i(c,{prop:"description",label:"DESCRIPTION","min-width":"130px",align:"center"},{default:s(n=>[r("span",M,u(n.row.description),1)]),_:1}),i(c,{prop:"points",label:"POINTS","min-width":"130px",align:"center"},{default:s(n=>[r("span",null,u(("formatNum"in t?t.formatNum:e(H))(n.row.points)),1)]),_:1}),i(c,{prop:"status",label:"STATUS","min-width":"130px",align:"center"},{default:s(n=>[r("span",null,u(("integralStatus"in t?t.integralStatus:e(q))(n.row.status).description),1)]),_:1})]),_:1},8,["data"])),[[P,e(p)]])]),((b=e(a).content)==null?void 0:b.length)!==0?(m(),U("div",Q,[i(w,{"current-page":e(o).page,"onUpdate:currentPage":l[0]||(l[0]=n=>e(o).page=n),background:"",size:"small","page-size":e(o).limit,"onUpdate:pageSize":l[1]||(l[1]=n=>e(o).limit=n),"page-sizes":[10,20,50,100],layout:"total, prev, pager, next,sizes",total:e(a).totalElements,onCurrentChange:x,onSizeChange:y},null,8,["current-page","page-size","total"])])):h("",!0)])]}),_:1},8,["model-value"])]),_:1})}}});const St=F(W,[["__scopeId","data-v-a324607c"]]);export{St as default};
