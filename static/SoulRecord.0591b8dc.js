import{_ as N,E as k,a as B}from"./el-scrollbar.5ef469b6.js";import{E as T}from"./el-select.28e240d9.js";import{E as R}from"./el-overlay.d2ee4aec.js";import{_ as A}from"./client-only.66ca7f21.js";import{d as U,r as f,H as E,o as p,B as d,q as s,m as i,b as g,A as V,e as a,l as b,D as P,t as I,c as J}from"./entry.f70eada7.js";import"./el-checkbox.5e4a91f0.js";import"./el-popper.babb7146.js";import"./el-form.050da9ce.js";import{v as $}from"./el-loading.1a5b07d9.js";import{k as j}from"./godhead.407dc4b4.js";import"./event.4aec927b.js";import"./-vite-browser-externalcommonjs-proxy.0e49e858.js";import"./Refresh.080ac90e.js";import"./el-button.2b7f6acd.js";import"./metamask.d6489cb7.js";import"./request.c5f78ceb.js";import"./user.28c2b100.js";import"./godhood.6fe2e3e7.js";import"./focus-trap.c0bd6161.js";const q={class:"max-h-[90vh] overflow-hidden flex flex-col"},H={class:"w-full mt-4"},M={key:0,class:"w-full flex items-center justify-end mt-4 px-10"},de=U({__name:"SoulRecord",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog"],setup(Y,{emit:h}){const x=f([]),n=f(!1),t=E({page:1,page_size:10}),o=E(JSON.parse(localStorage.getItem("TABLE_SOUL_RECORD")||JSON.stringify({content:[],totalElements:0}))),_=()=>{t.page=1,t.page_size=10,o.content=[],o.totalElements=0,h("update:closeDialog")},y=e=>{t.page=e,c()},S=e=>{t.page_size=e,c()},v=async()=>{o.content=JSON.parse(localStorage.getItem("TABLE_SOUL_RECORD")||"[]").content,o.totalElements=JSON.parse(localStorage.getItem("TABLE_SOUL_RECORD")||"[]").totalElements,await c()},c=async()=>{try{if(x.value){n.value=!0;const e=await j(t.page,t.page_size);n.value=!1,e&&e&&e.code===200&&(o.content=e.data,o.totalElements=e.total,localStorage.setItem("TABLE_SOUL_RECORD",JSON.stringify({content:e.data,totalElements:e.total})))}}catch{n.value=!1}};return(e,r)=>{const D=N,m=k,O=B,C=T,w=R,z=A,L=$;return p(),d(z,null,{default:s(()=>[i(w,{class:"border-box",draggable:"","model-value":e.$props.dialogVisible,"show-close":!1,width:"750px",style:{background:"black","border-radius":"10px","padding-bottom":"10px"},"align-center":"",onClose:_,onOpen:v},{default:s(()=>{var u;return[g("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:_}),g("div",q,[g("div",H,[V((p(),d(O,{data:a(o).content,style:{width:"100%"},"max-height":"400px"},{empty:s(()=>[a(n)?b("",!0):(p(),d(D,{key:0,title:"No records available at the moment"}))]),default:s(()=>[i(m,{prop:"created_time",label:"DATE","min-width":"130px",align:"center"}),i(m,{prop:"type",label:"TYPE","min-width":"130px",align:"center"},{default:s(l=>[P(I(l.row.type===1?"checked in":"Mystery Box"),1)]),_:1}),i(m,{prop:"diamond",label:"SOUL POINTS","min-width":"130px",align:"center"})]),_:1},8,["data"])),[[L,a(n)]])]),((u=a(o).content)==null?void 0:u.length)!==0?(p(),J("div",M,[i(C,{"current-page":a(t).page,"onUpdate:currentPage":r[0]||(r[0]=l=>a(t).page=l),background:"",size:"small","page-size":a(t).page_size,"onUpdate:pageSize":r[1]||(r[1]=l=>a(t).page_size=l),"page-sizes":[10,20,50,100],layout:"total, prev, pager, next,sizes",total:a(o).totalElements,onCurrentChange:y,onSizeChange:S},null,8,["current-page","page-size","total"])])):b("",!0)])]}),_:1},8,["model-value"])]),_:1})}}});export{de as default};
