import{_ as z,E as I,a as A}from"./el-scrollbar.27ff8ced.js";import{E as T}from"./el-select.7fc6250c.js";import{E as L}from"./el-overlay.1d4579a3.js";import{_ as V}from"./client-only.c653ec78.js";import{d as J,r as f,H as b,o as m,A as g,m as n,l as s,b as r,z as P,e as l,k as E,t as x,c as R}from"./entry.c83031a7.js";import"./el-checkbox.64c38f81.js";import"./el-popper.366d028b.js";import"./el-input.eddbbf96.js";import{v as X}from"./el-loading.90c2f695.js";import{o as U}from"./godhead.bc5f1c97.js";import"./event.2c073216.js";import"./-vite-browser-externalcommonjs-proxy.0e49e858.js";import"./-initCloneObject.4b6762fc.js";import"./debounce.fd45d794.js";import"./el-button.3d193328.js";import"./validator.36d154ec.js";import"./focus-trap.6b69e0dc.js";import"./isNil.c75b1b34.js";import"./request.2e4904dc.js";import"./user.a968ca00.js";import"./godhood.8bf4bbca.js";const H={class:"max-h-[90vh] overflow-hidden flex flex-col"},$={class:"w-full mt-4"},j={key:0,class:"w-full flex items-center justify-end mt-4 px-10"},gt=J({__name:"BlindboxRecord",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog"],setup(F,{emit:h}){const v=f([]),i=f(!1),o=b({page:1,limit:10}),a=b(JSON.parse(localStorage.getItem("TABLE_BIND_BOX")||JSON.stringify({content:[],totalElements:0}))),u=()=>{o.page=1,o.limit=10,a.content=[],a.totalElements=0,h("update:closeDialog")},B=t=>{o.page=t,c()},w=t=>{o.limit=t,c()},y=()=>{a.content=JSON.parse(localStorage.getItem("TABLE_BIND_BOX")||"[]").content,a.totalElements=JSON.parse(localStorage.getItem("TABLE_BIND_BOX")||"[]").totalElements,c()},c=async()=>{try{if(v.value){i.value=!0;const t=await U(o.page,o.limit);i.value=!1,t&&t&&t.code===200&&(a.content=t.data,a.totalElements=t.total,localStorage.setItem("TABLE_BIND_BOX",JSON.stringify({content:t.data,totalElements:t.total})))}}catch{i.value=!1}};return(t,p)=>{const D=z,d=I,N=A,S=T,O=L,C=V,k=X;return m(),g(C,null,{default:n(()=>[s(O,{class:"border-box",draggable:"","model-value":t.$props.dialogVisible,"show-close":!1,width:"750px",style:{background:"black","border-radius":"10px","padding-bottom":"10px"},"align-center":"",onClose:u,onOpen:y},{default:n(()=>{var _;return[r("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:u}),r("div",H,[r("div",$,[P((m(),g(N,{data:l(a).content,style:{width:"100%"},"max-height":"400px"},{empty:n(()=>[l(i)?E("",!0):(m(),g(D,{key:0,title:"No records available at the moment"}))]),default:n(()=>[s(d,{prop:"updated",label:"DATE","min-width":"130px",align:"center"}),s(d,{prop:"type",label:"TYPE","min-width":"130px",align:"center"},{default:n(e=>[r("span",null,x(e.row.type===1?"GodHood ID":e.row.type===2?"Check-in":e.row.type===3?"Referral":"Event"),1)]),_:1}),s(d,{prop:"usd",label:"REWARD","min-width":"130px",align:"center"},{default:n(e=>[r("span",null,x(e.row.usd.toFixed(0)>0?e.row.usd+" USD":e.row.soul+" Soul"),1)]),_:1})]),_:1},8,["data"])),[[k,l(i)]])]),((_=l(a).content)==null?void 0:_.length)!==0?(m(),R("div",j,[s(S,{"current-page":l(o).page,"onUpdate:currentPage":p[0]||(p[0]=e=>l(o).page=e),background:"",size:"small","page-size":l(o).limit,"onUpdate:pageSize":p[1]||(p[1]=e=>l(o).limit=e),"page-sizes":[10,20,50,100],layout:"total, prev, pager, next,sizes",total:l(a).totalElements,onCurrentChange:B,onSizeChange:w},null,8,["current-page","page-size","total"])])):E("",!0)])]}),_:1},8,["model-value"])]),_:1})}}});export{gt as default};
