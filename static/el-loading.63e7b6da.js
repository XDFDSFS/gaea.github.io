import{b5 as ge,ap as q,b6 as _e,ao as C,au as F,b7 as ye,q as Y,v as Z,az as pe,f as h,Z as Te,d as J,P as he,w as H,e as R,r as we,s as U,Q,H as xe,b8 as Ce,b0 as Se,a_ as Le,ac as I,j as Fe,G as ke,i as Ie,V as Pe,W as Ne,ax as D,av as te,b4 as Ee,k as Re,b9 as Oe,o as Ae,c as Be,b as ne,n as $e,t as Ve}from"./entry.a00f7ed2.js";import{i as Ue}from"./throttle.5b5cbe5e.js";import{_ as De}from"./plugin-vueexport-helper.c27b6911.js";var We=/\s/;function Ke(e){for(var t=e.length;t--&&We.test(e.charAt(t)););return t}var He=/^\s+/;function ze(e){return e&&e.slice(0,Ke(e)+1).replace(He,"")}var se=0/0,Me=/^[-+]0x[0-9a-f]+$/i,je=/^0b[01]+$/i,qe=/^0o[0-7]+$/i,Ge=parseInt;function oe(e){if(typeof e=="number")return e;if(ge(e))return se;if(q(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=q(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ze(e);var n=je.test(e);return n||qe.test(e)?Ge(e.slice(2),n?2:8):Me.test(e)?se:+e}var Ye=function(){return _e.Date.now()};const z=Ye;var Ze="Expected a function",Je=Math.max,Qe=Math.min;function Ct(e,t,n){var s,r,a,i,l,v,m=0,y=!1,b=!1,c=!0;if(typeof e!="function")throw new TypeError(Ze);t=oe(t)||0,q(n)&&(y=!!n.leading,b="maxWait"in n,a=b?Je(oe(n.maxWait)||0,t):a,c="trailing"in n?!!n.trailing:c);function p(d){var _=s,T=r;return s=r=void 0,m=d,i=e.apply(T,_),i}function o(d){return m=d,l=setTimeout(f,t),y?p(d):i}function u(d){var _=d-v,T=d-m,L=t-_;return b?Qe(L,a-T):L}function E(d){var _=d-v,T=d-m;return v===void 0||_>=t||_<0||b&&T>=a}function f(){var d=z();if(E(d))return g(d);l=setTimeout(f,u(d))}function g(d){return l=void 0,c&&s?p(d):(s=r=void 0,i)}function P(){l!==void 0&&clearTimeout(l),m=0,s=v=r=l=void 0}function N(){return l===void 0?i:g(z())}function S(){var d=z(),_=E(d);if(s=arguments,r=this,v=d,_){if(l===void 0)return o(v);if(b)return clearTimeout(l),l=setTimeout(f,t),p(v)}return l===void 0&&(l=setTimeout(f,t)),i}return S.cancel=P,S.flush=N,S}const Xe=(e,t)=>{if(!C)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],s=F(e,n);return["scroll","auto","overlay"].some(r=>s.includes(r))},St=(e,t)=>{if(!C)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Xe(n,t))return n;n=n.parentNode}return n};let O;const Lt=e=>{var t;if(!C)return 0;if(O!==void 0)return O;const n=document.createElement("div");n.className=`${e}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const s=n.offsetWidth;n.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",n.appendChild(r);const a=r.offsetWidth;return(t=n.parentNode)==null||t.removeChild(n),O=s-a,O};function Ft(e,t){if(!C)return;if(!t){e.scrollTop=0;return}const n=[];let s=t.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)n.push(s),s=s.offsetParent;const r=t.offsetTop+n.reduce((v,m)=>v+m.offsetTop,0),a=r+t.offsetHeight,i=e.scrollTop,l=i+e.clientHeight;r<i?e.scrollTop=r:a>l&&(e.scrollTop=a-e.clientHeight)}const kt=e=>["",...ye].includes(e);let k=[];const re=e=>{const t=e;t.key===pe.esc&&k.forEach(n=>n(t))},et=e=>{Y(()=>{k.length===0&&document.addEventListener("keydown",re),C&&k.push(e)}),Z(()=>{k=k.filter(t=>t!==e),k.length===0&&C&&document.removeEventListener("keydown",re)})},M="focus-trap.focus-after-trapped",j="focus-trap.focus-after-released",tt="focus-trap.focusout-prevented",ae={cancelable:!0,bubbles:!1},nt={cancelable:!0,bubbles:!1},ce="focusAfterTrapped",ie="focusAfterReleased",st=Symbol("elFocusTrap"),X=h(),W=h(0),ee=h(0);let A=0;const be=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},le=(e,t)=>{for(const n of e)if(!ot(n,t))return n},ot=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},rt=e=>{const t=be(e),n=le(t,e),s=le(t.reverse(),e);return[n,s]},at=e=>e instanceof HTMLInputElement&&"select"in e,x=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),ee.value=window.performance.now(),e!==n&&at(e)&&t&&e.select()}};function ue(e,t){const n=[...e],s=e.indexOf(t);return s!==-1&&n.splice(s,1),n}const ct=()=>{let e=[];return{push:s=>{const r=e[0];r&&s!==r&&r.pause(),e=ue(e,s),e.unshift(s)},remove:s=>{var r,a;e=ue(e,s),(a=(r=e[0])==null?void 0:r.resume)==null||a.call(r)}}},it=(e,t=!1)=>{const n=document.activeElement;for(const s of e)if(x(s,t),document.activeElement!==n)return},de=ct(),lt=()=>W.value>ee.value,B=()=>{X.value="pointer",W.value=window.performance.now()},fe=()=>{X.value="keyboard",W.value=window.performance.now()},ut=()=>(Y(()=>{A===0&&(document.addEventListener("mousedown",B),document.addEventListener("touchstart",B),document.addEventListener("keydown",fe)),A++}),Z(()=>{A--,A<=0&&(document.removeEventListener("mousedown",B),document.removeEventListener("touchstart",B),document.removeEventListener("keydown",fe))}),{focusReason:X,lastUserFocusTimestamp:W,lastAutomatedFocusTimestamp:ee}),$=e=>new CustomEvent(tt,{...nt,detail:e}),dt=J({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ce,ie,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=h();let s,r;const{focusReason:a}=ut();et(o=>{e.trapped&&!i.paused&&t("release-requested",o)});const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},l=o=>{if(!e.loop&&!e.trapped||i.paused)return;const{key:u,altKey:E,ctrlKey:f,metaKey:g,currentTarget:P,shiftKey:N}=o,{loop:S}=e,d=u===pe.tab&&!E&&!f&&!g,_=document.activeElement;if(d&&_){const T=P,[L,K]=rt(T);if(L&&K){if(!N&&_===K){const w=$({focusReason:a.value});t("focusout-prevented",w),w.defaultPrevented||(o.preventDefault(),S&&x(L,!0))}else if(N&&[L,T].includes(_)){const w=$({focusReason:a.value});t("focusout-prevented",w),w.defaultPrevented||(o.preventDefault(),S&&x(K,!0))}}else if(_===T){const w=$({focusReason:a.value});t("focusout-prevented",w),w.defaultPrevented||o.preventDefault()}}};he(st,{focusTrapRef:n,onKeydown:l}),H(()=>e.focusTrapEl,o=>{o&&(n.value=o)},{immediate:!0}),H([n],([o],[u])=>{o&&(o.addEventListener("keydown",l),o.addEventListener("focusin",y),o.addEventListener("focusout",b)),u&&(u.removeEventListener("keydown",l),u.removeEventListener("focusin",y),u.removeEventListener("focusout",b))});const v=o=>{t(ce,o)},m=o=>t(ie,o),y=o=>{const u=R(n);if(!u)return;const E=o.target,f=o.relatedTarget,g=E&&u.contains(E);e.trapped||f&&u.contains(f)||(s=f),g&&t("focusin",o),!i.paused&&e.trapped&&(g?r=E:x(r,!0))},b=o=>{const u=R(n);if(!(i.paused||!u))if(e.trapped){const E=o.relatedTarget;!Ue(E)&&!u.contains(E)&&setTimeout(()=>{if(!i.paused&&e.trapped){const f=$({focusReason:a.value});t("focusout-prevented",f),f.defaultPrevented||x(r,!0)}},0)}else{const E=o.target;E&&u.contains(E)||t("focusout",o)}};async function c(){await U();const o=R(n);if(o){de.push(i);const u=o.contains(document.activeElement)?s:document.activeElement;if(s=u,!o.contains(u)){const f=new Event(M,ae);o.addEventListener(M,v),o.dispatchEvent(f),f.defaultPrevented||U(()=>{let g=e.focusStartEl;Q(g)||(x(g),document.activeElement!==g&&(g="first")),g==="first"&&it(be(o),!0),(document.activeElement===u||g==="container")&&x(o)})}}}function p(){const o=R(n);if(o){o.removeEventListener(M,v);const u=new CustomEvent(j,{...ae,detail:{focusReason:a.value}});o.addEventListener(j,m),o.dispatchEvent(u),!u.defaultPrevented&&(a.value=="keyboard"||!lt()||o.contains(document.activeElement))&&x(s??document.body),o.removeEventListener(j,m),de.remove(i)}}return Y(()=>{e.trapped&&c(),H(()=>e.trapped,o=>{o?c():p()})}),Z(()=>{e.trapped&&p()}),{onKeydown:l}}});function ft(e,t,n,s,r,a){return we(e.$slots,"default",{handleKeydown:e.onKeydown})}var It=Te(dt,[["render",ft],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);function vt(e){let t;const n=h(!1),s=xe({...e,originalPosition:"",originalOverflow:"",visible:!1});function r(c){s.text=c}function a(){const c=s.parent,p=b.ns;if(!c.vLoadingAddClassList){let o=c.getAttribute("loading-number");o=Number.parseInt(o)-1,o?c.setAttribute("loading-number",o.toString()):(D(c,p.bm("parent","relative")),c.removeAttribute("loading-number")),D(c,p.bm("parent","hidden"))}i(),y.unmount()}function i(){var c,p;(p=(c=b.$el)==null?void 0:c.parentNode)==null||p.removeChild(b.$el)}function l(){var c;e.beforeClose&&!e.beforeClose()||(n.value=!0,clearTimeout(t),t=window.setTimeout(v,400),s.visible=!1,(c=e.closed)==null||c.call(e))}function v(){if(!n.value)return;const c=s.parent;n.value=!1,c.vLoadingAddClassList=void 0,a()}const y=Ce(J({name:"ElLoading",setup(c,{expose:p}){const{ns:o,zIndex:u}=Le("loading");return p({ns:o,zIndex:u}),()=>{const E=s.spinner||s.svg,f=I("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...E?{innerHTML:E}:{}},[I("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),g=s.text?I("p",{class:o.b("text")},[s.text]):void 0;return I(Ne,{name:o.b("fade"),onAfterLeave:v},{default:Fe(()=>[ke(Ie("div",{style:{backgroundColor:s.background||""},class:[o.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[I("div",{class:o.b("spinner")},[f,g])]),[[Pe,s.visible]])])})}}})),b=y.mount(document.createElement("div"));return{...Se(s),setText:r,removeElLoadingChild:i,close:l,handleAfterLeave:v,vm:b,get $el(){return b.$el}}}let V;const mt=function(e={}){if(!C)return;const t=pt(e);if(t.fullscreen&&V)return V;const n=vt({...t,closed:()=>{var r;(r=t.closed)==null||r.call(t),t.fullscreen&&(V=void 0)}});Et(t,t.parent,n),ve(t,t.parent,n),t.parent.vLoadingAddClassList=()=>ve(t,t.parent,n);let s=t.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",t.parent.setAttribute("loading-number",s),t.parent.appendChild(n.$el),U(()=>n.visible.value=t.visible),t.fullscreen&&(V=n),n},pt=e=>{var t,n,s,r;let a;return Q(e.target)?a=(t=document.querySelector(e.target))!=null?t:document.body:a=e.target||document.body,{parent:a===document.body||e.body?document.body:a,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:a===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(s=e.lock)!=null?s:!1,customClass:e.customClass||"",visible:(r=e.visible)!=null?r:!0,target:a}},Et=async(e,t,n)=>{const{nextZIndex:s}=n.vm.zIndex||n.vm._.exposed.zIndex,r={};if(e.fullscreen)n.originalPosition.value=F(document.body,"position"),n.originalOverflow.value=F(document.body,"overflow"),r.zIndex=s();else if(e.parent===document.body){n.originalPosition.value=F(document.body,"position"),await U();for(const a of["top","left"]){const i=a==="top"?"scrollTop":"scrollLeft";r[a]=`${e.target.getBoundingClientRect()[a]+document.body[i]+document.documentElement[i]-Number.parseInt(F(document.body,`margin-${a}`),10)}px`}for(const a of["height","width"])r[a]=`${e.target.getBoundingClientRect()[a]}px`}else n.originalPosition.value=F(t,"position");for(const[a,i]of Object.entries(r))n.$el.style[a]=i},ve=(e,t,n)=>{const s=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?D(t,s.bm("parent","relative")):te(t,s.bm("parent","relative")),e.fullscreen&&e.lock?te(t,s.bm("parent","hidden")):D(t,s.bm("parent","hidden"))},G=Symbol("ElLoading"),me=(e,t)=>{var n,s,r,a;const i=t.instance,l=c=>Ee(t.value)?t.value[c]:void 0,v=c=>{const p=Q(c)&&(i==null?void 0:i[c])||c;return p&&h(p)},m=c=>v(l(c)||e.getAttribute(`element-loading-${Oe(c)}`)),y=(n=l("fullscreen"))!=null?n:t.modifiers.fullscreen,b={text:m("text"),svg:m("svg"),svgViewBox:m("svgViewBox"),spinner:m("spinner"),background:m("background"),customClass:m("customClass"),fullscreen:y,target:(s=l("target"))!=null?s:y?void 0:e,body:(r=l("body"))!=null?r:t.modifiers.body,lock:(a=l("lock"))!=null?a:t.modifiers.lock};e[G]={options:b,instance:mt(b)}},bt=(e,t)=>{for(const n of Object.keys(t))Re(t[n])&&(t[n].value=e[n])},Pt={mounted(e,t){t.value&&me(e,t)},updated(e,t){const n=e[G];t.oldValue!==t.value&&(t.value&&!t.oldValue?me(e,t):t.value&&t.oldValue?Ee(t.value)&&bt(t.value,n.options):n==null||n.instance.close())},unmounted(e){var t;(t=e[G])==null||t.instance.close()}},gt={class:"relative"},_t={class:"text-[#6E6E6E] absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 scale-[0.5] text-sm z-50"},yt=J({__name:"Refresh",emits:["toRefresh"],setup(e,{emit:t}){const n=h(!1),s=h(0),r=h(!1),a=()=>{if(r.value)return;n.value=!0,t("toRefresh"),r.value=!0,s.value=60;const i=setInterval(()=>{s.value--,s.value<=0&&(clearInterval(i),r.value=!1,n.value=!1)},1e3);setTimeout(()=>{n.value=!1},500)};return(i,l)=>(Ae(),Be("div",gt,[ne("span",{class:$e(["text-lg",["iconfont","icon-shuaxin","text-[#6E6E6E]","cursor-pointer","rotate-icon",{rotate:n.value}]]),onClick:a},null,2),ne("span",_t,Ve(s.value>0?s.value:""),1)]))}});const Nt=De(yt,[["__scopeId","data-v-7670df7a"]]);export{It as E,st as F,Nt as _,St as a,Ct as d,Lt as g,kt as i,Ft as s,Pt as v};
