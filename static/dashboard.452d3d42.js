import{E as oe,_ as ve,t as we}from"./throttle.b222e1dc.js";import{_ as ne}from"./plugin-vueexport-helper.c27b6911.js";import{o as w,c as k,r as le,b as e,d as M,f as S,g as F,w as j,t as L,e as n,n as W,h as be,i as y,j as A,k as q,E as B,u as ye,l as ie,m as U,p as J,q as V,s as Y,v as re,x as Z,y as H,z as $e,A as Se,B as De,C as ke,D as Q,F as Ce,G as ce,H as ee,I as Te,J as te,K as Ne}from"./entry.8027e681.js";import{E as Ie}from"./el-popper.3f3bb4c0.js";import{E as Ee,_ as de,a as Pe,b as Ae,c as ze}from"./el-select.d069c6bf.js";import{u as X}from"./user.18e685d3.js";import{n as ue,_ as Le,a as Me,e as Re,d as Oe,b as Fe}from"./bi.87c5abf0.js";import{_ as G,d as je,v as fe}from"./el-loading.af8ceaec.js";import{_ as Be}from"./client-only.4097edae.js";import"./el-checkbox.227d8c9d.js";import{n as se}from"./ping.d935a1d6.js";import"./index.1735d320.js";import"./request.7dce2d74.js";import"./referral.f06d4f93.js";import"./Fingerprinter.7c99fa82.js";const Ue={},Ve={class:"flex flex-col items-center justify-center"},Ye=e("span",{class:"iconfont icon-wifi text-[#333] text-5xl font-bold"},null,-1),Je=e("span",{class:"text-base text-[#ffffffcc]"},"Network Connection",-1),We=e("span",{class:"mb-5 mt-1 text-sm font-normal text-[#8c866f]"},"Connect to the network to start earning",-1);function He(u,t){return w(),k("div",Ve,[Ye,Je,We,le(u.$slots,"default")])}const Ge=ne(Ue,[["render",He]]),Ke=""+globalThis.__publicAssetsURL("images/dashboard/equipment.png"),qe={class:"flex flex-col space-y-2"},Qe={class:"flex items-center px-5 space-x-10"},Xe=e("span",{class:"iconfont icon-wifi text-[#30b60b] text-5xl font-bold"},null,-1),Ze={class:"text-[#d9af80]"},et={class:"text-4xl font-bold"},tt=e("span",{class:"text-xs"},"%",-1),st={class:"flex items-center space-x-5 text-white"},at=e("span",{class:"text-[#DCDCDC]"},"Network Score",-1),ot={class:"flex items-center space-x-5 text-white"},nt=e("img",{src:Ke,alt:"",class:"w-10 h-10"},null,-1),lt={class:"text-white space-x-1 text-center"},it=e("span",{class:"text-base font-bold"},"IP:",-1),rt={class:"text-base font-normal u-line-1"},ct=M({__name:"NetworkPing",props:{data:{default:[]}},setup(u){const t=u,f=X(),l=f.getUuidv4,a=S(!0),c=F(()=>t.data.find(p=>p.browser_id===l)||t.data[0]||{}),x=S("");j(()=>c.value,p=>{x.value=p.name||""},{immediate:!0});const m=()=>{a.value=!a.value},d=async()=>{const p=await ue({uid:f.getUserInfo.uid,name:x.value,browser_id:f.getUuidv4});a.value=!0,p&&p.code===200&&B.success(p.data)};return(p,h)=>{var C;const i=oe,o=Ie;return w(),k("div",qe,[e("div",Qe,[Xe,e("div",Ze,[e("span",et,L(((C=n(f).getPingInfo)==null?void 0:C.score)||n(c).ip_score||0),1),tt])]),e("div",st,[le(p.$slots,"default"),at]),e("div",ot,[e("div",{class:W(["max-w-[55%] p-1 h-6 rounded border border-[#303035] flex items-center justify-between el-input-no-border duration-500",n(a)?"text-[#333]":"text-white border-white"]),style:be({"caret-color":n(a)?"transparent":"white"})},[y(i,{class:"w-full h-6",modelValue:n(x),"onUpdate:modelValue":h[0]||(h[0]=N=>q(x)?x.value=N:null),disabled:n(a),onBlur:d},{suffix:A(()=>[e("span",{class:W(["iconfont icon-edit text-xs cursor-pointer leading-[12px] hover:text-white",n(a)?"text-[#333]":"text-white border-white"]),onClick:m},null,2)]),_:1},8,["modelValue","disabled"])],6),nt]),e("div",lt,[it,y(o,{class:"box-item",effect:"dark",content:`IP: ${n(c).ip_address}`,placement:"top"},{default:A(()=>[e("span",rt,L(n(c).ip_address),1)]),_:1},8,["content"])])])}}}),dt=""+globalThis.__publicAssetsURL("images/dashboard/extension.png"),ut=""+globalThis.__publicAssetsURL("images/dashboard/desktopApp.png"),ft={class:"w-full rounded-lg grid grid-cols-2 gap-2"},pt=e("div",{class:"w-10 h-10 rounded-lg"},[e("img",{src:dt,alt:"",class:"w-full h-full object-contain"})],-1),mt=e("div",{class:"flex flex-col items-center text-white text-xs lg:text-sm xl:text-sm md:text-sm sm:text-xs font-medium"},[e("span",{class:"u-line-1"},"Gaea Extension"),e("span",null,"1.2x Rewards")],-1),_t=[pt,mt],ht=ie('<div class="h-full bg-[#ffffff0f] rounded-lg shadow-3d flex justify-center space-x-5 py-4 px-2 cursor-not-allowed"><div class="w-10 h-10 rounded-lg"><img src="'+ut+'" alt="" class="w-full h-full object-contain"></div><div class="flex flex-col items-center text-[#747576] text-xs lg:text-sm xl:text-sm md:text-sm sm:text-xs font-medium"><span class="u-line-1">Gaea Desktop App</span><span>1.4x Rewards</span></div></div>',1),gt=M({__name:"RewardCategory",setup(u){ye();const t=()=>{window.open("https://chromewebstore.google.com/detail/gaea-extension/cpjicfogbgognnifjgmenmaldnmeeeib","_blank")};return(f,l)=>(w(),k("div",ft,[e("div",{class:"h-full bg-[#ffffff0f] rounded-lg shadow-3d flex items-center justify-center space-x-5 py-4 px-2 cursor-pointer transition-transform duration-200 hover:scale-[1.01]",onClick:t},_t),ht]))}}),xt={class:"w-full flex-1 flex flex-col items-center py-4 justify-center bg-[#ffffff0f] rounded-lg space-y-2 shadow-3d relative"},vt={class:"w-full text-[#747576] text-sm font-medium text-center"},wt={class:"absolute right-2 bottom-2"},bt={class:"flex items-center space-x-3"},yt=e("img",{src:Le,alt:"",class:"w-10 h-10"},null,-1),$t={class:"flex-1 text-2xl text-white"},St=M({__name:"EarnInfoCard",props:{num:{default:0},icon:{default:"today"},title:{default:"Today's Points"}},emits:["toUpdate"],setup(u,{emit:t}){const f=u;return(l,a)=>{const c=G;return w(),k("div",xt,[e("div",vt,L(f.title),1),e("div",wt,[f.title==="Total's Points"?(w(),U(c,{key:0,onToRefresh:a[0]||(a[0]=x=>t("toUpdate"))})):J("",!0)]),e("div",bt,[yt,e("span",$t,L(f.num),1)])])}}});let O=null;const ae=(u,t=500,f=!1)=>{if(O!==null&&clearTimeout(O),f){const l=!O;O=setTimeout(function(){O=null},t),l&&typeof u=="function"&&u()}else O=setTimeout(function(){typeof u=="function"&&u()},t)},pe=u=>($e("data-v-f2e8dacf"),u=u(),Se(),u),Dt={class:"w-full h-full min-h-[250px] bg-[#0F0F0F] rounded-lg shadow-3d relative"},kt=["id"],Ct=pe(()=>e("div",{class:"w-3 h-3 bg-[#30b60b] rounded-full glow-effect"},null,-1)),Tt=pe(()=>e("span",{class:"text-[#747576] text-sm leading-[14px]"},"Workers: ",-1)),Nt={class:"text-[#747576] text-base leading-4"},It={class:"absolute right-2 bottom-2"},Et=M({__name:"Map",props:{id:{default:"echartMap"},data:{default:()=>[]}},setup(u){const t=u,{$eChart:f}=H(),{$worldData:l}=H(),a=l;f.registerMap("world",a);const c=S(),x=S(!0),m=S(null),d=S(JSON.parse(localStorage.getItem("NETWORK_INFO_LIST")||"{}")),p=g=>{const $=new Map,T=new Set,P=new Set;for(let r=0;r<g.length;r++){const _=g[r];$.has(_.country)||$.set(_.country,{name:_.country,itemStyle:{areaColor:"#866c50",borderColor:"#d9af80"}}),T.add(JSON.stringify({coords:[[_.longitude,_.latitude],[103.51,1.16]]})),P.add(JSON.stringify([_.longitude,_.latitude]))}const b=Array.from(T).map(r=>JSON.parse(r)),s=Array.from(P).map(r=>({value:JSON.parse(r)}));return{regionsData:Array.from($.values()),linesData:b,effectScatterEnd:s}},h=F(()=>p(t.data)),i=g=>({type:"lines",zlevel:2,effect:{color:"#d9af80",show:!0,period:2,trailLength:.4,symbol:"pin",symbolSize:8},lineStyle:{width:1,opacity:1,curveness:.5,color:"rgba(255, 255, 255, 0.4)"},data:g}),o=g=>({type:"effectScatter",coordinateSystem:"geo",zlevel:1,showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:g}),C=async()=>{c.value&&(c.value.dispose(),c.value=null);const g=document.getElementById(t.id);if(!g||g.clientWidth===0||g.clientHeight===0)return;c.value=f.init(g);const{regionsData:$,linesData:T,effectScatterEnd:P}=h.value,b={animation:!1,progressive:500,progressiveThreshold:3e3,geo:{type:"map",map:"world",zoom:1.2,roam:!0,scaleLimit:{min:1.2,max:3},itemStyle:{areaColor:"rgba(51, 51, 51,1)",borderColor:"rgba(51, 51, 51,1)",borderType:"dotted"},emphasis:{itemStyle:{areaColor:"#866c50"},label:{show:!1,color:"#fff"}},regions:$},series:[i(T),o([t.data.length>0?[103.51,1.16]:[]]),o(P)]};c.value.setOption(b)};j(()=>t.data,()=>{x.value&&ae(C,300)},{deep:!0});const N=async()=>{try{const g=await Me();g&&g.code===200&&(d.value=g.data,localStorage.setItem("NETWORK_INFO_LIST",JSON.stringify(g.data)))}catch(g){console.error("error:",g)}},E=()=>{c.value&&c.value.resize()},D=()=>{c.value&&ae(E(),300)};return V(async()=>{x.value=!0,await Y(),N(),C(),window.addEventListener("resize",D)}),re(()=>{x.value=!1,c.value&&(c.value.dispose(),c.value=null),m.value&&clearTimeout(m.value),window.removeEventListener("resize",D)}),(g,$)=>{const T=Be,P=G;return w(),k("div",Dt,[e("div",{id:g.id,class:"w-full h-full"},null,8,kt),$[0]||(Z(-1),$[0]=e("div",{class:"w-fit absolute left-5 bottom-3 flex items-center space-x-2"},[Ct,Tt,y(T,null,{default:A(()=>{var b;return[e("span",Nt,L(((b=n(d))==null?void 0:b.devices_connected)||0),1)]}),_:1})]),Z(1),$[0]),e("div",It,[y(P,{onToRefresh:$[1]||($[1]=b=>N())})])])}}});const Pt=ne(Et,[["__scopeId","data-v-f2e8dacf"]]),At=De("theme",()=>{const u=S("light"),t=F(()=>u.value);return{theme:u,getTheme:t,setTheme:l=>{u.value=l}}},{persist:[{paths:["theme"],storage:ke.cookiesWithOptions({maxAge:604800})}]}),zt={class:"w-full h-full min-h-[400px]"},Lt=["id"],Mt=M({__name:"bar",props:{id:{default:""},data:{default:()=>[]}},setup(u){const t=u,{$eChart:f}=H(),l=At(),a=Q(),c=S({light:["#866c50","#d9af80"],dark:["#866c50","#d9af80"]}),x=F(()=>l.getTheme==="dark"?c.value.dark:c.value.light),m=F(()=>{const h=t.data.map(D=>new Date(D.date).getDate()),i=[{name:"Network Earnings",data:t.data.map(D=>D.network_points)},{name:"Referrals",data:t.data.map(D=>D.referral_points)}],o=t.data.map(D=>D.network_points+D.referral_points),C=Math.ceil(Math.max(...o)*1.1),N=Math.ceil(Math.min(...o.filter(D=>D>0))/1.5),E=Math.ceil((C-N)/5);return{xData:h,yData:i,maxYValue:C,minYValue:N,interval:E}}),d=()=>{a.value&&a.value.dispose();const h=document.getElementById(t.id);if(!h||h.clientWidth===0||h.clientHeight===0)return;a.value=f.init(h);const{xData:i,yData:o,maxYValue:C,minYValue:N,interval:E}=m.value,D=h.clientWidth,g=t.data.length,$=Math.max(10,Math.min(30,D/(g*2.5))),T=o.map((b,s)=>({name:b.name,data:b.data.map(r=>({value:r,itemStyle:{}})),type:"bar",stack:"total",barWidth:$,z:o.length-s})),P={color:x.value,series:T,yAxis:[{type:"value",max:C,min:N,interval:E,splitNumber:5,splitLine:{show:!0,lineStyle:{color:"#2D2B24"}},axisLabel:{show:!0,fontSize:16}}],grid:{top:"5%",left:"1%",right:"1%",bottom:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:i,axisLine:{lineStyle:{color:"#8C866F"},show:!0},axisLabel:{show:!0,fontSize:16,interval:0},axisTick:{show:!1}},tooltip:{trigger:"axis",formatter:b=>{const s=b.reverse();let r=0;const _=new Date(t.data[b[0].dataIndex].date),z=`${_.getFullYear()}/${String(_.getMonth()+1).padStart(2,"0")}/${String(_.getDate()).padStart(2,"0")}`,R=s.map(I=>(r+=Number(I.value)||0,`
           <div class="flex items-center justify-between mt-2 ">
             <div class="flex items-center space-x-1">
               <span class="w-3 h-3 rounded-full" style="background-color: ${I.color};"></span>
               <span>${I.seriesName}</span>
             </div>
             <span>${typeof I.value=="number"?I.value.toFixed(2):I.value}</span>
           </div>`)).join("");return`
         <div class="bg-[#2D2F2F] rounded-lg text-white text-xs ">
           <div class="flex items-center  pb-2 space-x-32">
             <span>${z}</span>
           </div>
           <div class="flex items-center justify-between border-b border-[#ffffff0f] pb-2 space-x-32">
             <span>total:</span>
             <span class="text-[#fff]">${typeof r=="number"?r.toFixed(2):r}</span>
           </div>${R}
         </div>`},axisPointer:{type:"line"},textStyle:{color:"#FFFFFF"},borderColor:"transparent",backgroundColor:"#2D2F2F"}};for(let b=0;b<T[0].data.length;b++){let s=!0;for(let r=T.length-1;r>=0;r--)T[r].data[b].value!==0&&(s?(T[r].data[b].itemStyle={borderRadius:[4,4,0,0]},s=!1):T[r].data[b].itemStyle={borderRadius:[0,0,0,0]})}a.value.setOption(P)};j(()=>l.getTheme,d),j(()=>t.data,d,{deep:!0});const p=je(()=>{a.value&&(a.value.resize(),d())},300);return V(()=>{Y(()=>{d(),window.addEventListener("resize",p)})}),Ce(()=>{a.value&&(window.removeEventListener("resize",p),a.value.dispose())}),(h,i)=>(w(),k("div",zt,[e("div",{id:t.id,class:"w-full h-full"},null,8,Lt)]))}}),me=""+globalThis.__publicAssetsURL("images/dashboard/statistical_table.png"),Rt={class:"w-full flex-1 flex flex-col rounded-lg p-5 space-y-5 bg-[#ffffff0f]"},Ot={class:"flex items-center justify-between flex-wrap"},Ft=e("div",{class:"flex items-center space-x-2"},[e("img",{src:me,class:"w-10 h-10",alt:""}),e("span",{class:"text-base text-[#ffffffcc]"},"Earnings Statistics")],-1),jt={class:"flex items-center space-x-2"},Bt=ie('<div class="w-full flex items-center space-x-7 text-white text-sm font-normal"><div class="flex items-center space-x-1"><div class="w-3 h-3 bg-[#866c50] rounded-full"></div><span>Network Earnings</span></div><div class="flex items-center space-x-1"><div class="w-3 h-3 bg-[#d9af80] rounded-full"></div><span>Referrals</span></div></div>',1),Ut={class:"w-full flex-1 min-h-[400px] bg-black p-2 rounded-lg"},Vt=M({__name:"EarningsStatistics",setup(u){const t=new Date,f=new Date(t);f.setDate(t.getDate()-7);const l=S(!1),a=S([f.toISOString().split("T")[0],t.toISOString().split("T")[0]]),c=S(JSON.parse(localStorage.getItem("DAILY_STATISTIC")||"[]")),x=()=>{const[d,p]=a.value;if(d&&p){const h=new Date(d);if((new Date(p).getTime()-h.getTime())/(1e3*60*60*24)>30){B.warning("Please select a date range of no more than 30 days."),a.value=[d,d];return}m()}},m=async()=>{try{if(l.value=!0,a.value){const d=await Re(a.value[0],a.value[1]);d&&d.code===200&&(c.value=d.data,localStorage.setItem("DAILY_STATISTIC",JSON.stringify(d.data)))}}catch(d){console.log(d)}finally{l.value=!1}};return V(async()=>{await Y(),m()}),(d,p)=>{const h=Ee,i=G,o=Mt,C=de,N=fe;return ce((w(),k("div",Rt,[e("div",Ot,[Ft,e("div",jt,[y(h,{modelValue:n(a),"onUpdate:modelValue":p[0]||(p[0]=E=>q(a)?a.value=E:null),type:"daterange","range-separator":"-","start-placeholder":"Start date","end-placeholder":"End date",onChange:x,format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"]),y(i,{onToRefresh:p[1]||(p[1]=E=>m())})])]),Bt,e("div",Ut,[n(c).length!==0?(w(),U(o,{key:0,id:"earningsStatistics",data:n(c)},null,8,["data"])):(w(),U(C,{key:1,title:"No data available at the moment"}))])])),[[N,n(l)]])}}}),Yt=["id"],Jt=M({__name:"ProgressBar",props:{id:{default:""},data:{default:()=>({points:0})},maxPoints:{default:200}},setup(u){const t=u,{$eChart:f}=H(),l=Q(),a=S(null),c=async()=>{l.value&&l.value.dispose();const m=document.getElementById(t.id);if(!m||m.clientWidth===0||m.clientHeight===0)return;l.value=f.init(m);const d=30,p=t.maxPoints===0?100:Math.ceil(t.maxPoints/100)*100,h=t.data.points===0?.01:t.data.points,i={backgroundColor:"black",grid:{top:"1%",left:"1%",right:"1%",bottom:"1%",containLabel:!0},xAxis:{type:"value",min:0,max:p,interval:25,splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},yAxis:[{data:[""],axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}}],series:[{type:"bar",barWidth:d,itemStyle:{color:"#d9af80",shadowBlur:4,shadowColor:"none"},data:[h],z:1,animationEasing:"elasticOut"},{type:"pictorialBar",symbolRepeat:"fixed",symbolMargin:"20%",symbol:"rect",symbolSize:[6,d],itemStyle:{color:"#0B0B0B"},data:[h],z:0,animationEasing:"elasticOut"},{type:"pictorialBar",itemStyle:{color:"#000"},symbolRepeat:"fixed",symbolMargin:4,symbol:"rect",symbolClip:!0,symbolSize:[2,d],symbolPosition:"start",data:[h],z:2,animationEasing:"elasticOut"}]};l.value.setOption(i)};j(()=>t.data,c,{deep:!0});const x=()=>{l.value&&(a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{l.value.resize()},300))};return V(async()=>{await Y(),setTimeout(c,500),window.addEventListener("resize",x)}),re(()=>{l.value&&(window.removeEventListener("resize",x),l.value.dispose()),a.value&&clearTimeout(a.value)}),(m,d)=>(w(),k("div",{id:m.id,class:"w-full h-full"},null,8,Yt))}}),Wt=u=>{const t=Math.floor(u/86400),f=u%(24*60*60),l=Math.floor(f/(60*60)),a=f%(60*60),c=Math.floor(a/60);return`${t} day${t!==1?"s":""}, ${l} hr, ${c} min${c!==1?"s":""}`},Ht={class:"w-full flex flex-col rounded-lg bg-[#ffffff0f] p-5 space-y-5"},Gt={class:"flex items-center justify-between pl-3"},Kt=e("div",{class:"flex items-center space-x-2"},[e("img",{src:me,class:"w-10 h-10",alt:""}),e("span",{class:"text-base text-[#ffffffcc]"},"Your Networks")],-1),qt={class:"w-full"},Qt={class:"w-full flex items-center justify-between space-x-1 text-white"},Xt={class:"w-[130px]"},Zt={key:0,class:"flex items-center space-x-2 text-[#d9af80]"},es={key:0,class:"w-4 h-4 relative flex items-center justify-center"},ts=e("span",{class:"text-[17px] iconfont icon-logo-chrome"},null,-1),ss={key:0,class:"text-[12px] iconfont icon-touxiang absolute -right-[4px] -top-2"},as={key:1,class:"w-4 h-4 relative flex items-center justify-center"},os=e("span",{class:"text-[16px] iconfont icon-wangyehttps"},null,-1),ns={key:0,class:"text-[12px] iconfont icon-touxiang absolute -right-[4px] -top-2"},ls=e("span",{class:"text-sm font-normal text-[#d9af80]"}," Connected ",-1),is={key:1,class:"flex items-center space-x-2"},rs=e("div",{class:"w-4 h-4 border border-[#4E4A3C] rounded-full"},null,-1),cs=e("span",{class:"text-sm font-normal text-[#8C866F]"}," Disconnected ",-1),ds=[rs,cs],us={class:"flex-1 h-8"},fs=["onClick"],ps=e("div",{class:"w-[14px] h-[14px] bg-[#d9af80] rounded-full flex items-center justify-center"},[e("span",{class:"iconfont icon-tick text-base text-black font-bold"})],-1),ms={class:"flex-1 h-6 flex items-center u-line-1"},_s=e("span",{class:"iconfont icon-edit text-xs text-[#606266]"},null,-1),hs={class:"flex space-x-2 pl-2"},gs={class:"w-5 h-4"},xs=["src"],vs={class:"flex-1 text-sm font-normal text-[#999999] text-left"},ws={key:0,class:"w-full flex items-center justify-end"},bs=M({__name:"YourNetworks",props:{refresh:{default:0}},emits:["update:updateData"],setup(u,{emit:t}){const f=u,l=X(),a=localStorage.getItem("browser_id"),c=S(!1),x=S(null),m=S(""),d=S(!1),p=S("330px");j(()=>f.refresh,async()=>{i.page=1,await $()},{deep:!0});const h=S(),i=ee({page:1,limit:15,active:!1}),o=ee({content:[],totalElements:0}),C=s=>{i.page=s,$()},N=s=>{i.limit=s,$()},E=s=>{d.value||(x.value=s.browser_id,m.value=s.name)},D=s=>s.startsWith("http")?s:`https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/${s}.svg`,g=()=>{const s=o.content.map(_=>_.ip_address.length),r=Math.max(...s);p.value=r*8+50+"px"},$=async()=>{try{c.value=!0;const s=await Oe(i.page,i.limit,i.active);c.value=!1,s&&s.code===200&&(o.content=s.data,o.totalElements=s.total,localStorage.setItem("TABLE_DATA_ARR",JSON.stringify(o)))}catch(s){c.value=!1,console.log(s)}finally{const s=JSON.parse(localStorage.getItem("TABLE_DATA_ARR"));o.content.length===0&&s.length!==0&&(o.content=[...s.content],o.totalElements=s.totalElements),await T(),await g()}},T=async()=>{var r;const s=(r=l.getPingInfo)==null?void 0:r.browser_id;if(s&&i.page===1)if(!o.content.some(z=>z.browser_id===s))o.content.unshift(l.getPingInfo);else{const z=o.content.find(R=>R.browser_id===s);z&&(z.is_connected=1,z.ip_score=l.getPingInfo.ip_score,o.content=o.content.filter(R=>R.browser_id!==s),o.content.unshift(z))}await b()},P=async(s,r)=>{if(m.value!==s.name)try{d.value=!0;const _=await ue({uid:l.getUserInfo.uid,name:m.value,browser_id:s.browser_id});_&&(_.code===200?(B.success(_.data),o.content[r].name=m.value):B.error(_.msg||_)),d.value=!1}catch(_){console.log(_),d.value=!1}finally{x.value=null,m.value=""}},b=()=>{h.value=Math.max(...o.content.map(_=>_.points));const r=o.content.slice(0,50).filter(_=>_.is_connected===1);t("update:updateData",r)};return V(async()=>{await Y(),$()}),(s,r)=>{const _=G,z=de,R=Jt,I=Pe,_e=oe,he=Ae,ge=ze,xe=fe;return w(),k("div",Ht,[e("div",Gt,[Kt,y(_,{onToRefresh:r[0]||(r[0]=v=>$())})]),e("div",qt,[ce((w(),U(he,{data:n(o).content,style:{width:"100%"},"max-height":"400px"},{empty:A(()=>[y(z)]),default:A(()=>[y(I,{prop:"date",label:"Network Status","min-width":`${n(o).content.length!==0?500:120}`},{default:A(v=>[e("div",Qt,[e("div",Xt,[v.row.is_connected?(w(),k("div",Zt,[v.row.network_rate===1.2?(w(),k("div",es,[ts,v.row.browser_id===n(a)?(w(),k("span",ss)):J("",!0)])):(w(),k("div",as,[os,v.row.browser_id===n(l).getUuidv4?(w(),k("span",ns)):J("",!0)])),ls])):(w(),k("div",is,ds))]),e("div",us,[y(R,{id:`progressBar_${v.$index}`,data:v.row,maxPoints:n(h)},null,8,["id","data","maxPoints"])])])]),_:1},8,["min-width"]),y(I,{prop:"points",label:"","min-width":"130px","show-overflow-tooltip":""}),y(I,{prop:"name",label:"Device Name","min-width":"200px",align:"left","show-overflow-tooltip":""},{default:A(v=>[e("div",{class:W(["max-w-[85%] h-8 flex items-center space-x-1 cursor-pointer",n(d)?" cursor-not-allowed":""]),onClick:Te(K=>E(v.row),["stop"])},[n(x)===v.row.browser_id?(w(),k(te,{key:0},[e("div",{class:W(["flex-1 h-full p-1 rounded duration-500 el-input-no-border flex items-center",n(x)===v.row.browser_id?"border border-[#d9af80]":"border-none"])},[y(_e,{class:"h-8",modelValue:n(m),"onUpdate:modelValue":r[1]||(r[1]=K=>q(m)?m.value=K:null),onChange:K=>P(v.row,v.$index)},null,8,["modelValue","onChange"])],2),ps],64)):(w(),k(te,{key:1},[e("div",ms,L(v.row.name),1),_s],64))],10,fs)]),_:1}),y(I,{prop:"ip_address",label:"IP",align:"left","min-width":n(p)},{default:A(v=>[e("div",hs,[e("div",gs,[e("img",{src:D(v.row.country_icon),class:"w-full h-full object-cover"},null,8,xs)]),e("span",vs,L(v.row.ip_address),1)])]),_:1},8,["min-width"]),y(I,{prop:"ip_score",label:"Network Score",align:"center","min-width":"150px"},{default:A(v=>[Ne(L(v.row.ip_score)+"% ",1)]),_:1}),y(I,{prop:"uptime",label:"Time Connected",align:"center","min-width":"180px"},{default:A(v=>[e("span",null,L(("convertMinutes"in s?s.convertMinutes:n(Wt))(v.row.uptime)),1)]),_:1})]),_:1},8,["data"])),[[xe,n(c)]])]),n(o).content.length!==0?(w(),k("div",ws,[y(ge,{"current-page":n(i).page,"onUpdate:currentPage":r[2]||(r[2]=v=>n(i).page=v),background:"","page-size":n(i).limit,"onUpdate:pageSize":r[3]||(r[3]=v=>n(i).limit=v),"page-sizes":[15,30,50],layout:"total, prev, pager, next,sizes",total:n(o).totalElements,onCurrentChange:C,onSizeChange:N},null,8,["current-page","page-size","total"])])):J("",!0)])}}}),ys={class:"w-full h-full flex flex-col space-y-5 adaptation-padding"},$s={class:"w-full h-fit grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-5 xl:grid-cols-5 gap-2"},Ss={class:"flex flex-col col-span-1 md:col-span-3 lg:col-span-2 xl:col-span-2 space-y-2"},Ds={class:"w-full min-h-[216px] bg-[#ffffff0f] rounded-lg flex items-center justify-center px-6 py-4 space-x-10 shadow-3d"},ks={class:"w-[30%] pb-[28%] relative"},Cs=["src"],Ts={class:"h-full flex flex-col space-y-2"},Ys=M({__name:"dashboard",setup(u){const t=S(JSON.parse(localStorage.getItem("INTEGRAL_DATA")||"{}")),f=Q([]),l=X(),a=S(!1),c=S(0),x=F(()=>f.value.filter(o=>o.browser_id===l.getUuidv4).length===0||l.getDisconnect===!0),m=async()=>{try{a.value=!0,await se()&&(l.setPingIntervalTime(se),l.setDisconnect(!1),c.value+=2)}catch{B.error("Connection error, please try again later")}finally{a.value=!1}},d=()=>{l.setDisconnect(!0),B.success("Disconnected successfully"),l.clearPingIntervalTime(),l.setPingInfo(null)},p=i=>{f.value=i||[]},h=async()=>{try{const i=await Fe();if(i&&i.code===200){localStorage.setItem("INTEGRAL_DATA",JSON.stringify(i.data)),t.value=i.data;const o=JSON.parse(localStorage.getItem("PLUGIN_DATA_INFO"));localStorage.setItem("PLUGIN_DATA_INFO",JSON.stringify({...o,...i.data}))}}catch(i){console.error("Error fetching data:",i)}};return V(async()=>{await Y(),await h()}),(i,o)=>{var b,s;const C=ve,N=Ge,E=ct,D=gt,g=St,$=Pt,T=Vt,P=bs;return w(),k("div",ys,[e("div",$s,[e("div",Ss,[e("div",Ds,[e("div",ks,[e("img",{src:`${n(x)?"/images/dashboard/no_connection.png":"/images/dashboard/on_connection.gif"}`,alt:"",class:"w-full h-full absolute top-0 left-0 object-contain",loading:"lazy"},null,8,Cs)]),n(x)?(w(),U(N,{key:0},{default:A(()=>[y(C,{title:"CONNECT",bg:"#D9AF80",hoverTitle:"CONNECT",onClickHandle:o[0]||(o[0]=r=>("throttle"in i?i.throttle:n(we))(()=>{m()})),loading:n(a),disabled:n(a)},null,8,["loading","disabled"])]),_:1})):(w(),U(E,{key:1,data:n(f)},{default:A(()=>[e("span",{class:"px-2 rounded bg-[#303035] hover:bg-[#c79e70] text-[#DCDCDC] cursor-pointer",onClick:d},"Disconnect")]),_:1},8,["data"]))]),y(D)]),e("div",Ts,[y(g,{num:(b=n(t))==null?void 0:b.today_total},null,8,["num"]),y(g,{icon:"total",title:"Total's Points",num:(s=n(t))==null?void 0:s.total_total,onToUpdate:o[1]||(o[1]=r=>h())},null,8,["num"])]),y($,{data:n(f),class:"col-span-1 md:col-span-2 lg:col-span-2 xl:col-span-2"},null,8,["data"])]),y(T),y(P,{refresh:n(c),"onUpdate:updateData":p},null,8,["refresh"])])}}});export{Ys as default};
