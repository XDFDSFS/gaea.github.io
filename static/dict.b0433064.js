import{r as w,aK as x,b4 as I,b3 as C,ab as M,I as T,u as _,b5 as A,aq as L,b6 as F,k as S,h as $,E as D,N as U}from"./entry.db64a3d7.js";import{u as B}from"./user.4871772a.js";const H=()=>null;function N(...s){const i=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(i);let[t,n,r={}]=s;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof n!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");r.server=r.server??!0,r.default=r.default??H,r.lazy=r.lazy??!1,r.immediate=r.immediate??!0;const e=T(),l=()=>e.isHydrating?e.payload.data[t]:e.static.data[t],u=()=>l()!==void 0;e._asyncData[t]||(e._asyncData[t]={data:w(l()??r.default()),pending:w(!u()),error:x(e.payload._errors,t),status:w("idle")});const a={...e._asyncData[t]};a.refresh=a.execute=(c={})=>{if(e._asyncDataPromises[t]){if(c.dedupe===!1)return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if((c._initial||e.isHydrating&&c._initial!==!1)&&u())return l();a.pending.value=!0,a.status.value="pending";const y=new Promise((o,h)=>{try{o(n(e))}catch(g){h(g)}}).then(o=>{if(y.cancelled)return e._asyncDataPromises[t];let h=o;r.transform&&(h=r.transform(o)),r.pick&&(h=Y(h,r.pick)),a.data.value=h,a.error.value=null,a.status.value="success"}).catch(o=>{if(y.cancelled)return e._asyncDataPromises[t];a.error.value=o,a.data.value=_(r.default()),a.status.value="error"}).finally(()=>{y.cancelled||(a.pending.value=!1,e.payload.data[t]=a.data.value,a.error.value&&(e.payload._errors[t]=A(a.error.value)),delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=y,e._asyncDataPromises[t]};const f=()=>a.refresh({_initial:!0}),d=r.server!==!1&&e.payload.serverRendered;{const c=L();if(c&&!c._nuxtOnBeforeMountCbs){c._nuxtOnBeforeMountCbs=[];const o=c._nuxtOnBeforeMountCbs;c&&(I(()=>{o.forEach(h=>{h()}),o.splice(0,o.length)}),C(()=>o.splice(0,o.length)))}d&&e.isHydrating&&u()?(a.pending.value=!1,a.status.value=a.error.value?"error":"success"):c&&(e.payload.serverRendered&&e.isHydrating||r.lazy)&&r.immediate?c._nuxtOnBeforeMountCbs.push(f):r.immediate&&f(),r.watch&&M(r.watch,()=>a.refresh());const y=e.hook("app:data:refresh",o=>{if(!o||o.includes(t))return a.refresh()});c&&C(y)}const p=Promise.resolve(e._asyncDataPromises[t]).then(()=>a);return Object.assign(p,a),p}function Y(s,i){const t={};for(const n of i)t[n]=s[n];return t}function V(s,i,t){const[n={},r]=typeof i=="string"?[{},i]:[i,t],e=n.key||F([r,_(n.baseURL),typeof s=="string"?s:"",_(n.params||n.query)]);if(!e||typeof e!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+e);if(!s)throw new Error("[nuxt] [useFetch] request is missing.");const l=e===r?"$f"+e:e,u=S(()=>{let v=s;return typeof v=="function"&&(v=v()),_(v)});if(!n.baseURL&&typeof u.value=="string"&&u.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:a,lazy:f,default:d,transform:p,pick:c,watch:y,immediate:o,...h}=n,g=$({...h,cache:typeof n.cache=="boolean"?void 0:n.cache}),P={server:a,lazy:f,default:d,transform:p,pick:c,immediate:o,watch:y===!1?[]:[g,u,...y||[]]};let m;return N(l,()=>{var E;return(E=m==null?void 0:m.abort)==null||E.call(m),m=typeof AbortController<"u"?new AbortController:{},typeof u.value=="string"&&u.value.startsWith("/"),(n.$fetch||globalThis.$fetch)(u.value,{signal:m.signal,...g})},P)}const z="https://gaea.cdcdx.com",b=2,K=3e4;let O=!1;const X=s=>({"Content-Type":"application/json",Authorization:`Bearer ${s}`}),R=s=>{var t,n,r,e,l;const i=((t=s.data)==null?void 0:t.message)||((n=s.data)==null?void 0:n.msg)||((l=(e=(r=s.data)==null?void 0:r.detail)==null?void 0:e[0])==null?void 0:l.msg)||"unknown error";D.error(i)},k=async(s,i,t,n,r=0)=>{const e=B(),l=X(e.getToken),u=`${z}${s}`;for(let a=0;a<=b;a++)try{const{data:f,error:d}=await V(u,{...i,headers:l,responseType:t},"$mr5k66ooDp");if(f.value)return f.value;if(d.value){if(d.value.statusCode===500&&a<b){await new Promise(p=>setTimeout(p,K));continue}if(d.value.statusCode===401&&!O){D.error(d.value.data.detail),O=!0,U("/"),e.clearUserInfo();return}throw R(d.value),d.value}}catch(f){throw R(f),f}throw D.error("Server error, please try again later"),new Error("Max retries reached")},q=(s,i)=>k(s,{method:"GET",params:i}),W=(s,i,t)=>k(s,{method:"POST",body:i},t),Q=()=>[{code:"DAILY_CHECKIN",title:"Claim",img:""},{code:"SEVEN_DAY_CHECKIN",title:"Claim",img:""},{code:"VERIFY_DISCORD",title:"Connect",img:"discord"},{code:"VERIFY_X",title:"Connect",img:"X"},{code:"VERIFY_EMAIL",title:"Modify/Send",img:"email"},{code:"FOLLOW_X",title:"Follow/Verify",img:"X"},{code:"JOIN_DISCORD",title:"Join/Verify",img:"discord"},{code:"JOIN_TELEGRAM",title:"Join",img:"telegram"}],Z=()=>["One lowercase character","One uppercase character","One special character","8 characters minimum"];export{q as G,W as P,Z as c,Q as m};
