import{E as oe,_ as ve,t as we}from"./throttle.5b5cbe5e.js";import{_ as ne}from"./plugin-vueexport-helper.c27b6911.js";import{o as w,c as C,r as le,b as e,d as M,f as D,g as F,w as j,t as z,e as n,n as W,h as be,i as y,j as L,k as q,E as B,u as ye,l as ie,m as U,p as J,q as V,s as Y,v as re,x as Z,y as H,z as $e,A as Se,B as De,C as ke,D as Q,F as Ce,G as ce,H as ee,I as Te,J as te,K as Ne}from"./entry.a00f7ed2.js";import{E as Ie}from"./el-popper.fdd4aa63.js";import{E as Ee,_ as de,a as Pe,b as Le,c as Ae}from"./el-select.02fe68cf.js";import{u as X}from"./user.fc116b18.js";import{n as ue,_ as ze,a as Me,e as Re,d as Oe,b as Fe}from"./bi.f5307dc8.js";import{_ as G,d as je,v as fe}from"./el-loading.63e7b6da.js";import{_ as Be}from"./client-only.9b73b986.js";import"./el-checkbox.274b0334.js";import{n as se}from"./ping.ee63ab28.js";import"./index.1735d320.js";import"./request.ab34ac7d.js";import"./referral.9015c8df.js";import"./Fingerprinter.f4bc7b11.js";const Ue={},Ve={class:"flex flex-col items-center justify-center"},Ye=e("span",{class:"iconfont icon-wifi text-[#333] text-5xl font-bold"},null,-1),Je=e("span",{class:"text-base text-[#ffffffcc]"},"Network Connection",-1),We=e("span",{class:"mb-5 mt-1 text-sm font-normal text-[#8c866f]"},"Connect to the network to start earning",-1);function He(d,s){return w(),C("div",Ve,[Ye,Je,We,le(d.$slots,"default")])}const Ge=ne(Ue,[["render",He]]),Ke=""+globalThis.__publicAssetsURL("images/dashboard/equipment.png"),qe={class:"flex flex-col space-y-2"},Qe={class:"flex items-center px-5 space-x-10"},Xe=e("span",{class:"iconfont icon-wifi text-[#30b60b] text-5xl font-bold"},null,-1),Ze={class:"text-[#d9af80]"},et={class:"text-4xl font-bold"},tt=e("span",{class:"text-xs"},"%",-1),st={class:"flex items-center space-x-5 text-white"},at=e("span",{class:"text-[#DCDCDC]"},"Network Score",-1),ot={class:"flex items-center space-x-5 text-white"},nt=e("img",{src:Ke,alt:"",class:"w-10 h-10"},null,-1),lt={class:"text-white space-x-1 text-center"},it=e("span",{class:"text-base font-bold"},"IP:",-1),rt={class:"text-base font-normal u-line-1"},ct=M({__name:"NetworkPing",props:{data:{default:[]}},setup(d){const s=d,u=X(),l=u.getUuidv4,o=D(!0),r=F(()=>s.data.find(p=>p.browser_id===l)||s.data[0]||{}),x=D("");j(()=>r.value,p=>{x.value=p.name||""},{immediate:!0});const m=()=>{o.value=!o.value},c=async()=>{const p=await ue({uid:u.getUserInfo.uid,name:x.value,browser_id:u.getUuidv4});o.value=!0,p&&p.code===200&&B.success(p.data)};return(p,h)=>{var b;const _=oe,t=Ie;return w(),C("div",qe,[e("div",Qe,[Xe,e("div",Ze,[e("span",et,z(((b=n(u).getPingInfo)==null?void 0:b.score)||n(r).ip_score||0),1),tt])]),e("div",st,[le(p.$slots,"default"),at]),e("div",ot,[e("div",{class:W(["max-w-[55%] p-1 h-6 rounded border border-[#303035] flex items-center justify-between el-input-no-border duration-500",n(o)?"text-[#333]":"text-white border-white"]),style:be({"caret-color":n(o)?"transparent":"white"})},[y(_,{class:"w-full h-6",modelValue:n(x),"onUpdate:modelValue":h[0]||(h[0]=N=>q(x)?x.value=N:null),disabled:n(o),onBlur:c},{suffix:L(()=>[e("span",{class:W(["iconfont icon-edit text-xs cursor-pointer leading-[12px] hover:text-white",n(o)?"text-[#333]":"text-white border-white"]),onClick:m},null,2)]),_:1},8,["modelValue","disabled"])],6),nt]),e("div",lt,[it,y(t,{class:"box-item",effect:"dark",content:`IP: ${n(r).ip_address}`,placement:"top"},{default:L(()=>[e("span",rt,z(n(r).ip_address),1)]),_:1},8,["content"])])])}}}),dt=""+globalThis.__publicAssetsURL("images/dashboard/extension.png"),ut=""+globalThis.__publicAssetsURL("images/dashboard/desktopApp.png"),ft={class:"w-full rounded-lg grid grid-cols-2 gap-2"},pt=e("div",{class:"w-10 h-10 rounded-lg"},[e("img",{src:dt,alt:"",class:"w-full h-full object-contain"})],-1),mt=e("div",{class:"flex flex-col items-center text-white text-xs lg:text-sm xl:text-sm md:text-sm sm:text-xs font-medium"},[e("span",{class:"u-line-1"},"Gaea Extension"),e("span",null,"1.2x Rewards")],-1),_t=[pt,mt],ht=ie('<div class="h-full bg-[#ffffff0f] rounded-lg shadow-3d flex justify-center space-x-5 py-4 px-2 cursor-not-allowed"><div class="w-10 h-10 rounded-lg"><img src="'+ut+'" alt="" class="w-full h-full object-contain"></div><div class="flex flex-col items-center text-[#747576] text-xs lg:text-sm xl:text-sm md:text-sm sm:text-xs font-medium"><span class="u-line-1">Gaea Desktop App</span><span>1.4x Rewards</span></div></div>',1),gt=M({__name:"RewardCategory",setup(d){ye();const s=()=>{window.open("https://chromewebstore.google.com/detail/gaea-extension/cpjicfogbgognnifjgmenmaldnmeeeib","_blank")};return(u,l)=>(w(),C("div",ft,[e("div",{class:"h-full bg-[#ffffff0f] rounded-lg shadow-3d flex items-center justify-center space-x-5 py-4 px-2 cursor-pointer transition-transform duration-200 hover:scale-[1.01]",onClick:s},_t),ht]))}}),xt={class:"w-full flex-1 flex flex-col items-center py-4 justify-center bg-[#ffffff0f] rounded-lg space-y-2 shadow-3d relative"},vt={class:"w-full text-[#747576] text-sm font-medium text-center"},wt={class:"absolute right-2 bottom-2"},bt={class:"flex items-center space-x-3"},yt=e("img",{src:ze,alt:"",class:"w-10 h-10"},null,-1),$t={class:"flex-1 text-2xl text-white"},St=M({__name:"EarnInfoCard",props:{num:{default:0},icon:{default:"today"},title:{default:"Today's Points"}},emits:["toUpdate"],setup(d,{emit:s}){const u=d;return(l,o)=>{const r=G;return w(),C("div",xt,[e("div",vt,z(u.title),1),e("div",wt,[u.title==="Total's Points"?(w(),U(r,{key:0,onToRefresh:o[0]||(o[0]=x=>s("toUpdate"))})):J("",!0)]),e("div",bt,[yt,e("span",$t,z(u.num),1)])])}}});let O=null;const ae=(d,s=500,u=!1)=>{if(O!==null&&clearTimeout(O),u){const l=!O;O=setTimeout(function(){O=null},s),l&&typeof d=="function"&&d()}else O=setTimeout(function(){typeof d=="function"&&d()},s)},pe=d=>($e("data-v-f2e8dacf"),d=d(),Se(),d),Dt={class:"w-full h-full min-h-[250px] bg-[#0F0F0F] rounded-lg shadow-3d relative"},kt=["id"],Ct=pe(()=>e("div",{class:"w-3 h-3 bg-[#30b60b] rounded-full glow-effect"},null,-1)),Tt=pe(()=>e("span",{class:"text-[#747576] text-sm leading-[14px]"},"Workers: ",-1)),Nt={class:"text-[#747576] text-base leading-4"},It={class:"absolute right-2 bottom-2"},Et=M({__name:"Map",props:{id:{default:"echartMap"},data:{default:()=>[]}},setup(d){const s=d,{$eChart:u}=H(),{$worldData:l}=H(),o=l;u.registerMap("world",o);const r=D(),x=D(!0),m=D(null),c=D(JSON.parse(localStorage.getItem("NETWORK_INFO_LIST")||"{}")),p=g=>{const S=new Map,T=new Set,P=new Set;for(let i=0;i<g.length;i++){const f=g[i];S.has(f.country)||S.set(f.country,{name:f.country,itemStyle:{areaColor:"#866c50",borderColor:"#d9af80"}}),T.add(JSON.stringify({coords:[[f.longitude,f.latitude],[103.51,1.16]]})),P.add(JSON.stringify([f.longitude,f.latitude]))}const $=Array.from(T).map(i=>JSON.parse(i)),a=Array.from(P).map(i=>({value:JSON.parse(i)}));return{regionsData:Array.from(S.values()),linesData:$,effectScatterEnd:a}},h=F(()=>p(s.data)),_=g=>({type:"lines",zlevel:2,effect:{color:"#d9af80",show:!0,period:2,trailLength:.4,symbol:"pin",symbolSize:8},lineStyle:{width:1,opacity:1,curveness:.5,color:"rgba(255, 255, 255, 0.4)"},data:g}),t=g=>({type:"effectScatter",coordinateSystem:"geo",zlevel:1,showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:g}),b=async()=>{r.value&&(r.value.dispose(),r.value=null);const g=document.getElementById(s.id);if(!g||g.clientWidth===0||g.clientHeight===0)return;r.value=u.init(g);const{regionsData:S,linesData:T,effectScatterEnd:P}=h.value,$={animation:!1,progressive:500,progressiveThreshold:3e3,geo:{type:"map",map:"world",zoom:1.2,roam:!0,scaleLimit:{min:1.2,max:3},itemStyle:{areaColor:"rgba(51, 51, 51,1)",borderColor:"rgba(51, 51, 51,1)",borderType:"dotted"},emphasis:{itemStyle:{areaColor:"#866c50"},label:{show:!1,color:"#fff"}},regions:S},series:[_(T),t([s.data.length>0?[103.51,1.16]:[]]),t(P)]};r.value.setOption($)};j(()=>s.data,()=>{x.value&&ae(b,300)},{deep:!0});const N=async()=>{try{const g=await Me();g&&g.code===200&&(c.value=g.data,localStorage.setItem("NETWORK_INFO_LIST",JSON.stringify(g.data)))}catch(g){console.error("error:",g)}},E=()=>{r.value&&r.value.resize()},k=()=>{r.value&&ae(E(),300)};return V(async()=>{x.value=!0,await Y(),N(),b(),window.addEventListener("resize",k)}),re(()=>{x.value=!1,r.value&&(r.value.dispose(),r.value=null),m.value&&clearTimeout(m.value),window.removeEventListener("resize",k)}),(g,S)=>{const T=Be,P=G;return w(),C("div",Dt,[e("div",{id:g.id,class:"w-full h-full"},null,8,kt),S[0]||(Z(-1),S[0]=e("div",{class:"w-fit absolute left-5 bottom-3 flex items-center space-x-2"},[Ct,Tt,y(T,null,{default:L(()=>{var $;return[e("span",Nt,z((($=n(c))==null?void 0:$.devices_connected)||0),1)]}),_:1})]),Z(1),S[0]),e("div",It,[y(P,{onToRefresh:S[1]||(S[1]=$=>N())})])])}}});const Pt=ne(Et,[["__scopeId","data-v-f2e8dacf"]]),Lt=De("theme",()=>{const d=D("light"),s=F(()=>d.value);return{theme:d,getTheme:s,setTheme:l=>{d.value=l}}},{persist:[{paths:["theme"],storage:ke.cookiesWithOptions({maxAge:604800})}]}),At={class:"w-full h-full min-h-[400px]"},zt=["id"],Mt=M({__name:"bar",props:{id:{default:""},data:{default:()=>[]}},setup(d){const s=d,{$eChart:u}=H(),l=Lt(),o=Q(),r=D({light:["#866c50","#d9af80"],dark:["#866c50","#d9af80"]}),x=F(()=>l.getTheme==="dark"?r.value.dark:r.value.light),m=F(()=>{const h=s.data.map(k=>new Date(k.date).getDate()),_=[{name:"Network Earnings",data:s.data.map(k=>k.network_points)},{name:"Referrals",data:s.data.map(k=>k.referral_points)}],t=s.data.map(k=>k.network_points+k.referral_points),b=Math.ceil(Math.max(...t)*1.1),N=Math.ceil(Math.min(...t.filter(k=>k>0))/1.5),E=Math.ceil((b-N)/5);return{xData:h,yData:_,maxYValue:b,minYValue:N,interval:E}}),c=()=>{o.value&&o.value.dispose();const h=document.getElementById(s.id);if(!h||h.clientWidth===0||h.clientHeight===0)return;o.value=u.init(h);const{xData:_,yData:t,maxYValue:b,minYValue:N,interval:E}=m.value,k=h.clientWidth,g=s.data.length,S=Math.max(10,Math.min(30,k/(g*2.5))),T=t.map(($,a)=>({name:$.name,data:$.data.map(i=>({value:i,itemStyle:{}})),type:"bar",stack:"total",barWidth:S,z:t.length-a})),P={color:x.value,series:T,yAxis:[{type:"value",max:b,min:N,interval:E,splitNumber:5,splitLine:{show:!0,lineStyle:{color:"#2D2B24"}},axisLabel:{show:!0,fontSize:16}}],grid:{top:"5%",left:"1%",right:"1%",bottom:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:_,axisLine:{lineStyle:{color:"#8C866F"},show:!0},axisLabel:{show:!0,fontSize:16,interval:0},axisTick:{show:!1}},tooltip:{trigger:"axis",formatter:$=>{const a=$.reverse();let i=0;const f=new Date(s.data[$[0].dataIndex].date),A=`${f.getFullYear()}/${String(f.getMonth()+1).padStart(2,"0")}/${String(f.getDate()).padStart(2,"0")}`,R=a.map(I=>(i+=Number(I.value)||0,`
           <div class="flex items-center justify-between mt-2 ">
             <div class="flex items-center space-x-1">
               <span class="w-3 h-3 rounded-full" style="background-color: ${I.color};"></span>
               <span>${I.seriesName}</span>
             </div>
             <span>${typeof I.value=="number"?I.value.toFixed(2):I.value}</span>
           </div>`)).join("");return`
         <div class="bg-[#2D2F2F] rounded-lg text-white text-xs ">
           <div class="flex items-center  pb-2 space-x-32">
             <span>${A}</span>
           </div>
           <div class="flex items-center justify-between border-b border-[#ffffff0f] pb-2 space-x-32">
             <span>total:</span>
             <span class="text-[#fff]">${typeof i=="number"?i.toFixed(2):i}</span>
           </div>${R}
         </div>`},axisPointer:{type:"line"},textStyle:{color:"#FFFFFF"},borderColor:"transparent",backgroundColor:"#2D2F2F"}};for(let $=0;$<T[0].data.length;$++){let a=!0;for(let i=T.length-1;i>=0;i--)T[i].data[$].value!==0&&(a?(T[i].data[$].itemStyle={borderRadius:[4,4,0,0]},a=!1):T[i].data[$].itemStyle={borderRadius:[0,0,0,0]})}o.value.setOption(P)};j(()=>l.getTheme,c),j(()=>s.data,c,{deep:!0});const p=je(()=>{o.value&&(o.value.resize(),c())},300);return V(()=>{Y(()=>{c(),window.addEventListener("resize",p)})}),Ce(()=>{o.value&&(window.removeEventListener("resize",p),o.value.dispose())}),(h,_)=>(w(),C("div",At,[e("div",{id:s.id,class:"w-full h-full"},null,8,zt)]))}}),me=""+globalThis.__publicAssetsURL("images/dashboard/statistical_table.png"),Rt={class:"w-full flex-1 flex flex-col rounded-lg p-5 space-y-5 bg-[#ffffff0f]"},Ot={class:"flex items-center justify-between flex-wrap"},Ft=e("div",{class:"flex items-center space-x-2"},[e("img",{src:me,class:"w-10 h-10",alt:""}),e("span",{class:"text-base text-[#ffffffcc]"},"Earnings Statistics")],-1),jt={class:"flex items-center space-x-2"},Bt=ie('<div class="w-full flex items-center space-x-7 text-white text-sm font-normal"><div class="flex items-center space-x-1"><div class="w-3 h-3 bg-[#866c50] rounded-full"></div><span>Network Earnings</span></div><div class="flex items-center space-x-1"><div class="w-3 h-3 bg-[#d9af80] rounded-full"></div><span>Referrals</span></div></div>',1),Ut={class:"w-full flex-1 min-h-[400px] bg-black p-2 rounded-lg"},Vt=M({__name:"EarningsStatistics",setup(d){const s=new Date,u=new Date(s);u.setDate(s.getDate()-7);const l=D(!1),o=D([u.toISOString().split("T")[0],s.toISOString().split("T")[0]]),r=D(JSON.parse(localStorage.getItem("DAILY_STATISTIC")||"[]")),x=()=>{const[c,p]=o.value;if(c&&p){const h=new Date(c);if((new Date(p).getTime()-h.getTime())/(1e3*60*60*24)>30){B.warning("Please select a date range of no more than 30 days."),o.value=[c,c];return}m()}},m=async()=>{try{if(l.value=!0,o.value){const c=await Re(o.value[0],o.value[1]);c&&c.code===200&&(r.value=c.data,localStorage.setItem("DAILY_STATISTIC",JSON.stringify(c.data)))}}catch(c){console.log(c)}finally{l.value=!1}};return V(async()=>{await Y(),m()}),(c,p)=>{const h=Ee,_=G,t=Mt,b=de,N=fe;return ce((w(),C("div",Rt,[e("div",Ot,[Ft,e("div",jt,[y(h,{modelValue:n(o),"onUpdate:modelValue":p[0]||(p[0]=E=>q(o)?o.value=E:null),type:"daterange","range-separator":"-","start-placeholder":"Start date","end-placeholder":"End date",onChange:x,format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"]),y(_,{onToRefresh:p[1]||(p[1]=E=>m())})])]),Bt,e("div",Ut,[n(r).length!==0?(w(),U(t,{key:0,id:"earningsStatistics",data:n(r)},null,8,["data"])):(w(),U(b,{key:1,title:"No data available at the moment"}))])])),[[N,n(l)]])}}}),Yt=["id"],Jt=M({__name:"ProgressBar",props:{id:{default:""},data:{default:()=>({points:0})},maxPoints:{default:200}},setup(d){const s=d,{$eChart:u}=H(),l=Q(),o=D(null),r=async()=>{l.value&&l.value.dispose();const m=document.getElementById(s.id);if(!m||m.clientWidth===0||m.clientHeight===0)return;l.value=u.init(m);const c=30,p=s.maxPoints===0?100:Math.ceil(s.maxPoints/100)*100,h=s.data.points===0?.01:s.data.points,_={backgroundColor:"black",grid:{top:"1%",left:"1%",right:"1%",bottom:"1%",containLabel:!0},xAxis:{type:"value",min:0,max:p,interval:25,splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},yAxis:[{data:[""],axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}}],series:[{type:"bar",barWidth:c,itemStyle:{color:"#d9af80",shadowBlur:4,shadowColor:"none"},data:[h],z:1,animationEasing:"elasticOut"},{type:"pictorialBar",symbolRepeat:"fixed",symbolMargin:"20%",symbol:"rect",symbolSize:[6,c],itemStyle:{color:"#0B0B0B"},data:[h],z:0,animationEasing:"elasticOut"},{type:"pictorialBar",itemStyle:{color:"#000"},symbolRepeat:"fixed",symbolMargin:4,symbol:"rect",symbolClip:!0,symbolSize:[2,c],symbolPosition:"start",data:[h],z:2,animationEasing:"elasticOut"}]};l.value.setOption(_)};j(()=>s.data,r,{deep:!0});const x=()=>{l.value&&(o.value&&clearTimeout(o.value),o.value=setTimeout(()=>{l.value.resize()},300))};return V(async()=>{await Y(),setTimeout(r,500),window.addEventListener("resize",x)}),re(()=>{l.value&&(window.removeEventListener("resize",x),l.value.dispose()),o.value&&clearTimeout(o.value)}),(m,c)=>(w(),C("div",{id:m.id,class:"w-full h-full"},null,8,Yt))}}),Wt=d=>{const s=Math.floor(d/86400),u=d%(24*60*60),l=Math.floor(u/(60*60)),o=u%(60*60),r=Math.floor(o/60);return`${s} day${s!==1?"s":""}, ${l} hr, ${r} min${r!==1?"s":""}`},Ht={class:"w-full flex flex-col rounded-lg bg-[#ffffff0f] p-5 space-y-5"},Gt={class:"flex items-center justify-between pl-3"},Kt=e("div",{class:"flex items-center space-x-2"},[e("img",{src:me,class:"w-10 h-10",alt:""}),e("span",{class:"text-base text-[#ffffffcc]"},"Your Networks")],-1),qt={class:"w-full"},Qt={class:"w-full flex items-center justify-between space-x-1 text-white"},Xt={class:"w-[130px]"},Zt={key:0,class:"flex items-center space-x-2 text-[#d9af80]"},es={key:0,class:"w-4 h-4 relative flex items-center justify-center"},ts=e("span",{class:"text-[17px] iconfont icon-logo-chrome"},null,-1),ss={key:0,class:"text-[12px] iconfont icon-touxiang absolute -right-[4px] -top-2"},as={key:1,class:"w-4 h-4 relative flex items-center justify-center"},os=e("span",{class:"text-[16px] iconfont icon-wangyehttps"},null,-1),ns={key:0,class:"text-[12px] iconfont icon-touxiang absolute -right-[4px] -top-2"},ls=e("span",{class:"text-sm font-normal text-[#d9af80]"}," Connected ",-1),is={key:1,class:"flex items-center space-x-2"},rs=e("div",{class:"w-4 h-4 border border-[#4E4A3C] rounded-full"},null,-1),cs=e("span",{class:"text-sm font-normal text-[#8C866F]"}," Disconnected ",-1),ds=[rs,cs],us={class:"flex-1 h-8"},fs=["onClick"],ps=e("div",{class:"w-[14px] h-[14px] bg-[#d9af80] rounded-full flex items-center justify-center"},[e("span",{class:"iconfont icon-tick text-base text-black font-bold"})],-1),ms={class:"flex-1 h-6 flex items-center u-line-1"},_s=e("span",{class:"iconfont icon-edit text-xs text-[#606266]"},null,-1),hs={class:"flex space-x-2 pl-2"},gs={class:"w-5 h-4"},xs=["src"],vs={class:"flex-1 text-sm font-normal text-[#999999] text-left"},ws={key:0,class:"w-full flex items-center justify-end"},bs=M({__name:"YourNetworks",props:{refresh:{default:0}},emits:["update:updateData","update:networkLoading"],setup(d,{emit:s}){const u=d,l=X(),o=localStorage.getItem("browser_id"),r=D(!1),x=D(null),m=D(""),c=D(!1),p=D("330px");j(()=>u.refresh,async()=>{_.page=1,await S()},{deep:!0});const h=D(),_=ee({page:1,limit:15,active:!1}),t=ee({content:[],totalElements:0}),b=a=>{_.page=a,S()},N=a=>{_.limit=a,S()},E=a=>{c.value||(x.value=a.browser_id,m.value=a.name)},k=a=>a.startsWith("http")?a:`https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/${a}.svg`,g=()=>{const a=t.content.map(f=>f.ip_address.length),i=Math.max(...a);p.value=i*8+50+"px"},S=async()=>{try{s("update:networkLoading",!0),r.value=!0;const a=await Oe(_.page,_.limit,_.active);a&&a.code===200&&(t.content=a.data,t.totalElements=a.total,localStorage.setItem("TABLE_DATA_ARR",JSON.stringify(t)))}catch(a){console.log(a)}finally{r.value=!1,s("update:networkLoading",!1);const a=JSON.parse(localStorage.getItem("TABLE_DATA_ARR"))||[];t.content.length===0&&a.length!==0&&(t.content=[...a.content],t.totalElements=a.totalElements),await T(),await g()}},T=async()=>{var i;const a=(i=l.getPingInfo)==null?void 0:i.browser_id;if(a&&_.page===1)if(!t.content.some(A=>A.browser_id===a))t.content.unshift(l.getPingInfo);else{const A=t.content.find(R=>R.browser_id===a);A&&(A.is_connected=1,A.ip_score=l.getPingInfo.ip_score,t.content=t.content.filter(R=>R.browser_id!==a),t.content.unshift(A))}await $()},P=async(a,i)=>{if(m.value!==a.name)try{c.value=!0;const f=await ue({uid:l.getUserInfo.uid,name:m.value,browser_id:a.browser_id});f&&(f.code===200?(B.success(f.data),t.content[i].name=m.value):B.error(f.msg||f)),c.value=!1}catch(f){console.log(f),c.value=!1}finally{x.value=null,m.value=""}},$=()=>{h.value=Math.max(...t.content.map(f=>f.points));const i=t.content.slice(0,50).filter(f=>f.is_connected===1);s("update:updateData",i)};return V(async()=>{await Y(),S()}),(a,i)=>{const f=G,A=de,R=Jt,I=Pe,_e=oe,he=Le,ge=Ae,xe=fe;return w(),C("div",Ht,[e("div",Gt,[Kt,y(f,{onToRefresh:i[0]||(i[0]=v=>S())})]),e("div",qt,[ce((w(),U(he,{data:n(t).content,style:{width:"100%"},"max-height":"400px"},{empty:L(()=>[y(A)]),default:L(()=>[y(I,{prop:"date",label:"Network Status","min-width":`${n(t).content.length!==0?500:120}`},{default:L(v=>[e("div",Qt,[e("div",Xt,[v.row.is_connected?(w(),C("div",Zt,[v.row.network_rate===1.2?(w(),C("div",es,[ts,v.row.browser_id===n(o)?(w(),C("span",ss)):J("",!0)])):(w(),C("div",as,[os,v.row.browser_id===n(l).getUuidv4?(w(),C("span",ns)):J("",!0)])),ls])):(w(),C("div",is,ds))]),e("div",us,[y(R,{id:`progressBar_${v.$index}`,data:v.row,maxPoints:n(h)},null,8,["id","data","maxPoints"])])])]),_:1},8,["min-width"]),y(I,{prop:"points",label:"","min-width":"130px","show-overflow-tooltip":""}),y(I,{prop:"name",label:"Device Name","min-width":"200px",align:"left","show-overflow-tooltip":""},{default:L(v=>[e("div",{class:W(["max-w-[85%] h-8 flex items-center space-x-1 cursor-pointer",n(c)?" cursor-not-allowed":""]),onClick:Te(K=>E(v.row),["stop"])},[n(x)===v.row.browser_id?(w(),C(te,{key:0},[e("div",{class:W(["flex-1 h-full p-1 rounded duration-500 el-input-no-border flex items-center",n(x)===v.row.browser_id?"border border-[#d9af80]":"border-none"])},[y(_e,{class:"h-8",modelValue:n(m),"onUpdate:modelValue":i[1]||(i[1]=K=>q(m)?m.value=K:null),onChange:K=>P(v.row,v.$index)},null,8,["modelValue","onChange"])],2),ps],64)):(w(),C(te,{key:1},[e("div",ms,z(v.row.name),1),_s],64))],10,fs)]),_:1}),y(I,{prop:"ip_address",label:"IP",align:"left","min-width":n(p)},{default:L(v=>[e("div",hs,[e("div",gs,[e("img",{src:k(v.row.country_icon),class:"w-full h-full object-cover"},null,8,xs)]),e("span",vs,z(v.row.ip_address),1)])]),_:1},8,["min-width"]),y(I,{prop:"ip_score",label:"Network Score",align:"center","min-width":"150px"},{default:L(v=>[Ne(z(v.row.ip_score)+"% ",1)]),_:1}),y(I,{prop:"uptime",label:"Time Connected",align:"center","min-width":"180px"},{default:L(v=>[e("span",null,z(("convertMinutes"in a?a.convertMinutes:n(Wt))(v.row.uptime)),1)]),_:1})]),_:1},8,["data"])),[[xe,n(r)]])]),n(t).content.length!==0?(w(),C("div",ws,[y(ge,{"current-page":n(_).page,"onUpdate:currentPage":i[2]||(i[2]=v=>n(_).page=v),background:"","page-size":n(_).limit,"onUpdate:pageSize":i[3]||(i[3]=v=>n(_).limit=v),"page-sizes":[15,30,50],layout:"total, prev, pager, next,sizes",total:n(t).totalElements,onCurrentChange:b,onSizeChange:N},null,8,["current-page","page-size","total"])])):J("",!0)])}}}),ys={class:"w-full h-full flex flex-col space-y-5 adaptation-padding"},$s={class:"w-full h-fit grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-5 xl:grid-cols-5 gap-2"},Ss={class:"flex flex-col col-span-1 md:col-span-3 lg:col-span-2 xl:col-span-2 space-y-2"},Ds={class:"w-full min-h-[216px] bg-[#ffffff0f] rounded-lg flex items-center justify-center px-6 py-4 space-x-10 shadow-3d"},ks={class:"w-[30%] pb-[28%] relative"},Cs=["src"],Ts={class:"h-full flex flex-col space-y-2"},Ys=M({__name:"dashboard",setup(d){const s=D(JSON.parse(localStorage.getItem("INTEGRAL_DATA")||"{}")),u=Q([]),l=X(),o=D(!1),r=D(0),x=F(()=>u.value.filter(b=>b.browser_id===l.getUuidv4).length===0||l.getDisconnect===!0),m=async()=>{try{o.value=!0,await se()&&(l.setPingIntervalTime(se),l.setDisconnect(!1),r.value+=2)}catch{B.error("Connection error, please try again later")}finally{o.value=!1}},c=()=>{l.setDisconnect(!0),B.success("Disconnected successfully"),l.clearPingIntervalTime(),l.setPingInfo(null)},p=t=>{u.value=t||[]},h=t=>{o.value=t},_=async()=>{try{const t=await Fe();if(t&&t.code===200){localStorage.setItem("INTEGRAL_DATA",JSON.stringify(t.data)),s.value=t.data;const b=JSON.parse(localStorage.getItem("PLUGIN_DATA_INFO"));localStorage.setItem("PLUGIN_DATA_INFO",JSON.stringify({...b,...t.data}))}}catch(t){console.error("Error fetching data:",t)}};return V(async()=>{await Y(),await _()}),(t,b)=>{var a,i;const N=ve,E=Ge,k=ct,g=gt,S=St,T=Pt,P=Vt,$=bs;return w(),C("div",ys,[e("div",$s,[e("div",Ss,[e("div",Ds,[e("div",ks,[e("img",{src:`${n(x)?"/images/dashboard/no_connection.png":"/images/dashboard/on_connection.gif"}`,alt:"",class:"w-full h-full absolute top-0 left-0 object-contain",loading:"lazy"},null,8,Cs)]),n(x)?(w(),U(E,{key:0},{default:L(()=>[y(N,{title:"CONNECT",bg:"#D9AF80",hoverTitle:"CONNECT",onClickHandle:b[0]||(b[0]=f=>("throttle"in t?t.throttle:n(we))(()=>{m()})),loading:n(o),disabled:n(o)},null,8,["loading","disabled"])]),_:1})):(w(),U(k,{key:1,data:n(u)},{default:L(()=>[e("span",{class:"px-2 rounded bg-[#303035] hover:bg-[#c79e70] text-[#DCDCDC] cursor-pointer",onClick:c},"Disconnect")]),_:1},8,["data"]))]),y(g)]),e("div",Ts,[y(S,{num:(a=n(s))==null?void 0:a.today_total},null,8,["num"]),y(S,{icon:"total",title:"Total's Points",num:(i=n(s))==null?void 0:i.total_total,onToUpdate:b[1]||(b[1]=f=>_())},null,8,["num"])]),y(T,{data:n(u),class:"col-span-1 md:col-span-2 lg:col-span-2 xl:col-span-2"},null,8,["data"])]),y(P),y($,{refresh:n(r),"onUpdate:updateData":p,"onUpdate:networkLoading":h},null,8,["refresh"])])}}});export{Ys as default};
