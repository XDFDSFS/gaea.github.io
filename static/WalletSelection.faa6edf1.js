var q=Object.defineProperty;var R=(n,s,e)=>s in n?q(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e;var y=(n,s,e)=>(R(n,typeof s!="symbol"?s+"":s,e),e);import{E as j}from"./el-overlay.cd98760a.js";import{_ as V}from"./client-only.dcf6cca3.js";import{d as N,r as u,a8 as L,o as i,A as z,m as P,l as F,b as o,c as p,F as G,B as O,e as r,t as x,k as E,z as T,G as U}from"./entry.772e1196.js";import{u as Y}from"./godhood.cb4d8fbb.js";import{E as Z}from"./ethers.e3db158f.js";import{s as H}from"./utils.154eefbe.js";import"./focus-trap.8c3f99a2.js";import"./isNil.c75b1b34.js";import"./event.2c073216.js";import"./el-button.64e4d9d4.js";import"./user.fe754047.js";import"./verification.856d912b.js";import"./godhead.c87ba295.js";import"./request.94eb4bd4.js";import"./-vite-browser-externalcommonjs-proxy.0e49e858.js";class J extends Event{constructor(){super("eip6963:requestProvider")}}const w="dAppDefaultWalletProviderRdns";class K extends Z{constructor(){super();y(this,"providerDetails");this.providerDetails=[]}log(e){console.log(`InjectedWalletProvider: ${e}`)}providerReceived(e){this.providerDetails.push(e),this.emit("providerDetailsUpdated"),this.log(`updated wallet provider details from '${e.info.name}' extension`)}subscribe(){window.addEventListener("eip6963:announceProvider",e=>{this.log(`received 'announceProvider' emitted by ${e.detail.info.name} / ${e.detail.info.rdns}`),this.providerReceived(e.detail)})}requestProviders(){this.log("emitting 'requestProvider' event"),this.providerDetails=[],window.dispatchEvent(new J)}storeDefaultProviderRdns(e){window.localStorage.setItem(w,e),this.log(`stored default provider rdns '${e}' in local storage.`)}readDefaultProviderRdns(){const e=window.localStorage.getItem(w);return this.log(`read default provider rdns '${e}' from local storage.`),e}removeDefaultProvider(){window.localStorage.removeItem(w),this.log("removed default provider rdns from local storage")}}const M={class:"w-full space-x-1 space-y-3 px-4 pb-4 z-[10] mx-auto"},Q=o("span",{class:"text-[#EBEBEB] text-[14px]"},"Connect",-1),X={class:"w-full border border-[#2E2E2E] rounded-[9px] h-8 flex items-center justify-between px-4 hover:scale-[1.05] duration-700 cursor-pointer"},ee={class:"flex items-center justify-center space-x-2"},te={class:"flex-shrink-0"},oe=["src"],se={class:"text-[#B0B0B0] text-[12px] font-[400]"},re=["onClick"],ne={key:0,class:"relative block w-2 h-2 bg-green-300 rounded-full shadow-inner shadow-green-500"},ae=o("span",{class:"absolute inline-flex w-full h-full bg-green-400 rounded-full opacity-75 animate-halo"},null,-1),le=[ae],ie={key:0,class:"z-10 flex items-center justify-between px-2 pt-2 relative",style:{opacity:"1",transform:"translateY(0%) translateZ(0px)"}},ce={class:"select-none"},de=o("span",{class:"iconfont icon-copy text-xs sm:text-sm text-[#6E6E6E]"},null,-1),Ce=N({__name:"WalletSelection",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog","update:success"],setup(n,{emit:s}){const e=u(),b=Y(),D=u(),c=new K,d=u([]),B=u(null),a=u(null),_=()=>{d.value=[],s("update:closeDialog"),e.value=null,D.value=null},k=async()=>{d.value=[],A(),W(),c.subscribe(),C()},C=()=>{c.requestProviders()},A=()=>{const t=c.readDefaultProviderRdns();return B.value=t,t},W=()=>{c.on("providerDetailsUpdated",()=>{console.log(d.value," availableProviderDetails.value");const t=c.providerDetails;d.value=t.filter((v,l,h)=>l===h.findIndex(g=>g.info.name===v.info.name))})},I=async(t,v)=>{e.value=v,b.setAccountWalletItem(t.provider);try{const l=await t.provider.request({method:"eth_requestAccounts"});S(l)}catch(l){console.error(`error getting account: ${l}`)}},S=t=>{$(t[0])},$=t=>{a.value=t.toLowerCase(),b.setAccountsWalletAddress(a.value),setTimeout(async()=>{t&&(s("update:success"),_())},1e3)};return(t,v)=>{const l=j,h=V,g=L("copy");return i(),z(h,null,{default:P(()=>[F(l,{class:"border-box","destroy-on-close":"",draggable:"","model-value":t.$props.dialogVisible,"show-close":!1,width:"389px","append-to-body":!0,style:{background:"black","border-radius":"10px","padding-bottom":"10px"},"align-center":"",onClose:_,onOpen:k},{default:P(()=>[o("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:_}),o("div",M,[Q,(i(!0),p(G,null,O(r(d),(m,f)=>(i(),p("div",{class:"",key:m.info.name},[o("div",X,[o("div",ee,[o("div",te,[o("img",{class:"w-5 h-5 rounded-full",src:m.info.icon,alt:"Provider image",style:{filter:"grayscale(100%) brightness(1)"}},null,8,oe)]),o("span",se,x(m.info.name),1)]),o("div",{class:"text-[#EBEBEB] text-[10px] cursor-pointer hover:underline underline-offset-4 duration-500 flex items-center space-x-1",onClick:ue=>I(m,f)},[o("span",null,x(r(e)===f&&r(a)?"Connected":"Connect"),1),r(e)===f&&r(a)?(i(),p("div",ne,le)):E("",!0)],8,re)]),r(e)===f&&r(a)?(i(),p("div",ie,[T((i(),p("p",ce,[U(x(("stringStar"in t?t.stringStar:r(H))({value:r(a),characters:"********",start:4})),1)])),[[g,r(a)]]),de])):E("",!0)]))),128))])]),_:1},8,["model-value"])]),_:1})}}});export{Ce as default};
