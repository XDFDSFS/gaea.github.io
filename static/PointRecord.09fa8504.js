import{_ as P,E as R,a as k}from"./el-scrollbar.465bc669.js";import{E as B}from"./el-select.7867ca26.js";import{E as z}from"./el-overlay.91b1a027.js";import{_ as A}from"./client-only.82cc524c.js";import{d as V,r as E,M as b,o as c,B as _,m as r,l,b as m,A as J,e as o,k as v,t as L,c as U}from"./entry.ada42061.js";import"./el-checkbox.ab0c21f8.js";import"./el-popper.35ebe2d8.js";import"./el-input.b4a2523d.js";import{v as H}from"./el-loading.83819952.js";import{t as $}from"./metamask.a070508e.js";import{i as j}from"./dict.0cf4a056.js";import{_ as M}from"./plugin-vueexport-helper.c27b6911.js";import"./event.aedd0fed.js";import"./-vite-browser-externalcommonjs-proxy.0e49e858.js";import"./debounce.74561c54.js";import"./el-button.95d0b73e.js";import"./ethers.f23b21e4.js";import"./godhood.41eedb4d.js";import"./user.4ebdee34.js";import"./verification.856d912b.js";import"./godhead.90ff102f.js";import"./request.e6aaa8cd.js";import"./validator.75432c13.js";import"./focus-trap.084a112e.js";const q={class:"max-h-[90vh] overflow-hidden flex flex-col mt-5"},F={class:"w-full mt-4"},G={key:0,class:"w-full flex items-center justify-end mt-4 px-10"},K=V({__name:"PointRecord",props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:closeDialog"],setup(Q,{emit:h}){const d=E([]),i=E(!1),e=b({page:1,limit:10,active:!1}),a=b(JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||JSON.stringify({content:[],totalElements:0}))),S=()=>{const t=new Date,n=new Date(t);n.setDate(t.getDate()-30),d.value=[n.toISOString().split("T")[0],t.toISOString().split("T")[0]]},u=()=>{e.page=1,e.limit=10,a.content=[],a.totalElements=0,d.value=[],h("update:closeDialog")},x=t=>{e.page=t,g()},D=t=>{e.limit=t,g()},y=()=>{S(),a.content=JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||"[]").content,a.totalElements=JSON.parse(localStorage.getItem("TABLE_POINT_RECORD")||"[]").totalElements,g()},g=async()=>{try{if(d.value){i.value=!0;const t=await $(e.page,e.limit);i.value=!1,t&&t&&t.code===200&&(a.content=t.data,a.totalElements=t.total,localStorage.setItem("TABLE_POINT_RECORD",JSON.stringify({content:t.data,totalElements:t.total})))}}catch(t){console.log(t),i.value=!1}};return(t,n)=>{const O=P,p=R,T=k,w=B,C=z,N=A,I=H;return c(),_(N,null,{default:r(()=>[l(C,{class:"border-box",draggable:"","model-value":t.$props.dialogVisible,"show-close":!1,width:"750px",style:{background:"rgba(255, 255, 255, 0.08)","backdrop-filter":"blur(15px)",border:"none","border-radius":"10px","padding-bottom":"10px"},"align-center":"",onClose:u,onOpen:y},{default:r(()=>{var f;return[m("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:u}),m("div",q,[m("div",F,[J((c(),_(T,{data:o(a).content,style:{width:"100%"},"max-height":"400px"},{empty:r(()=>[o(i)?v("",!0):(c(),_(O,{key:0,title:"No records available at the moment"}))]),default:r(()=>[l(p,{prop:"date",label:"DATE","min-width":"130px",align:"center"}),l(p,{prop:"description",label:"DESCRIPTION","min-width":"130px","show-overflow-tooltip":"",align:"center"}),l(p,{prop:"points",label:"POINTS","min-width":"130px",align:"center"}),l(p,{prop:"status",label:"STATUS","min-width":"130px",align:"center"},{default:r(s=>[m("span",null,L(("integralStatus"in t?t.integralStatus:o(j))(s.row.status).description),1)]),_:1})]),_:1},8,["data"])),[[I,o(i)]])]),((f=o(a).content)==null?void 0:f.length)!==0?(c(),U("div",G,[l(w,{"current-page":o(e).page,"onUpdate:currentPage":n[0]||(n[0]=s=>o(e).page=s),background:"",size:"small","page-size":o(e).limit,"onUpdate:pageSize":n[1]||(n[1]=s=>o(e).limit=s),"page-sizes":[10,20,50,100],layout:"total, prev, pager, next,sizes",total:o(a).totalElements,onCurrentChange:x,onSizeChange:D},null,8,["current-page","page-size","total"])])):v("",!0)])]}),_:1},8,["model-value"])]),_:1})}}});const ht=M(K,[["__scopeId","data-v-f5459423"]]);export{ht as default};
