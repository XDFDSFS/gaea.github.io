var F=Object.defineProperty;var R=(t,e,r)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var S=(t,e,r)=>(R(t,typeof e!="symbol"?e+"":e,r),r);import{a6 as T,f as M}from"./entry.1678d90d.js";import{C as U}from"./index.1735d320.js";import{n as H}from"./referral.c0aefd11.js";const L=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function $(t){return typeof t=="string"&&L.test(t)}function P(t){if(!$(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var i=[];for(var b=0;b<256;++b)i.push((b+256).toString(16).slice(1));function N(t,e=0){return(i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]).toLowerCase()}function k(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var G="6ba7b810-9dad-11d1-80b4-00c04fd430c8",J="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function O(t,e,r){function n(a,s,c,f){var o;if(typeof a=="string"&&(a=k(a)),typeof s=="string"&&(s=P(s)),((o=s)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+a.length);if(l.set(s),l.set(a,s.length),l=r(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,c){f=f||0;for(var g=0;g<16;++g)c[f+g]=l[g];return c}return N(l)}try{n.name=t}catch{}return n.DNS=G,n.URL=J,n}function B(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function I(t,e){return t<<e|t>>>32-e}function K(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var a=0;a<n.length;++a)t.push(n.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,c=Math.ceil(s/16),f=new Array(c),o=0;o<c;++o){for(var l=new Uint32Array(16),g=0;g<16;++g)l[g]=t[o*64+g*4]<<24|t[o*64+g*4+1]<<16|t[o*64+g*4+2]<<8|t[o*64+g*4+3];f[o]=l}f[c-1][14]=(t.length-1)*8/Math.pow(2,32),f[c-1][14]=Math.floor(f[c-1][14]),f[c-1][15]=(t.length-1)*8&4294967295;for(var y=0;y<c;++y){for(var u=new Uint32Array(80),v=0;v<16;++v)u[v]=f[y][v];for(var h=16;h<80;++h)u[h]=I(u[h-3]^u[h-8]^u[h-14]^u[h-16],1);for(var p=r[0],x=r[1],d=r[2],w=r[3],A=r[4],m=0;m<80;++m){var D=Math.floor(m/20),E=I(p,5)+B(D,x,d,w)+A+e[D]+u[m]>>>0;A=w,w=d,d=I(x,30)>>>0,x=p,p=E}r[0]=r[0]+p>>>0,r[1]=r[1]+x>>>0,r[2]=r[2]+d>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+A>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var V=O("v5",80,K);const X=V;class C{static convertToUUID(e){return X(e,this.NAMESPACE)}static async getStableComponents(e){var r,n,a,s,c,f;try{const o=await e.get();return{userAgent:((r=o.components.userAgent)==null?void 0:r.value)||navigator.userAgent,screenResolution:((n=o.components.screenResolution)==null?void 0:n.value)||`${screen.width}x${screen.height}`,availableScreenResolution:((a=o.components.availableScreenResolution)==null?void 0:a.value)||`${screen.availWidth}x${screen.availHeight}`,hardwareConcurrency:((s=o.components.hardwareConcurrency)==null?void 0:s.value)||navigator.hardwareConcurrency,deviceMemory:((c=o.components.deviceMemory)==null?void 0:c.value)||navigator.deviceMemory,colorDepth:((f=o.components.colorDepth)==null?void 0:f.value)||screen.colorDepth}}catch(o){return console.error("Error occurred while obtaining stable components:",o),{userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,availableScreenResolution:`${screen.availWidth}x${screen.availHeight}`,hardwareConcurrency:navigator.hardwareConcurrency,deviceMemory:navigator.deviceMemory,colorDepth:screen.colorDepth}}}static getCanvasFingerprint(){try{const e=document.createElement("canvas"),r=e.getContext("2d");return r?(e.width=200,e.height=50,r.textBaseline="top",r.font="14px 'Arial'",r.fillStyle="#f60",r.fillRect(10,10,100,30),r.fillStyle="#069",r.fillText("fingerprint",15,15),e.toDataURL()):""}catch(e){return console.error("error:",e),""}}static getWebGLFingerprint(){try{const r=document.createElement("canvas").getContext("webgl");if(!r)return"";const n=r.getExtension("WEBGL_debug_renderer_info");return n?r.getParameter(n.UNMASKED_RENDERER_WEBGL):""}catch(e){return console.error("error:",e),""}}static async hashString(e){if(window.crypto&&window.crypto.subtle)try{const r=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(e));return Array.from(new Uint8Array(r)).map(n=>n.toString(16).padStart(2,"0")).join("")}catch(r){console.error("error:",r)}return U.SHA256(e).toString(U.enc.Hex)}static async getFingerprint(){try{const r=await(await T(()=>import("./fp.esm.2bb0de18.js"),[],import.meta.url)).load(),[n,a]=await Promise.all([this.getStableComponents(r),this.getCanvasFingerprint(),this.getWebGLFingerprint()]),s=JSON.stringify({...n,webgl:a}),c=await this.hashString(s);return this.convertToUUID(c)}catch(e){console.error("error:",e);const r=`fallback-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return this.convertToUUID(r)}}static async getOrCreateFingerprint(){return await this.getFingerprint()}static generateUserAgentHash(e){const r=e+this.SALT;return U.SHA256(r).toString(U.enc.Hex).slice(0,8)}static replaceUUIDPrefix(e,r){if(r.length!==8)throw new Error("The new prefix must be 8 characters long");return r+e.slice(8)}static async getFinalFingerprint(e){try{let r=await this.getOrCreateFingerprint();const n=this.generateUserAgentHash(e);return this.replaceUUIDPrefix(r,n)}catch(r){console.error(r);const n=`fallback-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return this.convertToUUID(n)}}}S(C,"NAMESPACE","10000000-1000-4000-8000-100000000000"),S(C,"SALT","S1gnd6ox2CJ8Laxj");const Z=async()=>{const t=M();if(!t.getUserInfo)return!1;if(!t.getUuidv4){const e=await C.getFinalFingerprint(t.getUserInfo.uid);t.setUuidv4(e)}try{const e=t.getUserInfo.timeDifference,n=Date.now()-e,a=await H({uid:t.getUserInfo.uid,browser_id:t.getUuidv4,timestamp:Math.floor(n/1e3),version:"1.0.0"});if(a.code===200){const{interval:s}=a.data;return t.setPingInterval(s*1e3),t.setScore(a.data.score),!0}else return console.error("ping error:",a.msg),!1}catch(e){return console.error("An error occurred during the network ping process:",e),!1}};export{Z as n};
