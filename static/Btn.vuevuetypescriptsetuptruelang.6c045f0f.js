import{u as b,ax as se,aD as re,r as I,A,ag as Z,z as y,_ as ae,I as ee,H as ce,w as O,x as T,a3 as te,a0 as M,aS as ue,N as ie,O as le,P as de,R as fe,S as ve,am as pe,T as Ee}from"./entry.564334f4.js";import{m as me}from"./el-input.dd3a4118.js";import{E as Te}from"./el-button.6a2c5232.js";const be=(e,n)=>{if(!b)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(n)],s=se(e,t);return["scroll","auto","overlay"].some(r=>s.includes(r))},Ue=(e,n)=>{if(!b)return;let t=e;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(be(t,n))return t;t=t.parentNode}return t};let F;const xe=e=>{var n;if(!b)return 0;if(F!==void 0)return F;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const c=r.offsetWidth;return(n=t.parentNode)==null||n.removeChild(t),F=s-c,F};function He(e,n){if(!b)return;if(!n){e.scrollTop=0;return}const t=[];let s=n.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)t.push(s),s=s.offsetParent;const r=n.offsetTop+t.reduce((E,w)=>E+w.offsetTop,0),c=r+n.offsetHeight,u=e.scrollTop,f=u+e.clientHeight;r<u?e.scrollTop=r:c>f&&(e.scrollTop=c-e.clientHeight)}const De=e=>["",...re].includes(e);let m=[];const z=e=>{const n=e;n.key===Z.esc&&m.forEach(t=>t(n))},ye=e=>{I(()=>{m.length===0&&document.addEventListener("keydown",z),b&&m.push(e)}),A(()=>{m=m.filter(n=>n!==e),m.length===0&&b&&document.removeEventListener("keydown",z)})},R="focus-trap.focus-after-trapped",N="focus-trap.focus-after-released",we="focus-trap.focusout-prevented",j={cancelable:!0,bubbles:!1},he={cancelable:!0,bubbles:!1},q="focusAfterTrapped",G="focusAfterReleased",Fe=Symbol("elFocusTrap"),B=y(),C=y(0),U=y(0);let g=0;const ne=e=>{const n=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)n.push(t.currentNode);return n},J=(e,n)=>{for(const t of e)if(!ge(t,n))return t},ge=(e,n)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},Se=e=>{const n=ne(e),t=J(n,e),s=J(n.reverse(),e);return[t,s]},_e=e=>e instanceof HTMLInputElement&&"select"in e,p=(e,n)=>{if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),U.value=window.performance.now(),e!==t&&_e(e)&&n&&e.select()}};function Y(e,n){const t=[...e],s=e.indexOf(n);return s!==-1&&t.splice(s,1),t}const Ce=()=>{let e=[];return{push:s=>{const r=e[0];r&&s!==r&&r.pause(),e=Y(e,s),e.unshift(s)},remove:s=>{var r,c;e=Y(e,s),(c=(r=e[0])==null?void 0:r.resume)==null||c.call(r)}}},Pe=(e,n=!1)=>{const t=document.activeElement;for(const s of e)if(p(s,n),document.activeElement!==t)return},Q=Ce(),Le=()=>C.value>U.value,S=()=>{B.value="pointer",C.value=window.performance.now()},X=()=>{B.value="keyboard",C.value=window.performance.now()},ke=()=>(I(()=>{g===0&&(document.addEventListener("mousedown",S),document.addEventListener("touchstart",S),document.addEventListener("keydown",X)),g++}),A(()=>{g--,g<=0&&(document.removeEventListener("mousedown",S),document.removeEventListener("touchstart",S),document.removeEventListener("keydown",X))}),{focusReason:B,lastUserFocusTimestamp:C,lastAutomatedFocusTimestamp:U}),_=e=>new CustomEvent(we,{...he,detail:e}),Oe=ee({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[q,G,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:n}){const t=y();let s,r;const{focusReason:c}=ke();ye(o=>{e.trapped&&!u.paused&&n("release-requested",o)});const u={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},f=o=>{if(!e.loop&&!e.trapped||u.paused)return;const{key:a,altKey:i,ctrlKey:l,metaKey:d,currentTarget:$,shiftKey:V}=o,{loop:W}=e,oe=a===Z.tab&&!i&&!l&&!d,h=document.activeElement;if(oe&&h){const P=$,[L,k]=Se(P);if(L&&k){if(!V&&h===k){const v=_({focusReason:c.value});n("focusout-prevented",v),v.defaultPrevented||(o.preventDefault(),W&&p(L,!0))}else if(V&&[L,P].includes(h)){const v=_({focusReason:c.value});n("focusout-prevented",v),v.defaultPrevented||(o.preventDefault(),W&&p(k,!0))}}else if(h===P){const v=_({focusReason:c.value});n("focusout-prevented",v),v.defaultPrevented||o.preventDefault()}}};ce(Fe,{focusTrapRef:t,onKeydown:f}),O(()=>e.focusTrapEl,o=>{o&&(t.value=o)},{immediate:!0}),O([t],([o],[a])=>{o&&(o.addEventListener("keydown",f),o.addEventListener("focusin",x),o.addEventListener("focusout",H)),a&&(a.removeEventListener("keydown",f),a.removeEventListener("focusin",x),a.removeEventListener("focusout",H))});const E=o=>{n(q,o)},w=o=>n(G,o),x=o=>{const a=T(t);if(!a)return;const i=o.target,l=o.relatedTarget,d=i&&a.contains(i);e.trapped||l&&a.contains(l)||(s=l),d&&n("focusin",o),!u.paused&&e.trapped&&(d?r=i:p(r,!0))},H=o=>{const a=T(t);if(!(u.paused||!a))if(e.trapped){const i=o.relatedTarget;!me(i)&&!a.contains(i)&&setTimeout(()=>{if(!u.paused&&e.trapped){const l=_({focusReason:c.value});n("focusout-prevented",l),l.defaultPrevented||p(r,!0)}},0)}else{const i=o.target;i&&a.contains(i)||n("focusout",o)}};async function D(){await M();const o=T(t);if(o){Q.push(u);const a=o.contains(document.activeElement)?s:document.activeElement;if(s=a,!o.contains(a)){const l=new Event(R,j);o.addEventListener(R,E),o.dispatchEvent(l),l.defaultPrevented||M(()=>{let d=e.focusStartEl;ue(d)||(p(d),document.activeElement!==d&&(d="first")),d==="first"&&Pe(ne(o),!0),(document.activeElement===a||d==="container")&&p(o)})}}}function K(){const o=T(t);if(o){o.removeEventListener(R,E);const a=new CustomEvent(N,{...j,detail:{focusReason:c.value}});o.addEventListener(N,w),o.dispatchEvent(a),!a.defaultPrevented&&(c.value=="keyboard"||!Le()||o.contains(document.activeElement))&&p(s??document.body),o.removeEventListener(N,w),Q.remove(u)}}return I(()=>{e.trapped&&D(),O(()=>e.trapped,o=>{o?D():K()})}),A(()=>{e.trapped&&K()}),{onKeydown:f}}});function Re(e,n,t,s,r,c){return te(e.$slots,"default",{handleKeydown:e.onKeydown})}var Ke=ae(Oe,[["render",Re],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const $e=ee({__name:"Btn",props:{title:{default:""},hoverTitle:{default:"Go"},btnLoading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},bg:{default:"#272C30"},hoverBg:{default:"#c79e70"}},emits:["clickHandle"],setup(e,{emit:n}){const t=e,s=y(!1),r=()=>{n("clickHandle")};return(c,u)=>{const f=Te;return ie(),le(f,{class:"w-full",color:t.bg,round:"",onMouseenter:u[0]||(u[0]=E=>s.value=!0),onMouseleave:u[1]||(u[1]=E=>s.value=!1),onClick:u[2]||(u[2]=E=>r()),loading:t.btnLoading,disabled:t.btnLoading||t.disabled,style:Ee({border:"none",backgroundColor:T(s)||t.btnLoading?t.hoverBg:t.bg})},{default:de(()=>[te(c.$slots,"default"),fe("div",{class:ve(["font-semibold text-base",c.disabled?"text-[#6E6E6E]":"text-white "])},pe(T(s)?t.hoverTitle:t.title),3)]),_:3},8,["color","loading","disabled","style"])}}});export{Ke as E,Fe as F,$e as _,Ue as a,xe as g,De as i,He as s};
