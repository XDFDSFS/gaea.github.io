import{d as g,r as f,b9 as S,ab as x,o as C,n as E,O as k,a as z,c as I,b as l,t as T,u as M,I as m,p as B,i as L,j as D}from"./entry.c07dde69.js";import{a as O}from"./dashboard.f2eb99ff.js";import"./dict.0e295fe2.js";import"./user.4e311bf2.js";const h=s=>(B("data-v-cbf60833"),s=s(),L(),s),j={class:"w-full h-full min-h-[250px] bg-[#0F0F0F] rounded-lg shadow-3d relative"},F=["id"],N={class:"w-fit absolute left-5 bottom-3 flex items-center space-x-1"},$=h(()=>l("div",{class:"w-3 h-3 bg-[#30b60b] rounded-full glow-effect"},null,-1)),W=h(()=>l("span",{class:"text-[#747576] text-sm leading-[14px]"},"Workers: ",-1)),A={class:"text-[#747576] text-base leading-4"},H=g({__name:"Map",props:{id:{default:"echartMap"},data:{default:[]}},setup(s){const r=s,{$worldData:v}=m(),_=v,{$eChart:c}=m(),n=f(null),d=f();c.registerMap("world",_);const e=S();x(()=>r.data,()=>{u()},{deep:!0});const u=async()=>{e.value&&e.value.dispose();const t=document.getElementById(r.id);if(!t||t.clientWidth===0||t.clientHeight===0)return;e.value=c.init(t),window.addEventListener("resize",()=>{e.value&&(clearTimeout(n.value),n.value=setTimeout(()=>{e.value.resize()},500))});const i=[],o=[],p=[];r.data&&r.data.forEach(a=>{o.find(w=>a.country===w.name)||o.push({name:a.country,itemStyle:{areaColor:"#866c50",borderColor:"#d9af80"}}),i.push({coords:[[a.longitude,a.latitude],[103.51,1.16]]}),p.push({value:[a.longitude,a.latitude]})});let y={geo:{type:"map",map:"world",zoom:1.2,roam:!0,scaleLimit:{min:1.2,max:3},itemStyle:{areaColor:"rgba(51, 51, 51,1)",borderColor:"rgba(51, 51, 51,1)",borderType:"dotted"},emphasis:{itemStyle:{areaColor:"#866c50"},label:{show:!1,color:"#fff"}},regions:o},series:[{type:"lines",zlevel:2,effect:{color:"#d9af80",show:!0,period:2,trailLength:.4,symbol:"pin",symbolSize:8},lineStyle:{width:1,opacity:1,curveness:.5,color:"rgba(255, 255, 255, 0.4)"},data:i},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:[{value:r.data.length>0?[103.51,1.16]:[]}]},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:p}]};e.value.setOption(y)},b=async()=>{const t=await O();t.code===200&&(d.value=t.data)};return C(async()=>{await E(),u(),b()}),k(()=>{e.value&&(window.removeEventListener("resize",e.value.resize()),clearTimeout(n.value),n.value=null,e.value.dispose(),e.value=null)}),(t,i)=>{var o;return z(),I("div",j,[l("div",{id:t.$props.id,class:"w-full h-full"},null,8,F),l("div",N,[$,W,l("span",A,T(((o=M(d))==null?void 0:o.devices_connected)||0),1)])])}}});const G=D(H,[["__scopeId","data-v-cbf60833"]]);export{G as default};
