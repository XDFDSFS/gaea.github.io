import{d as b,r as f,b9 as g,ab as S,o as x,n as C,b3 as k,O as E,a as z,c as I,b as n,t as T,u as M,I as h,p as B,i as L,j as D}from"./entry.edd7252b.js";import{n as O}from"./dashboard.240472a6.js";import"./dict.898c6748.js";import"./user.91b3fc39.js";const j=s=>(B("data-v-5f0388a0"),s=s(),L(),s),F={class:"w-full h-full min-h-[250px] bg-[#0F0F0F] rounded-lg shadow-3d relative"},N=["id"],$={class:"w-fit absolute right-12 bottom-4 flex items-center space-x-1"},U=j(()=>n("div",{class:"w-[9px] h-[9px] bg-[#30b60b] rounded-full glow-effect"},null,-1)),W={class:"text-xs text-white tracking-wider"},A=b({__name:"Map",props:{id:{default:"echartMap"},data:{default:[]}},setup(s){const r=s,{$worldData:m}=h(),y=m,{$eChart:l}=h(),c=f(null),d=f();l.registerMap("world",y);const e=g();S(()=>r.data,()=>{p()},{deep:!0});const p=async()=>{e.value!=null&&e.value.dispose();const t=document.getElementById(r.id);if(!t||t.clientWidth===0||t.clientHeight===0){console.error("Chart container has no width or height");return}e.value=l.init(t),window.addEventListener("resize",()=>{e.value&&(clearTimeout(c.value),c.value=setTimeout(()=>{e.value.resize()},500))});const i=[],o=[],u=[];r.data&&r.data.forEach(a=>{o.find(w=>a.country===w.name)||o.push({name:a.country,itemStyle:{areaColor:"#866c50",borderColor:"#d9af80"}}),i.push({coords:[[a.longitude,a.latitude],[103.51,1.16]]}),u.push({value:[a.longitude,a.latitude]})});let v={geo:{type:"map",map:"world",zoom:1.2,roam:!0,scaleLimit:{min:1.2,max:3},itemStyle:{areaColor:"rgba(51, 51, 51,1)",borderColor:"rgba(51, 51, 51,1)",borderType:"dotted"},emphasis:{itemStyle:{areaColor:"#866c50"},label:{show:!1,color:"#fff"}},regions:o},series:[{type:"lines",zlevel:2,effect:{color:"#d9af80",show:!0,period:2,trailLength:.4,symbol:"pin",symbolSize:8},lineStyle:{width:1,opacity:1,curveness:.5,color:"rgba(255, 255, 255, 0.4)"},data:i},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:[{value:r.data.length>0?[103.51,1.16]:[]}]},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:u}]};setTimeout(()=>{e.value.setOption(v)},0)},_=async()=>{const t=await O();t.code===200&&(d.value=t.data)};return x(async()=>{await C(),p(),_()}),k(()=>{window.removeEventListener("resize",e.value.resize())}),E(()=>{e.value&&e.value.dispose()}),(t,i)=>{var o;return z(),I("div",F,[n("div",{id:t.$props.id,class:"w-full h-full"},null,8,N),n("div",$,[U,n("span",W,"Workers:"+T(((o=M(d))==null?void 0:o.devices_connected)||0),1)])])}}});const G=D(A,[["__scopeId","data-v-5f0388a0"]]);export{G as default};
