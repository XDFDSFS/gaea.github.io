import{E as oe,_ as ve,t as we}from"./throttle.c44c3730.js";import{_ as ne}from"./plugin-vueexport-helper.c27b6911.js";import{o as w,c as C,r as le,b as e,d as L,f as S,g as j,w as B,t as M,e as o,n as W,h as be,i as y,j as z,k as q,E as F,u as ye,l as ie,m as U,p as J,q as V,s as Y,v as re,x as Z,y as H,z as $e,A as Se,B as De,C as ke,D as Q,F as Ce,G as ce,H as ee,I as Te,J as te,K as Ne}from"./entry.1ea9a69b.js";import{E as Ie}from"./el-popper.9ccf202e.js";import{E as Ee,_ as de,a as Pe,b as ze,c as Ae}from"./el-select.60035025.js";import{u as X}from"./user.92e2ed23.js";import{n as ue,_ as Me,a as Le,e as Re,d as Oe,b as je}from"./bi.475880e0.js";import{_ as G,d as Be,v as fe}from"./el-loading.40bbef10.js";import{_ as Fe}from"./client-only.7b449b6c.js";import"./el-checkbox.58d69301.js";import{n as se}from"./ping.9eaddf5d.js";import"./index.1735d320.js";import"./request.efdb901d.js";import"./referral.4e0f4799.js";import"./Fingerprinter.d34feeec.js";const Ue={},Ve={class:"flex flex-col items-center justify-center"},Ye=e("span",{class:"iconfont icon-wifi text-[#333] text-5xl font-bold"},null,-1),Je=e("span",{class:"text-base text-[#ffffffcc]"},"Network Connection",-1),We=e("span",{class:"mb-5 mt-1 text-sm font-normal text-[#8c866f]"},"Connect to the network to start earning",-1);function He(u,t){return w(),C("div",Ve,[Ye,Je,We,le(u.$slots,"default")])}const Ge=ne(Ue,[["render",He]]),Ke=""+globalThis.__publicAssetsURL("images/dashboard/equipment.png"),qe={class:"flex flex-col space-y-2"},Qe={class:"flex items-center px-5 space-x-10"},Xe=e("span",{class:"iconfont icon-wifi text-[#30b60b] text-5xl font-bold"},null,-1),Ze={class:"text-[#d9af80]"},et={class:"text-4xl font-bold"},tt=e("span",{class:"text-xs"},"%",-1),st={class:"flex items-center space-x-5 text-white"},at=e("span",{class:"text-[#DCDCDC]"},"Network Score",-1),ot={class:"flex items-center space-x-5 text-white"},nt=e("img",{src:Ke,alt:"",class:"w-10 h-10"},null,-1),lt={class:"text-white space-x-1 text-center"},it=e("span",{class:"text-base font-bold"},"IP:",-1),rt={class:"text-base font-normal u-line-1"},ct=L({__name:"NetworkPing",props:{data:{default:[]}},setup(u){const t=u,f=X(),n=f.getUuidv4,s=S(!0),r=j(()=>t.data.find(p=>p.browser_id===n)||t.data[0]||{}),x=S("");B(()=>r.value,p=>{x.value=p.name||""},{immediate:!0});const m=()=>{s.value=!s.value},d=async()=>{const p=await ue({uid:f.getUserInfo.uid,name:x.value,browser_id:f.getUuidv4});s.value=!0,p&&p.code===200&&F.success(p.data)};return(p,g)=>{var T;const l=oe,c=Ie;return w(),C("div",qe,[e("div",Qe,[Xe,e("div",Ze,[e("span",et,M(((T=o(f).getPingInfo)==null?void 0:T.score)||o(r).ip_score||0),1),tt])]),e("div",st,[le(p.$slots,"default"),at]),e("div",ot,[e("div",{class:W(["max-w-[55%] p-1 h-6 rounded border border-[#303035] flex items-center justify-between el-input-no-border duration-500",o(s)?"text-[#333]":"text-white border-white"]),style:be({"caret-color":o(s)?"transparent":"white"})},[y(l,{class:"w-full h-6",modelValue:o(x),"onUpdate:modelValue":g[0]||(g[0]=N=>q(x)?x.value=N:null),disabled:o(s),onBlur:d},{suffix:z(()=>[e("span",{class:W(["iconfont icon-edit text-xs cursor-pointer leading-[12px] hover:text-white",o(s)?"text-[#333]":"text-white border-white"]),onClick:m},null,2)]),_:1},8,["modelValue","disabled"])],6),nt]),e("div",lt,[it,y(c,{class:"box-item",effect:"dark",content:`IP: ${o(r).ip_address}`,placement:"top"},{default:z(()=>[e("span",rt,M(o(r).ip_address),1)]),_:1},8,["content"])])])}}}),dt=""+globalThis.__publicAssetsURL("images/dashboard/extension.png"),ut=""+globalThis.__publicAssetsURL("images/dashboard/desktopApp.png"),ft={class:"w-full rounded-lg grid grid-cols-2 gap-2"},pt=e("div",{class:"w-10 h-10 rounded-lg"},[e("img",{src:dt,alt:"",class:"w-full h-full object-contain"})],-1),mt=e("div",{class:"flex flex-col items-center text-white text-xs lg:text-sm xl:text-sm md:text-sm sm:text-xs font-medium"},[e("span",{class:"u-line-1"},"Gaea Extension"),e("span",null,"1.2x Rewards")],-1),_t=[pt,mt],ht=ie('<div class="h-full bg-[#ffffff0f] rounded-lg shadow-3d flex justify-center space-x-5 py-4 px-2 cursor-not-allowed"><div class="w-10 h-10 rounded-lg"><img src="'+ut+'" alt="" class="w-full h-full object-contain"></div><div class="flex flex-col items-center text-[#747576] text-xs lg:text-sm xl:text-sm md:text-sm sm:text-xs font-medium"><span class="u-line-1">Gaea Desktop App</span><span>1.4x Rewards</span></div></div>',1),gt=L({__name:"RewardCategory",setup(u){ye();const t=()=>{window.open("https://chromewebstore.google.com/detail/gaea-extension/cpjicfogbgognnifjgmenmaldnmeeeib","_blank")};return(f,n)=>(w(),C("div",ft,[e("div",{class:"h-full bg-[#ffffff0f] rounded-lg shadow-3d flex items-center justify-center space-x-5 py-4 px-2 cursor-pointer transition-transform duration-200 hover:scale-[1.01]",onClick:t},_t),ht]))}}),xt={class:"w-full flex-1 flex flex-col items-center py-4 justify-center bg-[#ffffff0f] rounded-lg space-y-2 shadow-3d relative"},vt={class:"w-full text-[#747576] text-sm font-medium text-center"},wt={class:"absolute right-2 bottom-2"},bt={class:"flex items-center space-x-3"},yt=e("img",{src:Me,alt:"",class:"w-10 h-10"},null,-1),$t={class:"flex-1 text-2xl text-white"},St=L({__name:"EarnInfoCard",props:{num:{default:0},icon:{default:"today"},title:{default:"Today's Points"}},emits:["toUpdate"],setup(u,{emit:t}){const f=u;return(n,s)=>{const r=G;return w(),C("div",xt,[e("div",vt,M(f.title),1),e("div",wt,[f.title==="Total's Points"?(w(),U(r,{key:0,onToRefresh:s[0]||(s[0]=x=>t("toUpdate"))})):J("",!0)]),e("div",bt,[yt,e("span",$t,M(f.num),1)])])}}});let O=null;const ae=(u,t=500,f=!1)=>{if(O!==null&&clearTimeout(O),f){const n=!O;O=setTimeout(function(){O=null},t),n&&typeof u=="function"&&u()}else O=setTimeout(function(){typeof u=="function"&&u()},t)},pe=u=>($e("data-v-f2e8dacf"),u=u(),Se(),u),Dt={class:"w-full h-full min-h-[250px] bg-[#0F0F0F] rounded-lg shadow-3d relative"},kt=["id"],Ct=pe(()=>e("div",{class:"w-3 h-3 bg-[#30b60b] rounded-full glow-effect"},null,-1)),Tt=pe(()=>e("span",{class:"text-[#747576] text-sm leading-[14px]"},"Workers: ",-1)),Nt={class:"text-[#747576] text-base leading-4"},It={class:"absolute right-2 bottom-2"},Et=L({__name:"Map",props:{id:{default:"echartMap"},data:{default:()=>[]}},setup(u){const t=u,{$eChart:f}=H(),{$worldData:n}=H(),s=n;f.registerMap("world",s);const r=S(),x=S(!0),m=S(null),d=S(JSON.parse(localStorage.getItem("NETWORK_INFO_LIST")||"{}")),p=_=>{const $=new Map,k=new Set,P=new Set;for(let i=0;i<_.length;i++){const h=_[i];$.has(h.country)||$.set(h.country,{name:h.country,itemStyle:{areaColor:"#866c50",borderColor:"#d9af80"}}),k.add(JSON.stringify({coords:[[h.longitude,h.latitude],[103.51,1.16]]})),P.add(JSON.stringify([h.longitude,h.latitude]))}const b=Array.from(k).map(i=>JSON.parse(i)),a=Array.from(P).map(i=>({value:JSON.parse(i)}));return{regionsData:Array.from($.values()),linesData:b,effectScatterEnd:a}},g=j(()=>p(t.data)),l=_=>({type:"lines",zlevel:2,effect:{color:"#d9af80",show:!0,period:2,trailLength:.4,symbol:"pin",symbolSize:8},lineStyle:{width:1,opacity:1,curveness:.5,color:"rgba(255, 255, 255, 0.4)"},data:_}),c=_=>({type:"effectScatter",coordinateSystem:"geo",zlevel:1,showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:_}),T=async()=>{r.value&&(r.value.dispose(),r.value=null);const _=document.getElementById(t.id);if(!_||_.clientWidth===0||_.clientHeight===0)return;r.value=f.init(_);const{regionsData:$,linesData:k,effectScatterEnd:P}=g.value,b={animation:!1,progressive:500,progressiveThreshold:3e3,geo:{type:"map",map:"world",zoom:1.2,roam:!0,scaleLimit:{min:1.2,max:3},itemStyle:{areaColor:"rgba(51, 51, 51,1)",borderColor:"rgba(51, 51, 51,1)",borderType:"dotted"},emphasis:{itemStyle:{areaColor:"#866c50"},label:{show:!1,color:"#fff"}},regions:$},series:[l(k),c([t.data.length>0?[103.51,1.16]:[]]),c(P)]};r.value.setOption(b)};B(()=>t.data,()=>{x.value&&ae(T,300)},{deep:!0});const N=async()=>{try{const _=await Le();_&&_.code===200&&(d.value=_.data,localStorage.setItem("NETWORK_INFO_LIST",JSON.stringify(_.data)))}catch(_){console.error("error:",_)}},E=()=>{r.value&&r.value.resize()},D=()=>{r.value&&ae(E(),300)};return V(async()=>{x.value=!0,await Y(),N(),T(),window.addEventListener("resize",D)}),re(()=>{x.value=!1,r.value&&(r.value.dispose(),r.value=null),m.value&&clearTimeout(m.value),window.removeEventListener("resize",D)}),(_,$)=>{const k=Fe,P=G;return w(),C("div",Dt,[e("div",{id:_.id,class:"w-full h-full"},null,8,kt),$[0]||(Z(-1),$[0]=e("div",{class:"w-fit absolute left-5 bottom-3 flex items-center space-x-2"},[Ct,Tt,y(k,null,{default:z(()=>{var b;return[e("span",Nt,M(((b=o(d))==null?void 0:b.devices_connected)||0),1)]}),_:1})]),Z(1),$[0]),e("div",It,[y(P,{onToRefresh:$[1]||($[1]=b=>N())})])])}}});const Pt=ne(Et,[["__scopeId","data-v-f2e8dacf"]]),zt=De("theme",()=>{const u=S("light"),t=j(()=>u.value);return{theme:u,getTheme:t,setTheme:n=>{u.value=n}}},{persist:[{paths:["theme"],storage:ke.cookiesWithOptions({maxAge:604800})}]}),At={class:"w-full h-full min-h-[400px]"},Mt=["id"],Lt=L({__name:"bar",props:{id:{default:""},data:{default:()=>[]}},setup(u){const t=u,{$eChart:f}=H(),n=zt(),s=Q(),r=S({light:["#866c50","#d9af80"],dark:["#866c50","#d9af80"]}),x=j(()=>n.getTheme==="dark"?r.value.dark:r.value.light),m=j(()=>{const g=t.data.map(D=>new Date(D.date).getDate()),l=[{name:"Network Earnings",data:t.data.map(D=>D.network_points)},{name:"Referrals",data:t.data.map(D=>D.referral_points)}],c=t.data.map(D=>D.network_points+D.referral_points),T=Math.ceil(Math.max(...c)*1.1),N=Math.ceil(Math.min(...c.filter(D=>D>0))/1.5),E=Math.ceil((T-N)/5);return{xData:g,yData:l,maxYValue:T,minYValue:N,interval:E}}),d=()=>{s.value&&s.value.dispose();const g=document.getElementById(t.id);if(!g||g.clientWidth===0||g.clientHeight===0)return;s.value=f.init(g);const{xData:l,yData:c,maxYValue:T,minYValue:N,interval:E}=m.value,D=g.clientWidth,_=t.data.length,$=Math.max(10,Math.min(30,D/(_*2.5))),k=c.map((b,a)=>({name:b.name,data:b.data.map(i=>({value:i,itemStyle:{}})),type:"bar",stack:"total",barWidth:$,z:c.length-a})),P={color:x.value,series:k,yAxis:[{type:"value",max:T,min:N,interval:E,splitNumber:5,splitLine:{show:!0,lineStyle:{color:"#2D2B24"}},axisLabel:{show:!0,fontSize:16}}],grid:{top:"5%",left:"1%",right:"1%",bottom:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:l,axisLine:{lineStyle:{color:"#8C866F"},show:!0},axisLabel:{show:!0,fontSize:16,interval:0},axisTick:{show:!1}},tooltip:{trigger:"axis",formatter:b=>{const a=b.reverse();let i=0;const h=new Date(t.data[b[0].dataIndex].date),A=`${h.getFullYear()}/${String(h.getMonth()+1).padStart(2,"0")}/${String(h.getDate()).padStart(2,"0")}`,R=a.map(I=>(i+=Number(I.value)||0,`
           <div class="flex items-center justify-between mt-2 ">
             <div class="flex items-center space-x-1">
               <span class="w-3 h-3 rounded-full" style="background-color: ${I.color};"></span>
               <span>${I.seriesName}</span>
             </div>
             <span>${typeof I.value=="number"?I.value.toFixed(2):I.value}</span>
           </div>`)).join("");return`
         <div class="bg-[#2D2F2F] rounded-lg text-white text-xs ">
           <div class="flex items-center  pb-2 space-x-32">
             <span>${A}</span>
           </div>
           <div class="flex items-center justify-between border-b border-[#ffffff0f] pb-2 space-x-32">
             <span>total:</span>
             <span class="text-[#fff]">${typeof i=="number"?i.toFixed(2):i}</span>
           </div>${R}
         </div>`},axisPointer:{type:"line"},textStyle:{color:"#FFFFFF"},borderColor:"transparent",backgroundColor:"#2D2F2F"}};for(let b=0;b<k[0].data.length;b++){let a=!0;for(let i=k.length-1;i>=0;i--)k[i].data[b].value!==0&&(a?(k[i].data[b].itemStyle={borderRadius:[4,4,0,0]},a=!1):k[i].data[b].itemStyle={borderRadius:[0,0,0,0]})}s.value.setOption(P)};B(()=>n.getTheme,d),B(()=>t.data,d,{deep:!0});const p=Be(()=>{s.value&&(s.value.resize(),d())},300);return V(()=>{Y(()=>{d(),window.addEventListener("resize",p)})}),Ce(()=>{s.value&&(window.removeEventListener("resize",p),s.value.dispose())}),(g,l)=>(w(),C("div",At,[e("div",{id:t.id,class:"w-full h-full"},null,8,Mt)]))}}),me=""+globalThis.__publicAssetsURL("images/dashboard/statistical_table.png"),Rt={class:"w-full flex-1 flex flex-col rounded-lg p-5 space-y-5 bg-[#ffffff0f]"},Ot={class:"flex items-center justify-between flex-wrap"},jt=e("div",{class:"flex items-center space-x-2"},[e("img",{src:me,class:"w-10 h-10",alt:""}),e("span",{class:"text-base text-[#ffffffcc]"},"Earnings Statistics")],-1),Bt={class:"flex items-center space-x-2"},Ft=ie('<div class="w-full flex items-center space-x-7 text-white text-sm font-normal"><div class="flex items-center space-x-1"><div class="w-3 h-3 bg-[#866c50] rounded-full"></div><span>Network Earnings</span></div><div class="flex items-center space-x-1"><div class="w-3 h-3 bg-[#d9af80] rounded-full"></div><span>Referrals</span></div></div>',1),Ut={class:"w-full flex-1 min-h-[400px] bg-black p-2 rounded-lg"},Vt=L({__name:"EarningsStatistics",setup(u){const t=new Date,f=new Date(t);f.setDate(t.getDate()-7);const n=S(!1),s=S([f.toISOString().split("T")[0],t.toISOString().split("T")[0]]),r=S(JSON.parse(localStorage.getItem("DAILY_STATISTIC")||"[]")),x=()=>{const[d,p]=s.value;if(d&&p){const g=new Date(d);if((new Date(p).getTime()-g.getTime())/(1e3*60*60*24)>30){F.warning("Please select a date range of no more than 30 days."),s.value=[d,d];return}m()}},m=async()=>{try{if(n.value=!0,s.value){const d=await Re(s.value[0],s.value[1]);d&&d.code===200&&(r.value=d.data,localStorage.setItem("DAILY_STATISTIC",JSON.stringify(d.data)))}}catch(d){console.log(d)}finally{n.value=!1}};return V(async()=>{await Y(),m()}),(d,p)=>{const g=Ee,l=G,c=Lt,T=de,N=fe;return ce((w(),C("div",Rt,[e("div",Ot,[jt,e("div",Bt,[y(g,{modelValue:o(s),"onUpdate:modelValue":p[0]||(p[0]=E=>q(s)?s.value=E:null),type:"daterange","range-separator":"-","start-placeholder":"Start date","end-placeholder":"End date",onChange:x,format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"]),y(l,{onToRefresh:p[1]||(p[1]=E=>m())})])]),Ft,e("div",Ut,[o(r).length!==0?(w(),U(c,{key:0,id:"earningsStatistics",data:o(r)},null,8,["data"])):(w(),U(T,{key:1,title:"No data available at the moment"}))])])),[[N,o(n)]])}}}),Yt=["id"],Jt=L({__name:"ProgressBar",props:{id:{default:""},data:{default:()=>({points:0})},maxPoints:{default:200}},setup(u){const t=u,{$eChart:f}=H(),n=Q(),s=S(null),r=async()=>{n.value&&n.value.dispose();const m=document.getElementById(t.id);if(!m||m.clientWidth===0||m.clientHeight===0)return;n.value=f.init(m);const d=30,p=t.maxPoints===0?100:Math.ceil(t.maxPoints/100)*100,g=t.data.points===0?.01:t.data.points,l={backgroundColor:"black",grid:{top:"1%",left:"1%",right:"1%",bottom:"1%",containLabel:!0},xAxis:{type:"value",min:0,max:p,interval:25,splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},yAxis:[{data:[""],axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}}],series:[{type:"bar",barWidth:d,itemStyle:{color:"#d9af80",shadowBlur:4,shadowColor:"none"},data:[g],z:1,animationEasing:"elasticOut"},{type:"pictorialBar",symbolRepeat:"fixed",symbolMargin:"20%",symbol:"rect",symbolSize:[6,d],itemStyle:{color:"#0B0B0B"},data:[g],z:0,animationEasing:"elasticOut"},{type:"pictorialBar",itemStyle:{color:"#000"},symbolRepeat:"fixed",symbolMargin:4,symbol:"rect",symbolClip:!0,symbolSize:[2,d],symbolPosition:"start",data:[g],z:2,animationEasing:"elasticOut"}]};n.value.setOption(l)};B(()=>t.data,r,{deep:!0});const x=()=>{n.value&&(s.value&&clearTimeout(s.value),s.value=setTimeout(()=>{n.value.resize()},300))};return V(async()=>{await Y(),setTimeout(r,500),window.addEventListener("resize",x)}),re(()=>{n.value&&(window.removeEventListener("resize",x),n.value.dispose()),s.value&&clearTimeout(s.value)}),(m,d)=>(w(),C("div",{id:m.id,class:"w-full h-full"},null,8,Yt))}}),Wt=u=>{const t=Math.floor(u/86400),f=u%(24*60*60),n=Math.floor(f/(60*60)),s=f%(60*60),r=Math.floor(s/60);return`${t} day${t!==1?"s":""}, ${n} hr, ${r} min${r!==1?"s":""}`},Ht={class:"w-full flex flex-col rounded-lg bg-[#ffffff0f] p-5 space-y-5"},Gt={class:"flex items-center justify-between pl-3"},Kt=e("div",{class:"flex items-center space-x-2"},[e("img",{src:me,class:"w-10 h-10",alt:""}),e("span",{class:"text-base text-[#ffffffcc]"},"Your Networks")],-1),qt={class:"w-full"},Qt={class:"w-full flex items-center justify-between space-x-1 text-white"},Xt={class:"w-[130px]"},Zt={key:0,class:"flex items-center space-x-2 text-[#d9af80]"},es={key:0,class:"w-4 h-4 relative flex items-center justify-center"},ts=e("span",{class:"text-[17px] iconfont icon-logo-chrome"},null,-1),ss={key:0,class:"text-[12px] iconfont icon-touxiang absolute -right-[4px] -top-2"},as={key:1,class:"w-4 h-4 relative flex items-center justify-center"},os=e("span",{class:"text-[16px] iconfont icon-wangyehttps"},null,-1),ns={key:0,class:"text-[12px] iconfont icon-touxiang absolute -right-[4px] -top-2"},ls=e("span",{class:"text-sm font-normal text-[#d9af80]"}," Connected ",-1),is={key:1,class:"flex items-center space-x-2"},rs=e("div",{class:"w-4 h-4 border border-[#4E4A3C] rounded-full"},null,-1),cs=e("span",{class:"text-sm font-normal text-[#8C866F]"}," Disconnected ",-1),ds=[rs,cs],us={class:"flex-1 h-8"},fs=["onClick"],ps=e("div",{class:"w-[14px] h-[14px] bg-[#d9af80] rounded-full flex items-center justify-center"},[e("span",{class:"iconfont icon-tick text-base text-black font-bold"})],-1),ms={class:"flex-1 h-6 flex items-center u-line-1"},_s=e("span",{class:"iconfont icon-edit text-xs text-[#606266]"},null,-1),hs={class:"flex space-x-2 pl-2"},gs={class:"w-5 h-4"},xs=["src"],vs={class:"flex-1 text-sm font-normal text-[#999999] text-left"},ws={key:0,class:"w-full flex items-center justify-end"},bs=L({__name:"YourNetworks",props:{refresh:{default:0}},emits:["update:updateData"],setup(u,{emit:t}){const f=u,n=X(),s=localStorage.getItem("browser_id"),r=S(!1),x=S(null),m=S(""),d=S(!1),p=S("330px");B(()=>f.refresh,()=>{l.page=1,$(),k()},{deep:!0});const g=S(),l=ee({page:1,limit:15,active:!1}),c=ee(JSON.parse(localStorage.getItem("TABLE_DATA_ARR")||JSON.stringify({content:[],totalElements:0}))),T=a=>{l.page=a,$()},N=a=>{l.limit=a,$()},E=a=>{d.value||(x.value=a.browser_id,m.value=a.name)},D=a=>a.startsWith("http")?a:`https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/${a}.svg`,_=()=>{const a=c.content.map(h=>h.ip_address.length),i=Math.max(...a);p.value=i*8+50+"px"},$=async()=>{try{r.value=!0;const a=await Oe(l.page,l.limit,l.active);r.value=!1,a&&a.code===200&&(c.content=a.data,c.totalElements=a.total,localStorage.setItem("TABLE_DATA_ARR",JSON.stringify(c)),await _()),k()}catch(a){r.value=!1,k(),console.log(a)}},k=async()=>{var i;const a=(i=n.getPingInfo)==null?void 0:i.browser_id;if(a)if(!c.content.some(A=>A.browser_id===a))c.content.unshift(n.getPingInfo);else{const A=c.content.find(R=>R.browser_id===a);A&&(A.is_connected=1,A.ip_score=n.getPingInfo.ip_score,c.content=c.content.filter(R=>R.browser_id!==a),c.content.unshift(A))}await b()},P=async(a,i)=>{if(m.value!==a.name)try{d.value=!0;const h=await ue({uid:n.getUserInfo.uid,name:m.value,browser_id:a.browser_id});h&&(h.code===200?(F.success(h.data),c.content[i].name=m.value):F.error(h.msg||h)),d.value=!1}catch(h){console.log(h),d.value=!1}finally{x.value=null,m.value=""}},b=()=>{g.value=Math.max(...c.content.map(h=>h.points));const i=c.content.slice(0,50).filter(h=>h.is_connected===1);t("update:updateData",i)};return V(async()=>{await Y(),$(),_()}),(a,i)=>{const h=G,A=de,R=Jt,I=Pe,_e=oe,he=ze,ge=Ae,xe=fe;return w(),C("div",Ht,[e("div",Gt,[Kt,y(h,{onToRefresh:i[0]||(i[0]=v=>$())})]),e("div",qt,[ce((w(),U(he,{data:o(c).content,style:{width:"100%"},"max-height":"400px"},{empty:z(()=>[y(A)]),default:z(()=>[y(I,{prop:"date",label:"Network Status","min-width":`${o(c).content.length!==0?500:120}`},{default:z(v=>[e("div",Qt,[e("div",Xt,[v.row.is_connected?(w(),C("div",Zt,[v.row.network_rate===1.2?(w(),C("div",es,[ts,v.row.browser_id===o(s)?(w(),C("span",ss)):J("",!0)])):(w(),C("div",as,[os,v.row.browser_id===o(n).getUuidv4?(w(),C("span",ns)):J("",!0)])),ls])):(w(),C("div",is,ds))]),e("div",us,[y(R,{id:`progressBar_${v.$index}`,data:v.row,maxPoints:o(g)},null,8,["id","data","maxPoints"])])])]),_:1},8,["min-width"]),y(I,{prop:"points",label:"","min-width":"130px","show-overflow-tooltip":""}),y(I,{prop:"name",label:"Device Name","min-width":"200px",align:"left","show-overflow-tooltip":""},{default:z(v=>[e("div",{class:W(["max-w-[85%] h-8 flex items-center space-x-1 cursor-pointer",o(d)?" cursor-not-allowed":""]),onClick:Te(K=>E(v.row),["stop"])},[o(x)===v.row.browser_id?(w(),C(te,{key:0},[e("div",{class:W(["flex-1 h-full p-1 rounded duration-500 el-input-no-border flex items-center",o(x)===v.row.browser_id?"border border-[#d9af80]":"border-none"])},[y(_e,{class:"h-8",modelValue:o(m),"onUpdate:modelValue":i[1]||(i[1]=K=>q(m)?m.value=K:null),onChange:K=>P(v.row,v.$index)},null,8,["modelValue","onChange"])],2),ps],64)):(w(),C(te,{key:1},[e("div",ms,M(v.row.name),1),_s],64))],10,fs)]),_:1}),y(I,{prop:"ip_address",label:"IP",align:"left","min-width":o(p)},{default:z(v=>[e("div",hs,[e("div",gs,[e("img",{src:D(v.row.country_icon),class:"w-full h-full object-cover"},null,8,xs)]),e("span",vs,M(v.row.ip_address),1)])]),_:1},8,["min-width"]),y(I,{prop:"ip_score",label:"Network Score",align:"center","min-width":"150px"},{default:z(v=>[Ne(M(v.row.ip_score)+"% ",1)]),_:1}),y(I,{prop:"uptime",label:"Time Connected",align:"center","min-width":"180px"},{default:z(v=>[e("span",null,M(("convertMinutes"in a?a.convertMinutes:o(Wt))(v.row.uptime)),1)]),_:1})]),_:1},8,["data"])),[[xe,o(r)]])]),o(c).content.length!==0?(w(),C("div",ws,[y(ge,{"current-page":o(l).page,"onUpdate:currentPage":i[2]||(i[2]=v=>o(l).page=v),background:"","page-size":o(l).limit,"onUpdate:pageSize":i[3]||(i[3]=v=>o(l).limit=v),"page-sizes":[15,30,50],layout:"total, prev, pager, next,sizes",total:o(c).totalElements,onCurrentChange:T,onSizeChange:N},null,8,["current-page","page-size","total"])])):J("",!0)])}}}),ys={class:"w-full h-full flex flex-col space-y-5 adaptation-padding"},$s={class:"w-full h-fit grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-5 xl:grid-cols-5 gap-2"},Ss={class:"flex flex-col col-span-1 md:col-span-3 lg:col-span-2 xl:col-span-2 space-y-2"},Ds={class:"w-full min-h-[216px] bg-[#ffffff0f] rounded-lg flex items-center justify-center px-6 py-4 space-x-10 shadow-3d"},ks={class:"w-[30%] pb-[28%] relative"},Cs=["src"],Ts={class:"h-full flex flex-col space-y-2"},Ys=L({__name:"dashboard",setup(u){const t=S(JSON.parse(localStorage.getItem("INTEGRAL_DATA")||"{}")),f=Q([]),n=X(),s=S(!1),r=S(0),x=j(()=>f.value.filter(c=>c.browser_id===n.getUuidv4).length===0||n.getDisconnect===!0),m=async()=>{try{s.value=!0,await se()&&(n.setPingIntervalTime(se),n.setDisconnect(!1),r.value+=2)}catch{F.error("Connection error, please try again later")}finally{s.value=!1}},d=()=>{n.setDisconnect(!0),F.success("Disconnected successfully"),n.clearPingIntervalTime(),n.setPingInfo(null)},p=l=>{console.log(l,"data"),f.value=l||[]},g=async()=>{try{const l=await je();l&&l.code===200&&(localStorage.setItem("INTEGRAL_DATA",JSON.stringify(l.data)),t.value=l.data)}catch(l){console.error("Error fetching data:",l)}};return V(async()=>{await Y(),await g()}),(l,c)=>{var b,a;const T=ve,N=Ge,E=ct,D=gt,_=St,$=Pt,k=Vt,P=bs;return w(),C("div",ys,[e("div",$s,[e("div",Ss,[e("div",Ds,[e("div",ks,[e("img",{src:`${o(x)?"/images/dashboard/no_connection.png":"/images/dashboard/on_connection.gif"}`,alt:"",class:"w-full h-full absolute top-0 left-0 object-contain",loading:"lazy"},null,8,Cs)]),o(x)?(w(),U(N,{key:0},{default:z(()=>[y(T,{title:"CONNECT",bg:"#D9AF80",hoverTitle:"CONNECT",onClickHandle:c[0]||(c[0]=i=>("throttle"in l?l.throttle:o(we))(()=>{m()})),loading:o(s),disabled:o(s)},null,8,["loading","disabled"])]),_:1})):(w(),U(E,{key:1,data:o(f)},{default:z(()=>[e("span",{class:"px-2 rounded bg-[#303035] hover:bg-[#c79e70] text-[#DCDCDC] cursor-pointer",onClick:d},"Disconnect")]),_:1},8,["data"]))]),y(D)]),e("div",Ts,[y(_,{num:(b=o(t))==null?void 0:b.today_total},null,8,["num"]),y(_,{icon:"total",title:"Total's Points",num:(a=o(t))==null?void 0:a.total_total,onToUpdate:c[1]||(c[1]=i=>g())},null,8,["num"])]),y($,{data:o(f),class:"col-span-1 md:col-span-2 lg:col-span-2 xl:col-span-2"},null,8,["data"])]),y(k),y(P,{refresh:o(r),"onUpdate:updateData":p},null,8,["refresh"])])}}});export{Ys as default};
